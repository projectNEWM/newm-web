(()=>{"use strict";var e,t,a,r,s,n,o,i,l,d,u,c,p,g,h,f,w,y,m,x,b,A,v,_,T,E,I,k,C,D,M,S,R,W,B,P,N,F,O,L,H,U,V,G,j,K,Z,z,Y,q,$,J,X,Q,ee,te,ae,re,se,ne,oe,ie,le,de,ue,ce,pe,ge,he={60274:(e,t,a)=>{a.d(t,{ZP:()=>Re,oN:()=>We,iZ:()=>de.cip8Sign,jK:()=>Be,ZE:()=>Pe,mO:()=>Ne,vX:()=>Fe,Cj:()=>Oe});var r=a(94198),s=a.n(r),n=a(89400),o=a.n(n),i=a(94473),l=a.n(i),d=a(80426),u=a.n(d),c=a(77766),p=a.n(c),g=a(39392),h=a.n(g),f=a(78580),w=a.n(f),y=a(93476),m=a.n(y),x=a(39291),b=a.n(x),A=a(72119),v=a.n(A),_=a(25843),T=a.n(_),E=a(86902),I=a.n(E),k=a(78914),C=a.n(k),D=a(59340),M=a.n(D),S=a(41511),R=a.n(S),W=a(20116),B=a.n(W),P=a(36384),N=a.n(P),F=a(51938),O=a.n(F),L=a(51942),H=a.n(L),U=a(32366),V=a.n(U),G=a(2991),j=a.n(G),K=a(905),Z=a(13469),z=a(37790),Y=a(36231),q=a(66905),$=a(34654),J=a(4922),X=a(24283),Q=a(54901),ee=a(11015),te=a(52367),ae=a(38079),re=a(90691),se=a(38441),ne=a(3577),oe=(a(27189),a(4158)),ie=a(84184),le=a(76900),de=a(75723),ue=a(15476),ce=a(62021),pe=a(70184),ge=a(21131),he=a(63139),fe=a(73744),we=a(40026),ye=a(34786),me=a(33913),xe=a(1499),be=a(37495),Ae=a(27649),ve=a(86335),_e=a(84174),Te=a(67362),Ee=a(55343),Ie=a(45918),ke=a(15687),Ce=a(90649),De=a(87315),Me=a(51965),Se=a(27697);class Re{async getAllAddressesForDisplay(e){Z.Yd.debug("AdaApi::getAllAddressesForDisplay called");try{return await(0,be.XN)(e)}catch(e){if(Z.Yd.error("AdaApi::getAllAddressesForDisplay error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}async getChainAddressesForDisplay(e){Z.Yd.debug("AdaApi::getChainAddressesForDisplay called");try{return await(0,xe.cP)(e)}catch(e){if(Z.Yd.error("AdaApi::getChainAddressesForDisplay error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}async refreshTransactions(e){try{var t;let a;if(e.isLocalRequest)a=await(0,J._v)({publicDeriver:e.publicDeriver,skip:e.skip||0,limit:e.limit||20});else{e.beforeTx||await(0,J.tu)(e.publicDeriver.getDb(),e.publicDeriver,e.checkAddressesInUse,e.getTokenInfo,e.getMultiAssetMetadata,e.getMultiAssetSupply);const t=e=>null!=e&&e.block?{blockHash:e.block.Hash,txHash:e.txid}:void 0;a=await(0,J.Ci)(e.publicDeriver.getDb(),e.publicDeriver,e.checkAddressesInUse,e.getTransactionHistory,e.getRecentTransactionHashes,e.getTransactionsByHashes,e.getBestBlock,e.getTokenInfo,e.getMultiAssetMetadata,e.getMultiAssetSupply,t(e.afterTx),t(e.beforeTx))}return j()(t=a.txs).call(t,(t=>{if(t.txType===re.iU.CardanoByron)return z.Z.fromAnnotatedTx({tx:t,addressLookupMap:a.addressLookupMap,network:e.publicDeriver.getParent().getNetworkInfo(),defaultToken:e.publicDeriver.getParent().getDefaultToken()});if(t.txType===re.iU.CardanoShelley)return Y.Z.fromAnnotatedTx({tx:t,addressLookupMap:a.addressLookupMap,network:e.publicDeriver.getParent().getNetworkInfo(),defaultToken:e.publicDeriver.getParent().getDefaultToken()});throw new Error(`refreshTransactions unknown tx type ${t.type}`)}))}catch(e){if(Z.Yd.error("AdaApi::refreshTransactions error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}async refreshPendingTransactions(e){Z.Yd.debug("AdaApi::refreshPendingTransactions called");try{var t;const a=await(0,J.ON)({publicDeriver:e.publicDeriver});return Z.Yd.debug("AdaApi::refreshPendingTransactions success: "+(0,Z.WO)(a)),j()(t=a.txs).call(t,(t=>{if(t.txType===re.iU.CardanoByron)return z.Z.fromAnnotatedTx({tx:t,addressLookupMap:a.addressLookupMap,network:e.publicDeriver.getParent().getNetworkInfo(),defaultToken:e.publicDeriver.getParent().getDefaultToken()});if(t.txType===re.iU.CardanoShelley)return Y.Z.fromAnnotatedTx({tx:t,addressLookupMap:a.addressLookupMap,network:e.publicDeriver.getParent().getNetworkInfo(),defaultToken:e.publicDeriver.getParent().getDefaultToken()});throw new Error(`refreshPendingTransactions unknown tx type ${t.type}`)}))}catch(e){if(Z.Yd.error("AdaApi::refreshPendingTransactions error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}async getForeignAddresses(e){try{return await(0,J.Jr)({publicDeriver:e.publicDeriver})}catch(e){if(Z.Yd.error("AdaApi::getForeignAddresses error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}async createWallet(e){return await this.restoreWallet(e)}async signAndBroadcast(e){Z.Yd.debug("AdaApi::signAndBroadcast called");const{password:t}=e;try{const a=await e.publicDeriver.getSigningKey(),r=await e.publicDeriver.normalizeKey({...a,password:t}),{txHash:s,encodedTx:n}=ve.RustModule.WasmScope((t=>{const a=(0,ie.OJ)(e.signRequest.senderUtxos,e.signRequest.unsignedTx,e.publicDeriver.getParent().getPublicDeriverLevel(),t.WalletV4.Bip32PrivateKey.from_hex(r.prvKeyHex),e.signRequest.neededStakingKeyHashes.wits,e.signRequest.metadata);return{txHash:t.WalletV4.hash_transaction(a.body()).to_hex(),encodedTx:a.to_bytes()}})),{txId:o}=await e.sendTx({network:e.publicDeriver.getParent().getNetworkInfo(),id:s,encodedTx:n});return Z.Yd.debug("AdaApi::signAndBroadcast success: "+(0,Z.WO)({txId:o})),{txId:o,signedTxHex:(0,Ce.bytesToHex)(n)}}catch(e){if(e instanceof me.UZ)throw new ge.dJ;if(Z.Yd.error(`AdaApi::signAndBroadcast error: ${(0,Z.uh)(e)}`),e instanceof ge.kl)throw new ge.kl;if(e instanceof he.default)throw e;throw new ge.rp}}createTrezorSignTxData(e){try{var t;Z.Yd.debug("AdaApi::createTrezorSignTxData called");const a=V()(t=(0,_e.getCardanoHaskellBaseConfig)(e.network)).call(t,((e,t)=>H()(e,t)),{}),r=(0,ce.Gi)(e.signRequest,a.ByronNetworkId,O()(a.ChainNetworkId,10));return Z.Yd.debug("AdaApi::createTrezorSignTxData success: "+(0,Z.WO)(r)),{trezorSignTxPayload:r}}catch(e){if(Z.Yd.error("AdaApi::createTrezorSignTxData error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}createLedgerSignTxData(e){try{var t;Z.Yd.debug("AdaApi::createLedgerSignTxData called");const a=V()(t=(0,_e.getCardanoHaskellBaseConfig)(e.network)).call(t,((e,t)=>H()(e,t)),{}),r=(0,pe.Fb)({signRequest:e.signRequest,byronNetworkMagic:a.ByronNetworkId,networkId:O()(a.ChainNetworkId,10),addressingMap:e.addressingMap,cip36:e.cip36});return Z.Yd.debug("AdaApi::createLedgerSignTxData success: "+(0,Z.WO)(r)),{ledgerSignTxPayload:r}}catch(e){if(Z.Yd.error("AdaApi::createLedgerSignTxData error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}createHwSignTxDataFromRawTx(e,t){try{var a;Z.Yd.debug("AdaApi::createHwSignTxDataFromRawTx called");const s=(0,_e.getCardanoHaskellBaseConfigCombined)(t.network),n=null!==(a=s.ByronNetworkId)&&void 0!==a?a:(0,Ce.fail)("Missing ByronNetworkId in network config!"),o=e=>{var a;return null===(a=t.addressingMap(e))||void 0===a?void 0:a.path};if("ledger"===e){var r;const a=(0,pe.od)(t.txBodyHex,Number(s.ChainNetworkId),n,o,t.senderUtxos,null!==(r=t.additionalRequiredSigners)&&void 0!==r?r:[]);return Z.Yd.debug("AdaApi::createHwSignTxDataFromRawTx success: "+(0,Z.WO)(a)),{hw:e,result:{ledgerSignTxPayload:a}}}if("trezor"===e){const a=(0,ce.fu)(t.txBodyHex,Number(s.ChainNetworkId),n,o,t.senderUtxos);return Z.Yd.debug("AdaApi::createHwSignTxDataFromRawTx success: "+(0,Z.WO)(a)),{hw:e,result:{trezorSignTxPayload:a}}}throw new Error("Now supported HW type: "+e)}catch(e){if(Z.Yd.error("AdaApi::createHwSignTxDataFromRawTx error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}async createUnsignedTxForUtxos(e){Z.Yd.debug("AdaApi::createUnsignedTxForUtxos called");try{let s;const n=void 0!==e.metadata?(0,Q.bp)(e.metadata):void 0,{protocolParameters:o}=e;if((0,oe.qP)(e.tokens)){if(1!==e.receivers.length)throw new Error("createUnsignedTxForUtxos wrong output size for sendAll");const t=e.receivers[0];s=(0,ie.T$)(t,e.utxos,e.absSlotNumber,{keyDeposit:ve.RustModule.WalletV4.BigNum.from_str(o.keyDeposit),linearFee:ve.RustModule.WalletV4.LinearFee.new(ve.RustModule.WalletV4.BigNum.from_str(o.linearFee.coefficient),ve.RustModule.WalletV4.BigNum.from_str(o.linearFee.constant)),coinsPerUtxoByte:ve.RustModule.WalletV4.BigNum.from_str(o.coinsPerUtxoByte),poolDeposit:ve.RustModule.WalletV4.BigNum.from_str(o.poolDeposit),networkId:Number(e.network.BaseConfig[0].ChainNetworkId)},n,e.network.NetworkId)}else{var t,a,r;const i=V()(t=e.receivers).call(t,((e,t)=>null!=t.addressing?(e.push({address:t.address,addressing:t.addressing}),e):e),[]);if(1!==i.length)throw new Error("createUnsignedTxForUtxos needs exactly one change address");const l=i[0],d=V()(a=e.receivers).call(a,((e,t)=>null==t.addressing?(e.push({address:t.address}),e):e),[]);if(d.length>1)throw new Error("createUnsignedTxForUtxos can't send to more than one address");s=await(0,ie.fi)(1===d.length?[{address:d[0].address,amount:(0,oe._Y)(e.defaultToken,e.tokens,j()(r=e.utxos).call(r,(t=>(0,Ae.Bi)(t,e.network.NetworkId))))}]:[],{address:l.address,addressing:l.addressing},e.utxos,e.absSlotNumber,{keyDeposit:o.keyDeposit,linearFeeCoefficient:o.linearFee.coefficient,linearFeeConstant:o.linearFee.constant,coinsPerUtxoByte:o.coinsPerUtxoByte,poolDeposit:o.poolDeposit,networkId:Number(e.network.BaseConfig[0].ChainNetworkId)},[],[],!1,n,e.network.NetworkId)}return Z.Yd.debug("AdaApi::createUnsignedTxForUtxos success: "+(0,Z.WO)(s)),new ye.Y({senderUtxos:s.senderUtxos,unsignedTx:s.txBuilder,changeAddr:s.changeAddr,metadata:n,networkSettingSnapshot:{ChainNetworkId:Number((0,_e.getCardanoHaskellBaseConfig)(e.network)[0].ChainNetworkId),KeyDeposit:new K.Z(o.keyDeposit),PoolDeposit:new K.Z(o.poolDeposit),NetworkId:e.network.NetworkId},neededStakingKeyHashes:{neededHashes:new(N()),wits:new(N())}})}catch(e){if(Z.Yd.error("AdaApi::createUnsignedTxForUtxos error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}async createUnsignedTx(e){var t;const a=B()(t=e.publicDeriver.utxos).call(t,(t=>B()(e).call(e,t))),r=(0,Ae.ue)(a),s=[{address:e.receiver}];if(!(0,oe.qP)(e.tokens)){const t=e.publicDeriver.receiveAddress;s.push({address:t.addr.Hash,addressing:t.addressing})}return this.createUnsignedTxForUtxos({absSlotNumber:e.absSlotNumber,receivers:s,network:(0,_e.getNetworkById)(e.publicDeriver.networkId),defaultToken:{defaultNetworkId:e.publicDeriver.networkId,defaultIdentifier:e.publicDeriver.defaultTokenId},utxos:r,tokens:e.tokens,metadata:e.metadata,protocolParameters:e.protocolParameters})}async createUnsignedTxForConnector(e,t){const a=(0,ne.se)(e.publicDeriver);if(!a)throw new Error("unable to get UTxO addresses from public deriver");const r=await a.getAllUtxoAddresses(),s=await(0,Ie.WH)(e.publicDeriver);if(null==s)throw new Error("no internal addresses left. Should never happen");return this._createUnsignedTxForConnector(e.cardanoTxRequest,e.publicDeriver.getParent().getDefaultToken(),e.publicDeriver.publicDeriverId,r,s,e.publicDeriver.getParent().getNetworkInfo(),e.absSlotNumber,e.submittedTxs,e.utxos,e.protocolParameters,t)}async _createUnsignedTxForConnector(e,t,a,r,s,n,o,i,l,d,u){var c;const{includeInputs:p,includeOutputs:g,includeTargets:h,mintRequest:f,onlyInputsIntended:w,validityIntervalStart:y,ttl:m,requiredSigners:x}=e,b=e=>{if(null!=e&&!R()(e))throw new Error(`Array is expected, got: ${M()(e)}`);return null==e||0===e.length},A=b(p);if(b(g)&&b(h)){if(A)throw new Error("Invalid tx-build request, must specify inputs, outputs, or targets");if(!1===Boolean(w))throw new Error("No outputs is specified and `onlyInputsIntended` flag is false")}const v=await this._addressedUtxosWithSubmittedTxs(l,a,r,i),_=new(N())(j()(v).call(v,(e=>e.utxo_id))),E=[],k=V()(c=p||[]).call(c,((e,t)=>{const a="string"==typeof t?t:"string"==typeof t.id?t.id:null;if(null==a)throw new Error(`Unrecognised input request format: ${M()(t)}`);return _.has(a)||E.push(a),e[a]=t,e}),{}),D=[];if(E.length>0){if(null==u)throw new Error("Foreign utxos are present, but foreign utxo fetcher is missing!");D.push(...await u(E)),C()(D).call(D,((e,t)=>{if(null==e)throw new Error(`No UTxO found for input id: ${M()(E[t])}`)}))}const S=[],W=[];for(const e of[...D,...v]){const t=k[e.utxo_id];null!=t?S.push([e,t.witness]):W.push(e)}const B={address:s.addr.Hash,addressing:s.addressing},P=[],F=[],O={},L=[];function H(e,t,a){if(e){const r=new K.Z(e.tag).toString(),s=O[r]=O[r]||{version:"1.0"};(s[t]=s[t]||{})[(0,Ce.hexToUtf)(a)]=JSON.parse(e.json)}}function U(e){const{script:t,assetName:a}=e,r=ve.RustModule.WasmScope((e=>(0,Ce.bytesToHex)(e.WalletV4.NativeScript.from_bytes((0,Ce.hexToBytes)(t)).hash().to_bytes())));return{policyId:r,assetId:`${r}.${a}`}}ve.RustModule.WasmScope((e=>{for(const a of null!=g?g:[]){const r=e.WalletV4.TransactionOutput.from_bytes((0,Ce.hexToBytes)(a)),s={address:(0,Ce.bytesToHex)(r.address().to_bytes()),amount:(0,Ae.$Z)(r.amount(),t)},n=r.data_hash();null!=n&&(s.dataHash=(0,Ce.bytesToHex)(n.to_bytes())),P.push(s)}}));for(const e of null!=h?h:[]){var G;const a={...e.assets||{}},r=e=>{const r=[{identifier:t.defaultIdentifier,networkId:n.NetworkId,amount:new K.Z(e)}];for(const e of I()(a)){const t=a[e];null!=t&&r.push({identifier:e,networkId:n.NetworkId,amount:new K.Z(t)})}return new Ee.a(r,{defaultNetworkId:n.NetworkId,defaultIdentifier:t.defaultIdentifier})},s=e.mintRequest;if(null!=s&&s.length>0){var Z;if(0===T()(Z=e.address||"").call(Z).length)throw new Error("A transaction target must include a valid non-empty address `address`!");for(const e of s){var z;const{script:t,assetName:r,amount:s,metadata:n,storeScriptOnChain:o}=e,{policyId:i,assetId:l}=U(e),d=new K.Z(null!==(z=a[l])&&void 0!==z?z:"0").plus(new K.Z(null!=s?s:"1"));if(!d.isPositive())throw new Error("Target mint cannot sum to a non-positive amount! Use root mint-request for burning!");const u=d.toString();F.push({policyScript:t,assetName:r,amount:u}),a[l]=u,H(n,i,r),!0===Boolean(o)&&L.push(t)}}let o=r(null!==(G=e.value)&&void 0!==G?G:"1000000");const i=e.dataHash,l=e.ensureRequiredMinimalValue;if(null==l||!1===l){if(null==e.value)throw new Error(`Value is required for a valid tx output, got: ${M()(e)}`)}else{var Y;const t=(0,Ae.RY)(o,new K.Z(d.coinsPerUtxoByte));t.gt(null!==(Y=e.value)&&void 0!==Y?Y:"0")&&(o=r(t.toString()))}P.push({address:e.address,amount:o,dataHash:i})}for(const e of f||[]){const{script:t,assetName:a,amount:r,metadata:s}=e,{policyId:n}=U(e);F.push({policyScript:t,assetName:a,amount:null!=r?r:"1"}),H(s,n,a)}const q={};for(const e of I()(O))q[String(e)]=M()(O[e]);const $={metadata:q,nativeScripts:L},J=await(0,ie.u2)(P,F,$,B,S,W,o,y,m,x,{linearFeeCoefficient:d.linearFee.coefficient,linearFeeConstant:d.linearFee.constant,coinsPerUtxoByte:d.coinsPerUtxoByte,poolDeposit:d.poolDeposit,keyDeposit:d.keyDeposit,networkId:n.NetworkId},n.NetworkId);return new ye.Y({senderUtxos:J.senderUtxos,unsignedTx:J.txBuilder,changeAddr:J.changeAddr,metadata:void 0,networkSettingSnapshot:{ChainNetworkId:Number((0,_e.getCardanoHaskellBaseConfig)(n)[0].ChainNetworkId),KeyDeposit:new K.Z(d.keyDeposit),PoolDeposit:new K.Z(d.poolDeposit),NetworkId:n.NetworkId},neededStakingKeyHashes:{neededHashes:new(N()),wits:new(N())}})}async createDelegationTx(e){Z.Yd.debug("AdaApi::createDelegationTx called");try{const{wallet:t}=e,a=(0,_e.getNetworkById)(t.networkId),r={keyDeposit:e.protocolParameters.keyDeposit,linearFeeCoefficient:e.protocolParameters.linearFee.coefficient,linearFeeConstant:e.protocolParameters.linearFee.constant,coinsPerUtxoByte:e.protocolParameters.coinsPerUtxoByte,poolDeposit:e.protocolParameters.poolDeposit,networkId:a.NetworkId},s=ve.RustModule.WalletV4.Bip32PublicKey.from_hex(t.publicKey),n=(0,De.c)({addressing:t.stakingAddressing.addressing,startingFrom:{level:t.publicDeriverLevel,key:s}}).to_raw_key(),o=(0,X.createCertificate)(n.hash().to_hex(),e.registrationStatus,e.poolRequest,e.drepCredential),i=t.utxos,d=(0,Ae.ue)(i),u=await t.receiveAddress,c=await(0,ie.fi)([],{address:u.addr.Hash,addressing:u.addressing},d,e.absSlotNumber,r,o,[],!1,void 0,e.wallet.networkId),p=(0,X.filterAddressesByStakingKey)(ve.RustModule.WalletV4.Credential.from_keyhash(n.hash()),i,!1),g={defaultNetworkId:t.networkId,defaultIdentifier:t.defaultTokenId},h=V()(p).call(p,((e,t)=>{var a;return e.joinAddMutable(new Ee.a(j()(a=t.output.tokens).call(a,(e=>({identifier:e.Token.Identifier,amount:new K.Z(e.TokenList.Amount),networkId:e.Token.NetworkId}))),g))}),new Ee.a([],g)),f=function(e,t,a,r){const s=ve.RustModule.WasmScope((e=>e.WalletV4.Credential.from_keyhash(a.hash()).to_hex())),n=new Ee.a([],r);for(const a of e.senderUtxos){const e=l()(t).call(t,(e=>e.output.Transaction.Hash===a.tx_hash&&e.output.UtxoTransactionOutput.OutputIndex===a.tx_index));if(null==e)throw new Error("getDifferenceAfterTx utxo not found. Should not happen");const i=e.address;var o;(0,X.addrContainsAccountKey)(i,s,!0)&&n.joinAddMutable(new Ee.a(j()(o=e.output.tokens).call(o,(e=>({identifier:e.Token.Identifier,amount:new K.Z(e.TokenList.Amount),networkId:e.Token.NetworkId}))),r))}const i=new Ee.a([],r);{const t=e.txBuilder.build();for(const e of(0,Ce.iterateLenGet)(t.outputs()))(0,X.addrContainsAccountKey)(e.address().to_hex(),s,!0)&&i.joinAddMutable((0,Ae.$Z)(e.amount(),r))}return i.joinSubtractCopy(n)}(c,i,n,g),w=h.joinAddCopy(f).joinAddCopy(e.valueInAccount),y=ve.RustModule.WasmScope((e=>e.WalletV4.Credential.from_keyhash(n.hash()).to_hex()));return{signTxRequest:new ye.Y({senderUtxos:c.senderUtxos,unsignedTx:c.txBuilder,changeAddr:c.changeAddr,metadata:void 0,networkSettingSnapshot:{ChainNetworkId:Number((0,_e.getCardanoHaskellBaseConfig)(a)[0].ChainNetworkId),KeyDeposit:new K.Z(e.protocolParameters.keyDeposit),PoolDeposit:new K.Z(e.protocolParameters.poolDeposit),NetworkId:a.NetworkId},neededStakingKeyHashes:{neededHashes:new(N())([y]),wits:new(N())}}),totalAmountToDelegate:w}}catch(e){if(Z.Yd.error("AdaApi::createDelegationTx error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}async createWithdrawalTx(e){Z.Yd.debug("AdaApi::createUnsignedTx called");try{var t,a,r;const s=(0,_e.getNetworkById)(e.wallet.networkId),n=V()(t=(0,_e.getCardanoHaskellBaseConfig)(s)).call(t,((e,t)=>H()(e,t)),{}),o={keyDeposit:e.protocolParameters.keyDeposit,linearFeeCoefficient:e.protocolParameters.linearFee.coefficient,linearFeeConstant:e.protocolParameters.linearFee.constant,coinsPerUtxoByte:e.protocolParameters.coinsPerUtxoByte,poolDeposit:e.protocolParameters.poolDeposit,networkId:e.wallet.networkId},i=e.wallet.utxos,l=(0,Ae.ue)(i),d=e.wallet.receiveAddress,u=[],c={neededHashes:new(N()),wits:new(N())},p=[];for(const t of e.withdrawals){const e=ve.RustModule.WalletV4.RewardAddress.from_address(ve.RustModule.WalletV4.Address.from_hex(t.rewardAddress));if(null==e)throw new Error("AdaApi::createUnsignedTx withdrawal not a reward address");const a=e.payment_cred(),r=a.to_keyhash();if(null==r)throw new Error("Unexpected: withdrawal from a script hash");p.push(r),t.shouldDeregister&&(u.push(ve.RustModule.WalletV4.Certificate.new_stake_deregistration(ve.RustModule.WalletV4.StakeDeregistration.new(a))),c.neededHashes.add(a.to_hex()))}const g=await e.getAccountState({network:s,addresses:j()(a=e.withdrawals).call(a,(e=>e.rewardAddress))}),h=V()(r=I()(g)).call(r,((e,t)=>{const a=g[t];if(null==a)return e;if(new K.Z(a.remainingAmount).eq(0))return e;const r=ve.RustModule.WalletV4.RewardAddress.from_address(ve.RustModule.WalletV4.Address.from_hex(t));if(null==r)throw new Error("AdaApi::createUnsignedTx withdrawal not a reward address");{const e=r.payment_cred();c.neededHashes.add(e.to_hex())}return e.push({address:r,amount:ve.RustModule.WalletV4.BigNum.from_str(a.remainingAmount)}),e}),[]);if(0===h.length&&0===u.length)throw new ge.oy;const f=await(0,ie.fi)([],{address:d.addr.Hash,addressing:d.addressing},l,e.absSlotNumber,o,u,h,!1,void 0,e.wallet.networkId);if(0===f.changeAddr.length)throw new ge.r7;Z.Yd.debug("AdaApi::createWithdrawalTx success: "+(0,Z.WO)(f));{const t=f.txBuilder.build();for(const a of e.withdrawals)if(null!=a.privateKey){const{privateKey:e}=a;c.wits.add(ve.RustModule.WalletV4.make_vkey_witness(ve.RustModule.WalletV4.hash_transaction(t),e).to_hex())}}return new ye.Y({senderUtxos:f.senderUtxos,unsignedTx:f.txBuilder,changeAddr:f.changeAddr,metadata:void 0,networkSettingSnapshot:{ChainNetworkId:O()(n.ChainNetworkId,10),KeyDeposit:new K.Z(e.protocolParameters.keyDeposit),PoolDeposit:new K.Z(e.protocolParameters.poolDeposit),NetworkId:e.wallet.networkId},neededStakingKeyHashes:c})}catch(e){if(Z.Yd.error("AdaApi::createWithdrawalTx error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}async createSimpleTx(e){Z.Yd.debug("AdaApi::createSimpleTx called");try{const t=(0,_e.getCardanoHaskellBaseConfig)((0,_e.getNetworkById)(e.publicDeriver.networkId)),a=V()(t).call(t,((e,t)=>H()(e,t)),{}),r={keyDeposit:e.protocolParameters.keyDeposit,linearFeeCoefficient:e.protocolParameters.linearFee.coefficient,linearFeeConstant:e.protocolParameters.linearFee.constant,coinsPerUtxoByte:e.protocolParameters.coinsPerUtxoByte,poolDeposit:e.protocolParameters.poolDeposit,networkId:e.publicDeriver.networkId},s=(0,Ae.ue)(e.publicDeriver.utxos),n=e.publicDeriver.receiveAddress,o=new K.Z(Me.Z.timeToAbsoluteSlot(t,new Date)),i=await(0,ie.fi)(v()(e),{address:n.addr.Hash,addressing:n.addressing},s,o,r,[],[],!1,e.metadata,e.publicDeriver.networkId);return new ye.Y({senderUtxos:i.senderUtxos,unsignedTx:i.txBuilder,changeAddr:i.changeAddr,metadata:e.metadata,networkSettingSnapshot:{ChainNetworkId:O()(a.ChainNetworkId,10),KeyDeposit:new K.Z(e.protocolParameters.keyDeposit),PoolDeposit:new K.Z(e.protocolParameters.poolDeposit),NetworkId:e.publicDeriver.networkId},neededStakingKeyHashes:{neededHashes:new(N()),wits:new(N())}})}catch(e){if(Z.Yd.error("AdaApi::createSimpleTx error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}async createVotingRegTx(e){Z.Yd.debug("AdaApi::createVotingRegTx called");try{var t;const a=V()(t=(0,_e.getCardanoHaskellBaseConfig)((0,_e.getNetworkById)(e.wallet.networkId))).call(t,((e,t)=>H()(e,t)),{}),r={keyDeposit:e.protocolParameters.keyDeposit,linearFeeCoefficient:e.protocolParameters.linearFee.coefficient,linearFeeConstant:e.protocolParameters.linearFee.constant,coinsPerUtxoByte:e.protocolParameters.coinsPerUtxoByte,poolDeposit:e.protocolParameters.poolDeposit,networkId:e.wallet.networkId},s=await e.wallet.utxos,n=(0,Ae.ue)(s),o=e.wallet.receiveAddress;if(null==o)throw new Error("createVotingRegTx no internal addresses left. Should never happen");let i;if(e.trezorTWallet||e.ledgerNanoWallet){const t=e.trezorTWallet||e.ledgerNanoWallet;i=(0,ke.L4)(t.votingPublicKey,t.stakingKey,t.paymentAddress,t.nonce,(e=>b()("0").call("0",128)))}else i=e.normalWallet.metadata;const l=await(0,ie.fi)([],{address:o.addr.Hash,addressing:o.addressing},n,e.absSlotNumber,r,[],[],!1,i,e.wallet.networkId);return new ye.Y({senderUtxos:l.senderUtxos,unsignedTx:l.txBuilder,changeAddr:l.changeAddr,metadata:i,networkSettingSnapshot:{ChainNetworkId:O()(a.ChainNetworkId,10),KeyDeposit:new K.Z(e.protocolParameters.keyDeposit),PoolDeposit:new K.Z(e.protocolParameters.poolDeposit),NetworkId:e.wallet.networkId},neededStakingKeyHashes:{neededHashes:new(N()),wits:new(N())},trezorTCatalystRegistrationTxSignData:e.trezorTWallet?e.trezorTWallet:void 0,ledgerNanoCatalystRegistrationTxSignData:e.ledgerNanoWallet?e.ledgerNanoWallet:void 0})}catch(e){if(Z.Yd.error("AdaApi::createVotingRegTx error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}async saveLastReceiveAddressIndex(e){Z.Yd.debug("AdaApi::saveLastReceiveAddressIndex called");try{const t=(0,ne.Bq)(e.publicDeriver);if(null==t)return;await t.setCutoff({newIndex:e.index})}catch(e){if(Z.Yd.error("AdaApi::saveLastReceiveAddressIndex error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}static isValidMnemonic(e){return(0,ue.n)(e.mnemonic,e.numberOfWords)}generateWalletRecoveryPhrase(){Z.Yd.debug("AdaApi::generateWalletRecoveryPhrase called");try{const e=new(m())((e=>e((0,le.sn)())));return Z.Yd.debug("AdaApi::generateWalletRecoveryPhrase success"),e}catch(e){if(Z.Yd.error("AdaApi::generateWalletRecoveryPhrase error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}async restoreWallet(e){Z.Yd.debug("AdaApi::restoreWallet called");const{recoveryPhrase:t,walletName:a,walletPassword:r}=e;if(e.accountIndex<q.yK)throw new Error("restoreWallet needs hardened index");try{const s=(0,le.BT)(t),n=[],o=await(0,$.fd)({db:e.db,rootPk:s,password:r,accountIndex:e.accountIndex,walletName:a,accountName:"",network:e.network}),i=await ee.H.createCip1852Wallet(e.db,o.cip1852WrapperRow);for(const e of o.publicDeriver)n.push(await se.n.createPublicDeriver(e.publicDeriverResult,i));return Z.Yd.debug("AdaApi::restoreWallet success"),{publicDerivers:n}}catch(e){var s;if(Z.Yd.error("AdaApi::restoreWallet error: "+(0,Z.n)(e)),null!=e.message&&w()(s=e.message).call(s,"Wallet with that mnemonics already exists"))throw new ge.JI;if(e instanceof he.default)throw e;throw new ge.rp}}async restoreWalletForTransfer(e){var t;Z.Yd.debug("AdaApi::restoreWalletForTransfer called");const{checkAddressesInUse:a}=e,r=V()(t=(0,_e.getCardanoHaskellBaseConfig)(e.network)).call(t,((e,t)=>H()(e,t)),{});try{const t=new(h()),s=new(N()),n=e=>{if(!s.has(e.address.data)){let a=t.get(e.keyDerivationId);null==a&&(a=[],t.set(e.keyDerivationId,a)),a.push(e.address.data),s.add(e.address.data)}return m().resolve()},o=ve.RustModule.WalletV2.Bip44AccountPublic.new((0,de.v4PublicToV2)(e.accountPubKey),ve.RustModule.WalletV2.DerivationScheme.v2()),i=await(0,fe.Mo)({network:e.network,generateInternalAddresses:(0,we.H)(o.bip44_chain(!1),r.ByronNetworkId),generateExternalAddresses:(0,we.H)(o.bip44_chain(!0),r.ByronNetworkId),lastUsedInternal:-1,lastUsedExternal:-1,checkAddressesInUse:a,addByHash:n,type:ae.dq.CARDANO_LEGACY}),l=(0,te.I_)(i),d=[];for(let a=0;a<l.length;a++){const r=l[a];await r.insert({db:null,tx:null,lockedTables:[],keyDerivationId:a});const s=t.get(a);if(null==s)throw new Error("restoreWalletForTransfer should never happen");const n=j()(s).call(s,(t=>{var a;return{address:t,addressing:{startLevel:Se.Bip44DerivationLevels.ACCOUNT.level,path:p()(a=[e.accountIndex]).call(a,r.path)}}}));d.push(...n)}return Z.Yd.debug("restoreWalletForTransfer success"),{addresses:d}}catch(e){var s;if(Z.Yd.error("restoreWalletForTransfer error: "+(0,Z.n)(e)),null!=e.message&&w()(s=e.message).call(s,"Wallet with that mnemonics already exists"))throw new ge.JI;if(e instanceof he.default)throw e;throw new ge.rp}}async transferToCip1852(e){try{var t,a;const r=await this.restoreWalletForTransfer({accountPubKey:e.bip44AccountPubKey,accountIndex:e.accountIndex,checkAddressesInUse:e.checkAddressesInUse,network:e.network}),s=e.cip1852AccountPubKey.derive(q.OC.INTERNAL).derive(0).to_raw_key().hash(),n=e.cip1852AccountPubKey.derive(q.OC.CHIMERIC_ACCOUNT).derive(0).to_raw_key().hash(),o=V()(t=(0,_e.getCardanoHaskellBaseConfig)(e.network)).call(t,((e,t)=>H()(e,t)),{}),i=O()(o.ChainNetworkId,10),l=ve.RustModule.WalletV4.BaseAddress.new(i,ve.RustModule.WalletV4.Credential.from_keyhash(s),ve.RustModule.WalletV4.Credential.from_keyhash(n)),d=j()(a=[...r.addresses]).call(a,(e=>({address:e.address,addressing:{path:[q.r7.BIP44,q.M8.CARDANO,...e.addressing.path],startLevel:Se.Bip44DerivationLevels.PURPOSE.level}}))),u=await(0,Te.i)({network:e.network,addresses:d,getUTXOsForAddresses:e.getUTXOsForAddresses});return{publicKey:{key:e.bip44AccountPubKey,addressing:{startLevel:1,path:[q.r7.CIP1852,q.M8.CARDANO,e.accountIndex]}},signRequest:await this.createUnsignedTxForUtxos({absSlotNumber:e.absSlotNumber,receivers:[{address:l.to_address().to_hex(),addressing:{path:[q.r7.CIP1852,q.M8.CARDANO,e.accountIndex,q.OC.INTERNAL,0],startLevel:1}}],network:e.network,defaultToken:{defaultIdentifier:e.defaultToken.Identifier,defaultNetworkId:e.defaultToken.NetworkId},tokens:[{shouldSendAll:!0,token:e.defaultToken}],utxos:u,metadata:void 0,protocolParameters:e.protocolParameters})}}catch(e){if(Z.Yd.error("transferToCip1852 error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}async createHardwareWallet(e){try{if(Z.Yd.debug("AdaApi::createHardwareWallet called"),e.addressing.startLevel!==Se.Bip44DerivationLevels.PURPOSE.level)throw new Error("AdaApi::createHardwareWallet bad addressing start level");if(e.addressing.path[0]!==q.r7.CIP1852)throw new Error("createHardwareWallet unknown restoration mode");const t=await(0,$.B8)({db:e.db,accountPublicKey:ve.RustModule.WalletV4.Bip32PublicKey.from_hex(e.publicKey),accountIndex:e.addressing.path[Se.Bip44DerivationLevels.ACCOUNT.level-e.addressing.startLevel],walletName:e.walletName,accountName:"",hwWalletMetaInsert:e.hwFeatures,network:e.network}),a=await ee.H.createCip1852Wallet(e.db,t.cip1852WrapperRow);if(1!==t.publicDeriver.length)throw new Error("AdaApi::createHardwareWallet should only do 1 HW derivation at a time");const r=t.publicDeriver[0].publicDeriverResult,s=await se.n.createPublicDeriver(r,a);return Z.Yd.debug("AdaApi::restoreWallet success"),{publicDeriver:s}}catch(e){if(Z.Yd.error("AdaApi::createHardwareWallet error: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}async getTransactionRowsToExport(e){try{const t=await(0,J._v)({publicDeriver:e.publicDeriver});return Z.Yd.debug("AdaApi::getTransactionRowsToExport: success"),(0,Ae.Nf)(t.txs,e.getDefaultToken(e.publicDeriver.getParent().getNetworkInfo().NetworkId))}catch(e){if(Z.Yd.error("AdaApi::getTransactionRowsToExport: "+(0,Z.n)(e)),e instanceof he.default)throw e;throw new ge.rp}}utxosWithSubmittedTxs(e,t,a){const r=B()(a).call(a,(e=>e.publicDeriverId===t)),s=new(N())(u()(r).call(r,(({usedUtxos:e})=>{var t;return j()(t=e||[]).call(t,(({txHash:e,index:t})=>`${e}${t}`))}))),n=B()(e).call(e,(e=>!s.has(e.utxo_id)));for(const{transaction:e}of r)for(const[t,{address:a,value:r}]of v()(i=e.addresses.to).call(i)){var i,d,c,p,g;if(l()(n).call(n,(a=>a.utxo_id===`${e.txid}${t}`)))continue;const s=(null===(d=l()(c=o()(r)).call(c,(({identifier:e})=>e===r.defaults.defaultIdentifier)))||void 0===d?void 0:d.amount.toString())||"0",u=j()(p=B()(g=o()(r)).call(g,(({identifier:e})=>e!==r.defaults.defaultIdentifier))).call(p,(e=>{const[t,a=""]=e.identifier.split(".");return{policyId:t,name:a,amount:e.amount.toString(),assetId:e.identifier}}));n.push({utxo_id:`${e.txid}${t}`,tx_hash:e.txid,tx_index:t,receiver:a,amount:s,assets:u})}return n}async addressedUtxosWithSubmittedTxs(e,t,a){const r=(0,ne.se)(t);if(!r)throw new Error("unable to get UTxO addresses from public deriver");const s=await r.getAllUtxoAddresses();return this._addressedUtxosWithSubmittedTxs(e,t.publicDeriverId,s,a)}async _addressedUtxosWithSubmittedTxs(e,t,a,r){const s=B()(r).call(r,(e=>e.publicDeriverId===t)),n=new(N())(u()(s).call(s,(({usedUtxos:e})=>{var t;return j()(t=e||[]).call(t,(({txHash:e,index:t})=>`${e}${t}`))}))),i=B()(e).call(e,(e=>!n.has(e.utxo_id)));for(const{transaction:e}of s)for(const[t,{address:r,value:s}]of v()(d=e.addresses.to).call(d)){var d,c,p,g,h;if(l()(i).call(i,(a=>a.utxo_id===`${e.txid}${t}`)))continue;const n=(null===(c=l()(p=o()(s)).call(p,(({identifier:e})=>e===s.defaults.defaultIdentifier)))||void 0===c?void 0:c.amount.toString())||"0",u=j()(g=B()(h=o()(s)).call(h,(({identifier:e})=>e!==s.defaults.defaultIdentifier))).call(g,(e=>{const[t,a=""]=e.identifier.split(".");return{policyId:t,name:a,amount:e.amount.toString(),assetId:e.identifier}})),f=()=>{for(const{addrs:e,addressing:t}of a)for(const{Hash:a}of e)if(a===r)return t},w=f();w&&i.push({utxo_id:`${e.txid}${t}`,tx_hash:e.txid,tx_index:t,receiver:r,amount:n,assets:u,addressing:w})}return i}async getAllUsedAddresses(e,t){const a=await(0,be.Hk)(e);return this._getAllUsedAddresses({allAddresses:a,submittedTransactions:t,publicDeriverId:e.getPublicDeriverId()})}async _getAllUsedAddresses(e){var t,a,r,s,n,o;const i=j()(t=B()(a=e.allAddresses.utxoAddresses).call(a,(e=>e.address.IsUsed))).call(t,(e=>e.address.Hash)),l=j()(r=B()(s=e.allAddresses.utxoAddresses).call(s,(e=>!e.address.IsUsed))).call(r,(e=>e.address.Hash)),d=new(N())(u()(n=B()(o=e.submittedTransactions).call(o,(t=>t.publicDeriverId===e.publicDeriverId))).call(n,(({transaction:e})=>{var t;return j()(t=e.addresses.to).call(t,(({address:e})=>e))})));return[...i,...B()(l).call(l,(e=>d.has(e)))]}async createReorgTx(e,t,a,r,s,n,o){const i=e.getParent().getNetworkInfo(),l=(0,ne.se)(e);if(null==l)throw new Error("missing utxo functionality");if(null==(0,ne.sX)(l))throw new Error("missing chains functionality");const d=await(0,Ie.WH)(e);if(null==d)throw new Error("no receive addresses. Should never happen");const u=await this.getAllUsedAddresses(e,s),c=o||u[0];if(!c)throw new Error("unexpected: no target address or used addresses available");return this._createReorgTx(i,e.getParent().getDefaultToken(),e.getPublicDeriverId(),await l.getAllUtxoAddresses(),d,t,a,r,s,c,n)}async _createReorgTx(e,t,a,r,s,n,o,i,l,d,u){var c;const p=(0,_e.getCardanoHaskellBaseConfig)(e),g=new K.Z(Me.Z.timeToAbsoluteSlot(p,new Date)),h=new(N())(n),f=[{address:d,isForeign:!1,value:K.Z.max(o,"1000000").toString()}];return{unsignedTx:await this._createUnsignedTxForConnector({includeTargets:f},t,a,r,s,e,g,l,B()(c=await this._addressedUtxosWithSubmittedTxs(i,a,r,l)).call(c,(e=>!h.has(e.utxo_id))),u,null),collateralOutputAddressSet:new(N())([d])}}createForeignUtxoFetcher(e,t){return async a=>{const r=j()(a).call(a,(e=>{var t;if((null!==(t=e.length)&&void 0!==t?t:0)<65)throw new Error(`Invalid utxo ID "${e}", expected \`{hash}{index}\` with no separator`);try{return{txHash:e.substring(0,64),txIndex:s()(e.substring(64),10)}}catch(t){throw new Error(`Failed to parse utxo ID "${e}": ${String(t)}`)}})),n=await e.getUtxoData({network:t,utxos:r});return j()(n).call(n,((e,t)=>{if(null==e)return null;const{txHash:s,txIndex:n}=r[t];return{utxo_id:a[t],tx_hash:s,tx_index:n,receiver:e.output.address,amount:e.output.amount,assets:e.output.assets}}))}}}async function We(e){try{const t=await e.publicDeriver.getSigningKey(),a=await e.publicDeriver.getStakingKey(),r=await e.publicDeriver.normalizeKey({...t,password:e.password}),s=ve.RustModule.WalletV4.Bip32PrivateKey.from_hex(r.prvKeyHex);return(0,De.r)({addressing:a.addressing,startingFrom:{key:s,level:e.publicDeriver.getParent().getPublicDeriverLevel()}}).to_raw_key()}catch(e){if(Z.Yd.error("genOwnStakingKey error: "+(0,Z.n)(e)),e instanceof me.UZ)throw new ge.dJ;if(e instanceof he.default)throw e;throw new ge.rp}}function Be(e,t,a){const r=ve.RustModule.WalletV4.Bip32PublicKey.from_hex(e.publicKey),s={addressing:{path:[q.r7.CIP1852,Se.CoinType.CARDANO,q.yK,t,a],startLevel:Se.Bip44DerivationLevels.PURPOSE.level}};return[(0,De.c)({...s,startingFrom:{level:e.publicDeriverLevel,key:r}}).to_raw_key(),s]}async function Pe(e){const t=(0,ne.O8)(e);if(null==t)throw new Error("Unable to get public key from the wallet");const a=(0,ne.JM)(e);if(null==a)throw new Error("Unable to get derivation levels from the wallet");return Be({publicKey:(await t.getPublicKey()).Hash,publicDeriverLevel:a.getParent().getPublicDeriverLevel()},q.OC.GOVERNANCE_DREP_KEYS,q.x_)}async function Ne(e,t,a,r){const s=(0,ne.y9)(e);if(!s)throw new Error("unable to get signing key");const n=await s.normalizeKey({...await s.getSigningKey(),password:t}),o=(0,ne.JM)(e);if(!o)throw new Error("unable to get levels");const i=await async function(e,t){const a=e=>{for(const{addrs:a,addressing:r}of e)for(const{Hash:e}of a)if(e===t)return{addressing:r}},r=(0,ne.Oq)(e);if(!r)throw new Error("unable to get accounting addresses from public deriver");const s=a(await r.getAllAccountingAddresses());if(s)return s;const[n,o]=await Pe(e);if(n.hash().to_hex()===t)return o;const i=(0,ne.se)(e);if(!i)throw new Error("unable to get UTxO addresses from public deriver");return a(await i.getAllUtxoAddresses())}(e,a);if(!i)throw new Error("key derivation path does not exist");const l=(0,De.r)({addressing:i.addressing,startingFrom:{key:ve.RustModule.WalletV4.Bip32PrivateKey.from_hex(n.prvKeyHex),level:o.getParent().getPublicDeriverLevel()}}).to_raw_key(),d=await(0,de.cip8Sign)((0,Ce.hexToBytes)(a),l,(0,Ce.hexToBytes)(r)),u=(0,de.makeCip8Key)(l.to_public().as_bytes());return{signature:(0,Ce.bytesToHex)(d.to_bytes()),key:(0,Ce.bytesToHex)(u.to_bytes())}}async function Fe(e,t,a,r){const s=await(0,de.buildCoseSign1FromSignature)((0,Ce.hexToBytes)(e),(0,Ce.hexToBytes)(t),(0,Ce.hexToBytes)(a)),n=(0,de.makeCip8Key)((0,Ce.hexToBytes)(r));return{signature:(0,Ce.bytesToHex)(s.to_bytes()),key:(0,Ce.bytesToHex)(n.to_bytes())}}function Oe(e,t){if(t===e.stakingAddress)return e.stakingAddressing.addressing.path;for(const{address:a,path:r}of e.allAddresses.utxoAddresses)if(a.Hash===t)return r;return null}},15687:(e,t,a)=>{a.d(t,{UJ:()=>p,L4:()=>h});var r=a(59340),s=a.n(r),n=a(29828),o=a.n(n),i=a(56474),l=a.n(i),d=a(86335),u=a(17462),c=a.n(u);a(90649);const p=l()({DATA:61284,SIG:61285});function g(e){return o()(e).call(e,"0x")?e:"0x"+e}function h(e,t,a,r,n){const o=d.RustModule.WalletV4.encode_json_str_to_metadatum(s()({1:[[g(e),1]],2:g(t),3:g(a),4:r,5:0}),d.RustModule.WalletV4.MetadataJsonSchema.BasicConversions),i=d.RustModule.WalletV4.GeneralTransactionMetadata.new();i.insert(d.RustModule.WalletV4.BigNum.from_str(p.DATA.toString()),o);const l=c()(32).update(i.to_bytes()).digest("binary");i.insert(d.RustModule.WalletV4.BigNum.from_str(p.SIG.toString()),d.RustModule.WalletV4.encode_json_str_to_metadatum(s()({1:g(n(l))}),d.RustModule.WalletV4.MetadataJsonSchema.BasicConversions));const u=d.RustModule.WalletV4.MetadataList.new();return u.add(d.RustModule.WalletV4.TransactionMetadatum.from_bytes(i.to_bytes())),u.add(d.RustModule.WalletV4.TransactionMetadatum.new_list(d.RustModule.WalletV4.MetadataList.new())),d.RustModule.WalletV4.AuxiliaryData.from_bytes(u.to_bytes())}},76900:(e,t,a)=>{a.d(t,{sn:()=>i,BT:()=>l}),a(77766),a(3649);var r=a(2153),s=(a(55835),a(86335)),n=a(90649),o=a(48764).Buffer;const i=()=>(0,r.OF)(160).split(" ");function l(e){const t=(0,r.oy)(e),a=o.from("");return s.RustModule.WalletV4.Bip32PrivateKey.from_bip39_entropy((0,n.hexToBytes)(t),a)}},86335:(e,t,a)=>{a.d(t,{RustModule:()=>A});var r=a(93476),s=a.n(r),n=a(87672),o=a.n(n),i=a(10062),l=a.n(i),d=a(78914),u=a.n(d),c=a(54103),p=a.n(c),g=a(62734),h=a.n(g),f=a(77149),w=a.n(f),y=a(56474);function m(e){return null!=e&&"number"==typeof e.__wbg_ptr&&"function"==typeof e.free}const x=a.n(y)()([Uint8Array]),b="____is_wasm_proxy";const A=new class{constructor(){o()(this,"_wasmv2",void 0),o()(this,"_wasmv4",void 0),o()(this,"_messageSigning",void 0),o()(this,"_crossCsl",void 0)}async load(){null==this._wasmv2&&null==this._wasmv4&&null==this._messageSigning&&null==this._crossCsl&&(this._wasmv2=await a.e(4388).then(a.bind(a,82123)),this._wasmv4=await Promise.all([a.e(4351),a.e(8066)]).then(a.bind(a,4351)),this._messageSigning=await a.e(5573).then(a.bind(a,85573)),this._crossCsl=await Promise.all([a.e(4351),a.e(5560),a.e(5262)]).then(a.bind(a,75560)))}__WasmScopeInternal(e){const t=function(){const e=[];return{RustModule:function t(a){return null!=(r=a)&&function(e){return"object"==typeof e||"function"==typeof e}(r)&&!function(e){return w()(x).call(x,(t=>e instanceof t))}(r)&&function(e){return!0!==e[b]}(r)?new Proxy(a,{get(a,r,s){if(r===b)return!0;const n=h()(a,r,s);return"prototype"===r?n:"function"==typeof n&&null==n.prototype?function(...r){const s=p()(n).call(n,a)(...r);return m(s)&&e.push(s),t(s)}:t(n)}}):a;var r}(A),free:()=>{u()(e).call(e,(e=>{0!==e.__wbg_ptr&&e.free()}))},size:()=>e.length,isFree:()=>l()(e).call(e,(e=>0===e.__wbg_ptr))}}();function a(e){if(t.free(),m(e))throw new Error("A wasm object cannot be returned from wasm scope, all pointers are destroyed.");return{result:e,scopeSize:t.size(),scopeIsFree:t.isFree()}}function r(e){throw t.free(),e}let n;try{n=e(t.RustModule)}catch(e){throw r(e),e}return n instanceof s()?n.then(a,r):a(n)}WasmScope(e){const t=this.__WasmScopeInternal(e);return t instanceof s()?t.then((e=>e.result)):t.result}ScopeMonad(e){var t;const a=p()(t=this.WasmScope).call(t,this);return function e(t){return{wasmMap:a=>e((e=>a(t(e),e))),unwrap:e=>a((a=>e(t(a),a)))}}(e)}get WalletV2(){return this._wasmv2}get WalletV4(){return this._wasmv4}get CrossCsl(){return this._crossCsl}WalletV4TxBuilderFromConfig(e){return this.WalletV4TxBuilder({linearFee:A.WalletV4.LinearFee.new(A.WalletV4.BigNum.from_str(e.LinearFee.coefficient),A.WalletV4.BigNum.from_str(e.LinearFee.constant)),coinsPerUtxoByte:A.WalletV4.BigNum.from_str(e.CoinsPerUtxoByte),poolDeposit:A.WalletV4.BigNum.from_str(e.PoolDeposit),keyDeposit:A.WalletV4.BigNum.from_str(e.KeyDeposit)})}WalletV4TxBuilder(e){const{linearFee:t,coinsPerUtxoByte:a,poolDeposit:r,keyDeposit:s,maxValueBytes:n,maxTxBytes:o}=e,i=this.WalletV4;return i.TransactionBuilder.new(i.TransactionBuilderConfigBuilder.new().fee_algo(t).pool_deposit(r).key_deposit(s).coins_per_utxo_byte(a).max_value_size(null!=n?n:5e3).max_tx_size(null!=o?o:16384).ex_unit_prices(i.ExUnitPrices.new(i.UnitInterval.new(i.BigNum.from_str("577"),i.BigNum.from_str("10000")),i.UnitInterval.new(i.BigNum.from_str("721"),i.BigNum.from_str("10000000")))).prefer_pure_change(!0).build())}get MessageSigning(){return this._messageSigning}}},75723:(e,t,a)=>{a.d(t,{v4PublicToV2:()=>n,addressBech32ToHex:()=>o,transactionHexToWitnessSet:()=>i,transactionBodyHexToTransaction:()=>l,transactionHexToBodyHex:()=>d,transactionHexToHash:()=>u,transactionHexReplaceWitnessSet:()=>c,pubKeyHashToRewardAddress:()=>p,cip8Sign:()=>g,buildCoseSign1FromSignature:()=>h,makeCip8Key:()=>f}),a(29828);var r=a(86335),s=a(90649);function n(e){return r.RustModule.WalletV2.PublicKey.from_hex((0,s.bytesToHex)(e.as_bytes()))}function o(e){return r.RustModule.WasmScope((t=>t.WalletV4.Address.from_bech32(e).to_hex()))}function i(e){return r.RustModule.WasmScope((t=>(0,s.bytesToHex)(t.WalletV4.FixedTransaction.from_hex(e).raw_witness_set())))}function l(e){return r.RustModule.WasmScope((t=>t.WalletV4.FixedTransaction.new((0,s.hexToBytes)(e),t.WalletV4.TransactionWitnessSet.new().to_bytes(),!0).to_hex()))}function d(e){return r.RustModule.WasmScope((t=>(0,s.bytesToHex)(t.WalletV4.FixedTransaction.from_hex(e).raw_body())))}function u(e){return r.RustModule.WasmScope((t=>t.WalletV4.FixedTransaction.from_hex(e).transaction_hash().to_hex()))}function c(e,t){return r.RustModule.WasmScope((a=>{const r=a.WalletV4.FixedTransaction.from_hex(e);return r.set_witness_set((0,s.hexToBytes)(t)),r.to_hex()}))}function p(e,t){return r.RustModule.WasmScope((a=>a.WalletV4.RewardAddress.new(t,a.WalletV4.Credential.from_keyhash(a.WalletV4.Ed25519KeyHash.from_hex(e))).to_address().to_hex()))}a(95667);const g=async(e,t,a)=>{const s=r.RustModule.MessageSigning.HeaderMap.new();s.set_algorithm_id(r.RustModule.MessageSigning.Label.from_algorithm_id(r.RustModule.MessageSigning.AlgorithmId.EdDSA)),s.set_header(r.RustModule.MessageSigning.Label.new_text("address"),r.RustModule.MessageSigning.CBORValue.new_bytes(e));const n=r.RustModule.MessageSigning.ProtectedHeaderMap.new(s),o=r.RustModule.MessageSigning.HeaderMap.new(),i=r.RustModule.MessageSigning.Headers.new(n,o),l=r.RustModule.MessageSigning.COSESign1Builder.new(i,a,!1),d=l.make_data_to_sign().to_bytes(),u=t.sign(d).to_bytes();return l.build(u)},h=async(e,t,a)=>{const s=r.RustModule.MessageSigning.HeaderMap.new();s.set_algorithm_id(r.RustModule.MessageSigning.Label.from_algorithm_id(r.RustModule.MessageSigning.AlgorithmId.EdDSA)),s.set_header(r.RustModule.MessageSigning.Label.new_text("address"),r.RustModule.MessageSigning.CBORValue.new_bytes(e));const n=r.RustModule.MessageSigning.ProtectedHeaderMap.new(s),o=r.RustModule.MessageSigning.HeaderMap.new(),i=r.RustModule.MessageSigning.Headers.new(n,o);return r.RustModule.MessageSigning.COSESign1Builder.new(i,a,!1).build(t)},f=e=>{const t=r.RustModule.MessageSigning.COSEKey.new(r.RustModule.MessageSigning.Label.from_key_type(r.RustModule.MessageSigning.KeyType.OKP));return t.set_algorithm_id(r.RustModule.MessageSigning.Label.from_algorithm_id(r.RustModule.MessageSigning.AlgorithmId.EdDSA)),t.set_header(r.RustModule.MessageSigning.Label.new_int(r.RustModule.MessageSigning.Int.new_negative(r.RustModule.MessageSigning.BigNum.from_str("1"))),r.RustModule.MessageSigning.CBORValue.new_int(r.RustModule.MessageSigning.Int.new_i32(6))),t.set_header(r.RustModule.MessageSigning.Label.new_int(r.RustModule.MessageSigning.Int.new_negative(r.RustModule.MessageSigning.BigNum.from_str("2"))),r.RustModule.MessageSigning.CBORValue.new_bytes(e)),t}},15476:(e,t,a)=>{a.d(t,{n:()=>s});var r=a(2153);const s=(e,t)=>e.split(" ").length===t&&(0,r._I)(e)},24283:(e,t,a)=>{a.d(t,{addrContainsAccountKey:()=>o,filterAddressesByStakingKey:()=>i,createCertificate:()=>u}),a(2991),a(32366),a(905);var r=a(86335),s=a(95667),n=(a(55343),a(90649));function o(e,t,a){const n=(0,s.normalizeToAddress)(e);if(null==n)throw new Error(`addrContainsAccountKey invalid address ${e}`);const o="string"==typeof t?t:t.to_hex(),i=r.RustModule.WalletV4.BaseAddress.from_address(n);if(null!=i){const e=i.stake_cred().to_hex()===o;if(i.free(),e)return!0}const l=r.RustModule.WalletV4.PointerAddress.from_address(n);return null!=l&&l.free(),n.free(),a}function i(e,t,a){const r=[];for(const s of t)o(s.address,e,a)&&r.push(s);return r}const l="ALWAYS_ABSTAIN",d="ALWAYS_NO_CONFIDENCE";function u(e,t,a,s){const o=r.RustModule.WalletV4.Credential.from_keyhash(r.RustModule.WalletV4.Ed25519KeyHash.from_hex(e));if(null==a&&null==s)return t?[r.RustModule.WalletV4.Certificate.new_stake_deregistration(r.RustModule.WalletV4.StakeDeregistration.new(o))]:[];const i=[];if(t||i.push(r.RustModule.WalletV4.Certificate.new_stake_registration(r.RustModule.WalletV4.StakeRegistration.new(o))),null!=a){const e=r.RustModule.WalletV4.Ed25519KeyHash.from_hex(a);i.push(r.RustModule.WalletV4.Certificate.new_stake_delegation(r.RustModule.WalletV4.StakeDelegation.new(o,e)))}return null!=s&&i.push(r.RustModule.WalletV4.Certificate.new_vote_delegation(r.RustModule.WalletV4.VoteDelegation.new(o,function(e){try{var t,a;const s=r.RustModule.WalletV4.DRep;if(e===l)return s.new_always_abstain();if(e===d)return s.new_always_no_confidence();const o=r.RustModule.WalletV4.Credential.from_hex(e);return null!==(t=null!==(a=(0,n.maybe)(o.to_keyhash(),(e=>s.new_key_hash(e))))&&void 0!==a?a:(0,n.maybe)(o.to_scripthash(),(e=>s.new_script_hash(e))))&&void 0!==t?t:(0,n.fail)("weird credential cannot be converted into a drep: "+o.to_hex())}catch(t){throw console.log("Fail to parse a drep credential: "+e,t),t}}(s)))),i}},54901:(e,t,a)=>{a.d(t,{bp:()=>d,BB:()=>u});var r=a(59340),s=a.n(r),n=a(78914),o=a.n(n),i=a(86335),l=a(69875);function d(e){const t=i.RustModule.WalletV4.GeneralTransactionMetadata.new();o()(e).call(e,(e=>{const a=i.RustModule.WalletV4.encode_json_str_to_metadatum(s()(e.data),i.RustModule.WalletV4.MetadataJsonSchema.BasicConversions);t.insert(i.RustModule.WalletV4.BigNum.from_str(e.label),a)}));const a=i.RustModule.WalletV4.AuxiliaryData.new();return a.set_metadata(t),a}function u(e){return(0,l.isHex)(e)?i.RustModule.WasmScope((t=>{const a=t.WalletV4.TransactionMetadatum.from_hex(e);return t.WalletV4.decode_metadatum_to_json_str(a,t.WalletV4.MetadataJsonSchema.BasicConversions)})):s()(e)}},37495:(e,t,a)=>{a.d(t,{XN:()=>A,Hk:()=>v,g_:()=>_});var r=a(86902),s=a.n(r),n=a(2991),o=a.n(n),i=a(80426),l=a.n(i),d=a(56474),u=a.n(d),c=a(39392),p=a.n(c),g=a(20116),h=a.n(g),f=a(3577),w=(a(38441),a(27189),a(57421)),y=a(39845),m=(a(38079),a(91811)),x=a(82982),b=a(1499);async function A(e){var t,a;const r=(0,f.JM)(e.publicDeriver),n=null==r?new(p()):r.getParent().getDerivationTables(),i=u()({GetUtxoTxOutputsWithTx:x.NW,GetAddress:y.t9,GetPathWithSpecific:y.LY,GetDerivationSpecific:m.n}),d=l()(t=o()(a=s()(i)).call(a,(e=>i[e]))).call(t,(t=>(0,w.Hz)(e.publicDeriver.getDb(),t)));return await(0,w.zm)(e.publicDeriver.getDb(),[...d,...(0,w.pS)(e.publicDeriver.getDb(),n)],(async t=>await async function(e,t,a,r){const s=(0,f.se)(a.publicDeriver);let n=null!=s?await s.rawGetAllUtxoAddresses(e,{GetAddress:t.GetAddress,GetPathWithSpecific:t.GetPathWithSpecific,GetDerivationSpecific:t.GetDerivationSpecific},void 0,r):[];const o=(0,f.Oq)(a.publicDeriver),i=null!=o?await o.rawGetAllAccountingAddresses(e,{GetPathWithSpecific:t.GetPathWithSpecific,GetAddress:t.GetAddress,GetDerivationSpecific:t.GetDerivationSpecific},void 0,r):[],l=(0,f.Bq)(a.publicDeriver);if(null!=l&&!a.ignoreCutoff){const a=await l.rawGetCutoff(e,{GetPathWithSpecific:t.GetPathWithSpecific,GetDerivationSpecific:t.GetDerivationSpecific},void 0,r);n=h()(n).call(n,(e=>e.addressing.path[e.addressing.path.length-1]<=a))}const d=[...n,...i];return await(0,b.oI)(a.publicDeriver.getDb(),e,{GetUtxoTxOutputsWithTx:t.GetUtxoTxOutputsWithTx},{addresses:d,type:a.type,networkId:a.publicDeriver.getParent().getNetworkInfo().NetworkId,defaultToken:a.publicDeriver.getParent().getDefaultToken()})}(t,i,{publicDeriver:e.publicDeriver,type:e.type,ignoreCutoff:!0===e.ignoreCutoff},n)))}async function v(e){var t,a;const r=(0,f.JM)(e);if(!r)throw new Error("getAllAddressesForWallet publicDerviver traits missing");const n=r.getParent().getDerivationTables(),i=u()({GetPathWithSpecific:y.LY,GetAddress:y.t9,GetDerivationSpecific:m.n}),d=l()(t=o()(a=s()(i)).call(a,(e=>i[e]))).call(t,(t=>(0,w.Hz)(e.getDb(),t)));return await(0,w.zm)(e.getDb(),[...d,...(0,w.pS)(e.getDb(),n)],(t=>_(t,i,{publicDeriver:e},n)))}async function _(e,t,a,r){const s=[],n=[],o=(0,f.se)(a.publicDeriver);if(null!=o){const a=await o.rawGetAllUtxoAddresses(e,{GetPathWithSpecific:t.GetPathWithSpecific,GetAddress:t.GetAddress,GetDerivationSpecific:t.GetDerivationSpecific},void 0,r);for(const e of a)for(const t of e.addrs)s.push({address:t,path:e.addressing.path})}const i=(0,f.Oq)(a.publicDeriver);if(null!=i){const a=await i.rawGetAllAccountingAddresses(e,{GetPathWithSpecific:t.GetPathWithSpecific,GetAddress:t.GetAddress,GetDerivationSpecific:t.GetDerivationSpecific},void 0,r);for(const e of a)for(const t of e.addrs)n.push({address:t,path:e.addressing.path})}return{utxoAddresses:s,accountingAddresses:n}}},4922:(e,t,a)=>{a.d(t,{_v:()=>Ie,ON:()=>ke,Jr:()=>De,$1:()=>Me,ew:()=>Se,tu:()=>Re,Ci:()=>We,pV:()=>Fe});var r=a(51938),s=a.n(r),n=a(51942),o=a.n(n),i=a(32366),l=a.n(i),d=a(78914),u=a.n(d),c=a(93476),p=a.n(c),g=a(81643),h=a.n(g),f=a(89400),w=a.n(f),y=a(3649),m=a.n(y),x=a(47302),b=a.n(x),A=a(46423),v=a.n(A),_=a(11128),T=a.n(_),E=a(2084),I=a.n(E),k=a(56474),C=a.n(k),D=a(86902),M=a.n(D),S=a(80426),R=a.n(S),W=a(20116),B=a.n(W),P=a(39392),N=a.n(P),F=a(36384),O=a.n(F),L=a(66419),H=a.n(L),U=a(2991),V=a.n(U),G=a(905),j=a(96486),K=a(40705),Z=a.n(K),z=a(57421),Y=a(90691),q=a(39845),$=a(97143),J=a(11479),X=a(17625),Q=a(44946),ee=a(82982),te=a(85339),ae=a(75697),re=a(38079),se=a(3577),ne=(a(27189),a(47908)),oe=a(81369),ie=a(7559),le=a(91811),de=a(84174),ue=a(72741),ce=a(37495),pe=a(51965),ge=a(24651),he=a(66905),fe=a(21131),we=a(27649),ye=a(21636),me=a(95667),xe=a(86335),be=a(36018),Ae=a(1499),ve=a(90649),_e=a(74119);async function Te(e,t,a,r,s){const{utxoAddresses:n,accountingAddresses:o}=await(0,ce.g_)(t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,GetDerivationSpecific:a.GetDerivationSpecific},r,s),i=V()(n).call(n,(e=>e.address.AddressId)),l=V()(o).call(o,(e=>e.address.AddressId)),d=await a.GetCertificates.forAddress(e,t,{addressIds:[...l,...i]});return{txIds:H()(new(O())([...await a.AssociateTxWithAccountingIOs.getTxIdsForAddresses(e,t,{addressIds:l}),...await a.AssociateTxWithUtxoIOs.getTxIdsForAddresses(e,t,{addressIds:i}),...V()(d).call(d,(e=>e.transaction.TransactionId))])),addresses:{utxoAddresses:V()(n).call(n,(e=>e.address)),accountingAddresses:V()(o).call(o,(e=>e.address))}}}async function Ee(e,t,a,r,s){var n,o;const{publicDeriver:i}=r,{addresses:l,txIds:d}=await Te(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetDerivationSpecific:a.GetDerivationSpecific,GetCertificates:a.GetCertificates},{publicDeriver:i},s),u=new(N()),c=await r.getTxAndBlock(d);for(const e of c)u.set(e.Transaction.TransactionId,e.Block);const p=[...await a.CardanoByronAssociateTxWithIOs.getIOsForTx(e,t,{txs:B()(n=V()(c).call(c,(e=>e.Transaction))).call(n,(e=>e.Type===Y.iU.CardanoByron)),networkId:i.getParent().getNetworkInfo().NetworkId}),...await a.CardanoShelleyAssociateTxWithIOs.getIOsForTx(e,t,{txs:B()(o=V()(c).call(c,(e=>e.Transaction))).call(o,(e=>e.Type===Y.iU.CardanoShelley)),networkId:i.getParent().getNetworkInfo().NetworkId})],g=new(N());{const a=R()(p).call(p,(e=>{var t,a,r,s;return[...V()(t=e.utxoInputs).call(t,(e=>e.AddressId)),...V()(a=e.utxoOutputs).call(a,(e=>e.AddressId)),...null==e.accountingInputs?[]:V()(r=e.accountingInputs).call(r,(e=>e.AddressId)),...null==e.certificates?[]:R()(s=e.certificates).call(s,(e=>{var t;return V()(t=e.relatedAddresses).call(t,(e=>e.AddressId))}))]})),r=await q.t9.getById(e,t,H()(new(O())(a)));for(const e of r)g.set(e.AddressId,e.Hash)}const h=i.getParent().getDefaultToken();return{addressLookupMap:g,txs:V()(p).call(p,(e=>{var t,a;return{...e,block:u.get(e.transaction.TransactionId)||null,...(0,we.lG)({tokens:e.tokens,utxoInputs:e.utxoInputs,utxoOutputs:e.utxoOutputs,accountingInputs:null==e.accountingInputs?void 0:e.accountingInputs,allOwnedAddressIds:new(O())(V()(t=R()(a=M()(l)).call(a,(e=>l[e]))).call(t,(e=>e.AddressId))),ownImplicitInput:i.getParent().getDefaultMultiToken(),ownImplicitOutput:(()=>{if(e.txType===Y.iU.CardanoShelley){const t=i.getParent().getDefaultMultiToken();for(const a of e.certificates)a.certificate.Kind===xe.RustModule.WalletV4.CertificateKind.MoveInstantaneousRewardsCert&&xe.RustModule.WasmScope((e=>{const r=e.WalletV4.MoveInstantaneousRewardsCert.from_hex(a.certificate.Payload).move_instantaneous_reward().as_to_stake_creds();for(const s of a.relatedAddresses)for(const a of l.accountingAddresses)if(s.AddressId===a.AddressId){const s=e.WalletV4.RewardAddress.from_address(e.WalletV4.Address.from_hex(a.Hash));if(null==s)continue;const n=null==r?void 0:r.get(s.payment_cred());if(null==n)continue;const o=n.is_positive(),i=o?n.as_positive():n.as_negative();if(null==i)continue;const l=(o?"":"-")+i.to_str();t.add({identifier:h.defaultIdentifier,networkId:h.defaultNetworkId,amount:new G.Z(l)})}}));return t}return i.getParent().getDefaultMultiToken()})(),defaultToken:h})}}))}}async function Ie(e){var t,a;const r=e.publicDeriver.getParent().getDerivationTables(),s=C()({GetPathWithSpecific:q.LY,GetAddress:q.t9,CardanoByronAssociateTxWithIOs:ae.X,CardanoShelleyAssociateTxWithIOs:ae.K,AssociateTxWithUtxoIOs:ee.zb,AssociateTxWithAccountingIOs:te.KN,GetTxAndBlock:q.Lq,GetDerivationSpecific:le.n,GetCertificates:q.CT}),n=R()(t=V()(a=M()(s)).call(a,(e=>s[e]))).call(t,(t=>(0,z.Hz)(e.publicDeriver.getDb(),t)));return await(0,z.zm)(e.publicDeriver.getDb(),[...n,...(0,z.pS)(e.publicDeriver.getDb(),r)],(async t=>await Ee(e.publicDeriver.getDb(),t,{GetPathWithSpecific:s.GetPathWithSpecific,GetAddress:s.GetAddress,CardanoByronAssociateTxWithIOs:s.CardanoByronAssociateTxWithIOs,CardanoShelleyAssociateTxWithIOs:s.CardanoShelleyAssociateTxWithIOs,AssociateTxWithUtxoIOs:s.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:s.AssociateTxWithAccountingIOs,GetTxAndBlock:s.GetTxAndBlock,GetDerivationSpecific:s.GetDerivationSpecific,GetCertificates:s.GetCertificates},{...e,getTxAndBlock:async a=>await s.GetTxAndBlock.byTime(e.publicDeriver.getDb(),t,{txIds:a,skip:e.skip,limit:e.limit})},r)))}async function ke(e){var t,a;const r=e.publicDeriver.getParent().getDerivationTables(),s=C()({GetPathWithSpecific:q.LY,GetAddress:q.t9,CardanoByronAssociateTxWithIOs:ae.X,CardanoShelleyAssociateTxWithIOs:ae.K,AssociateTxWithUtxoIOs:ee.zb,AssociateTxWithAccountingIOs:te.KN,GetTxAndBlock:q.Lq,GetDerivationSpecific:le.n,GetCertificates:q.CT}),n=R()(t=V()(a=M()(s)).call(a,(e=>s[e]))).call(t,(t=>(0,z.Hz)(e.publicDeriver.getDb(),t)));return await(0,z.zm)(e.publicDeriver.getDb(),[...n,...(0,z.pS)(e.publicDeriver.getDb(),r)],(async t=>await Ee(e.publicDeriver.getDb(),t,{GetPathWithSpecific:s.GetPathWithSpecific,GetAddress:s.GetAddress,CardanoByronAssociateTxWithIOs:s.CardanoByronAssociateTxWithIOs,CardanoShelleyAssociateTxWithIOs:s.CardanoShelleyAssociateTxWithIOs,AssociateTxWithUtxoIOs:s.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:s.AssociateTxWithAccountingIOs,GetTxAndBlock:s.GetTxAndBlock,GetDerivationSpecific:s.GetDerivationSpecific,GetCertificates:s.GetCertificates},{...e,getTxAndBlock:async a=>await s.GetTxAndBlock.withStatus(e.publicDeriver.getDb(),t,{txIds:a,status:[re.YM.PENDING]})},r)))}async function Ce(e,t,a,r,s){var n,o;const i=await Te(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetDerivationSpecific:a.GetDerivationSpecific,GetCertificates:a.GetCertificates},{publicDeriver:s.publicDeriver},r),l=await a.GetTransaction.fromIds(e,t,{ids:i.txIds}),d=[...await a.CardanoByronAssociateTxWithIOs.getIOsForTx(e,t,{txs:B()(l).call(l,(e=>e.Type===Y.iU.CardanoByron)),networkId:s.publicDeriver.getParent().getNetworkInfo().NetworkId}),...await a.CardanoShelleyAssociateTxWithIOs.getIOsForTx(e,t,{txs:B()(l).call(l,(e=>e.Type===Y.iU.CardanoShelley)),networkId:s.publicDeriver.getParent().getNetworkInfo().NetworkId})],u=R()(d).call(d,(e=>{var t,a,r;return[...V()(t=e.utxoInputs).call(t,(e=>e.AddressId)),...V()(a=e.utxoOutputs).call(a,(e=>e.AddressId)),...null==e.accountingInputs?[]:V()(r=e.accountingInputs).call(r,(e=>e.AddressId))]})),c=new(O())(V()(n=R()(o=M()(i.addresses)).call(o,(e=>i.addresses[e]))).call(n,(e=>e.AddressId))),p=B()(u).call(u,(e=>!c.has(e)));return H()(new(O())(p))}async function De(e){var t,a;const r=e.publicDeriver.getParent().getDerivationTables(),s=C()({GetPathWithSpecific:q.LY,GetAddress:q.t9,CardanoByronAssociateTxWithIOs:ae.X,CardanoShelleyAssociateTxWithIOs:ae.K,AssociateTxWithUtxoIOs:ee.zb,AssociateTxWithAccountingIOs:te.KN,GetDerivationSpecific:le.n,GetTransaction:q.Ey,GetCertificates:q.CT}),n=e.publicDeriver.getDb(),o=R()(t=V()(a=M()(s)).call(a,(e=>s[e]))).call(t,(e=>(0,z.Hz)(n,e)));return await(0,z.zm)(n,[...n.getSchema().tables(),...o,...(0,z.pS)(n,r)],(async t=>{const a=await Ce(n,t,s,e.publicDeriver.getParent().getDerivationTables(),{publicDeriver:e.publicDeriver}),r=await q.t9.getById(n,t,a),o=[],i=new(O());for(const e of r)i.has(e.Hash)||(i.add(e.Hash),o.push({address:e.Hash,type:e.Type}));return o}))}async function Me(e,t,a,r,s){const n=await Ce(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,CardanoByronAssociateTxWithIOs:a.CardanoByronAssociateTxWithIOs,CardanoShelleyAssociateTxWithIOs:a.CardanoShelleyAssociateTxWithIOs,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetDerivationSpecific:a.GetDerivationSpecific,GetTransaction:a.GetTransaction,GetCertificates:a.GetCertificates},r,s),o=await Te(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetDerivationSpecific:a.GetDerivationSpecific,GetCertificates:a.GetCertificates},{publicDeriver:s.publicDeriver},r),i=await async function(e,t,a,r,s){var n;const o=await Te(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetDerivationSpecific:a.GetDerivationSpecific,GetCertificates:a.GetCertificates},{publicDeriver:s.publicDeriver},r),i=await a.GetTransaction.fromIds(e,t,{ids:o.txIds}),l=[...await a.CardanoByronAssociateTxWithIOs.getIOsForTx(e,t,{txs:B()(i).call(i,(e=>e.Type===Y.iU.CardanoByron)),networkId:s.publicDeriver.getParent().getNetworkInfo().NetworkId}),...await a.CardanoShelleyAssociateTxWithIOs.getIOsForTx(e,t,{txs:B()(i).call(i,(e=>e.Type===Y.iU.CardanoShelley)),networkId:s.publicDeriver.getParent().getNetworkInfo().NetworkId})];return H()(new(O())(V()(n=R()(l).call(l,(e=>e.tokens))).call(n,(e=>e.TokenList.ListId))))}(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,CardanoByronAssociateTxWithIOs:a.CardanoByronAssociateTxWithIOs,CardanoShelleyAssociateTxWithIOs:a.CardanoShelleyAssociateTxWithIOs,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetDerivationSpecific:a.GetDerivationSpecific,GetTransaction:a.GetTransaction,GetCertificates:a.GetCertificates},r,s);return await a.DeleteAllTransactions.delete(e,t,{publicDeriverId:s.publicDeriver.getPublicDeriverId(),txIds:o.txIds}),await a.ModifyAddress.remove(e,t,n),await a.FreeBlocks.free(e,t),await a.ModifyTokenList.remove(e,t,i),o}async function Se(e){var t,a,r,s;const n=e.publicDeriver.getParent().getDerivationTables(),o=C()({GetPathWithSpecific:q.LY,GetAddress:q.t9,CardanoByronAssociateTxWithIOs:ae.X,CardanoShelleyAssociateTxWithIOs:ae.K,AssociateTxWithUtxoIOs:ee.zb,AssociateTxWithAccountingIOs:te.KN,GetDerivationSpecific:le.n,DeleteAllTransactions:ue.OQ,ModifyAddress:$.ad,GetTransaction:q.Ey,FreeBlocks:$.h,GetCertificates:q.CT,ModifyTokenList:$.xx}),i=e.publicDeriver.getDb(),l=R()(t=V()(a=M()(o)).call(a,(e=>o[e]))).call(t,(e=>(0,z.Hz)(i,e))),d=R()(r=V()(s=M()(Ae.p.depsTables)).call(s,(e=>Ae.p.depsTables[e]))).call(r,(e=>(0,z.Hz)(i,e)));return await(0,z.zm)(i,[...i.getSchema().tables(),...l,...(0,z.pS)(i,n),...d],(async t=>(await Ae.p.depsTables.ModifyUtxoAtSafePoint.remove(i,t,e.publicDeriver.getPublicDeriverId()),await Ae.p.depsTables.ModifyUtxoDiffToBestBlock.removeAll(i,t,e.publicDeriver.getPublicDeriverId()),Me(i,t,o,e.publicDeriver.getParent().getDerivationTables(),{publicDeriver:e.publicDeriver}))))}async function Re(e,t,a,r,s,n){var o,i,l,d,u,c,p,g;const h=(0,se.JM)(t),f=null==h?new(N()):h.getParent().getDerivationTables(),w=C()({GetKeyForPublicDeriver:ne.NX,GetAddress:q.t9,GetPathWithSpecific:q.LY,GetUtxoTxOutputsWithTx:ee.NW,ModifyAddress:$.ad,GetPublicDeriver:ne.oR,AddDerivationTree:ie.if,ModifyDisplayCutoff:oe.J,GetDerivationsByPath:q.q8,GetDerivationSpecific:le.n,GetKeyDerivation:q.qV});await(0,z.zm)(e,[...R()(o=V()(i=M()(w)).call(i,(e=>w[e]))).call(o,(t=>(0,z.Hz)(e,t))),...(0,z.pS)(e,f)],(async e=>{const r=(0,se.hy)(t);null!=r&&await r.rawScanAddresses(e,{GetKeyForPublicDeriver:w.GetKeyForPublicDeriver,GetAddress:w.GetAddress,GetPathWithSpecific:w.GetPathWithSpecific,GetUtxoTxOutputsWithTx:w.GetUtxoTxOutputsWithTx,ModifyAddress:w.ModifyAddress,GetPublicDeriver:w.GetPublicDeriver,AddDerivationTree:w.AddDerivationTree,ModifyDisplayCutoff:w.ModifyDisplayCutoff,GetDerivationsByPath:w.GetDerivationsByPath,GetDerivationSpecific:w.GetDerivationSpecific,GetKeyDerivation:w.GetKeyDerivation},{checkAddressesInUse:a},f)}));const y=C()({GetPathWithSpecific:q.LY,GetAddress:q.t9,GetDerivationSpecific:le.n});await(0,z.zm)(e,[...R()(l=V()(d=M()(Ae.p.depsTables)).call(d,(e=>Ae.p.depsTables[e]))).call(l,(t=>(0,z.Hz)(e,t))),...R()(u=V()(c=M()(y)).call(c,(e=>y[e]))).call(u,(t=>(0,z.Hz)(e,t)))],(async a=>{await async function(e,t,a,r,s){var n,o;const i=await(0,ce.g_)(t,{GetPathWithSpecific:r.GetPathWithSpecific,GetAddress:r.GetAddress,GetDerivationSpecific:r.GetDerivationSpecific},{publicDeriver:a},s),l=a.getUtxoStorageApi(),d=a.getUtxoService();l.setDb(e),l.setDbTx(t);const u=Ve({utxoAddresses:V()(n=i.utxoAddresses).call(n,(e=>e.address)),accountingAddresses:V()(o=i.accountingAddresses).call(o,(e=>e.address))});await async function(e,t){const a=new(O())(t),r=Z().sha1(a),s=`TMP/UTXO_REQUEST_ADDRESSES_HASH/${e}`,n=await(0,_e.Jt)(s),o=null==n||n!==r;return o&&(console.debug("/// utxo state must be cleared:",e,r,n),await(0,_e.mM)(s,r)),o}(a.getPublicDeriverId(),u)&&await l.clearUtxoState(),await d.syncUtxoState(u)}(e,a,t,y,f)}));const m=(0,se.se)(t);if(null==m)throw new Error("wallet doesn't support IGetAllUtxos");const x=await m.getAllUtxos(),b=R()(x).call(x,(e=>{var t;return V()(t=e.output.tokens).call(t,(e=>e.Token.Identifier))})),A=C()({ModifyToken:$.$G,GetToken:q.YT});await(0,z.zm)(e,R()(p=V()(g=M()(A)).call(g,(e=>A[e]))).call(p,(t=>(0,z.Hz)(e,t))),(a=>Fe(e,a,A,b,r,s,n,t.getParent().getNetworkInfo())))}async function We(e,t,a,r,n,i,d,u,c,p,g,h){const f=(0,se.JM)(t),y=null==f?new(N()):f.getParent().getDerivationTables();let x;try{var A,_;const a=C()({GetLastSyncForPublicDeriver:ne.tV,ModifyLastSyncInfo:ue.Ms,GetKeyForPublicDeriver:ne.NX,GetAddress:q.t9,GetPathWithSpecific:q.LY,GetUtxoTxOutputsWithTx:ee.NW,ModifyAddress:$.ad,GetPublicDeriver:ne.oR,AddDerivationTree:ie.if,MarkUtxo:Q.t,ModifyDisplayCutoff:oe.J,GetDerivationsByPath:q.q8,GetEncryptionMeta:q.t$,GetTransaction:q.Ey,GetUtxoInputs:ee.uR,GetTxAndBlock:q.Lq,GetDerivationSpecific:le.n,ModifyTransaction:$.BP,ModifyCardanoByronTx:J.o,ModifyCardanoShelleyTx:J.C,CardanoByronAssociateTxWithIOs:ae.X,CardanoShelleyAssociateTxWithIOs:ae.K,AssociateTxWithUtxoIOs:ee.zb,AssociateTxWithAccountingIOs:te.KN,GetCertificates:q.CT,GetKeyDerivation:q.qV,ModifyToken:$.$G,GetToken:q.YT,AssociateToken:q.qr,DeleteAllTransactions:ue.OQ}),f=R()(A=V()(_=M()(a)).call(_,(e=>a[e]))).call(A,(t=>(0,z.Hz)(e,t)));return await(0,z.zm)(e,[...f,...(0,z.pS)(e,y)],(async f=>{x=await a.GetLastSyncForPublicDeriver.forId(e,f,t.getPublicDeriverId());const{GetLastSyncForPublicDeriver:A,..._}=a;return await async function(e,t,a,r,n,i,d,u,c,p,g,h,f,y,x){var A,_,E;const I=r.getParent().getNetworkInfo(),k=e=>pe.Z.toAbsoluteSlotNumber((0,de.getCardanoHaskellBaseConfig)(I),e);if(null!=x&&null!=y)throw new Error("Only one of `before` or `after` should be used for a resync");const C=await c({network:I}),D=null==x?C.hash:x.blockHash;if(null==x){const r=null==C.epoch||null==C.slot?null:k({epoch:C.epoch,slot:C.slot});await a.ModifyLastSyncInfo.overrideLastSyncInfo(e,t,{LastSyncInfoId:n.LastSyncInfoId,Time:new Date(T()()),SlotNum:r,BlockHash:C.hash,Height:C.height})}let S;if(null!=D){var W,P;const{txIds:n,addresses:c}=await Te(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,GetDerivationSpecific:a.GetDerivationSpecific,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetCertificates:a.GetCertificates},{publicDeriver:r},p);let A;if(null!=y)A=await i({network:I,addresses:Ve(c),after:{block:y.blockHash,tx:y.txHash||void 0},untilBlock:D}),S=V()(A).call(A,(e=>e.hash));else{var F,L,U;const e=await d({network:I,addresses:Ve(c),before:{blockHash:D,txHash:null==x?void 0:x.txHash}}),t=B()(F=v()(L=(0,ve.listValues)(e)).call(L)).call(F,(0,ve.createFilterUniqueBy)((e=>e.txHash)));b()(t).call(t,((e,t)=>t.epoch-e.epoch||t.slot-e.slot||t.txBlockIndex-e.txBlockIndex)),S=V()(U=m()(t).call(t,0,20)).call(U,(e=>e.txHash)),A=await u({network:I,txHashes:S})}const _=new(O())(V()(W=R()(P=M()(c)).call(P,(e=>c[e]))).call(W,(e=>e.AddressId)));await async function(e,t,a,r){const{TransactionSeed:n,BlockSeed:i}=await a.GetEncryptionMeta.get(e,t),d=new(N());{var u;const s=V()(u=r.txsFromNetwork).call(u,(e=>(0,X.a)(e.hash,n))),o=await a.GetTransaction.byDigest(e,t,{digests:s,txIds:r.txIds}),i=H()(w()(o).call(o)),l=[...await a.CardanoByronAssociateTxWithIOs.getIOsForTx(e,t,{txs:B()(i).call(i,(e=>e.Type===Y.iU.CardanoByron)),networkId:r.network.NetworkId}),...await a.CardanoShelleyAssociateTxWithIOs.getIOsForTx(e,t,{txs:B()(i).call(i,(e=>e.Type===Y.iU.CardanoShelley)),networkId:r.network.NetworkId})];for(const e of l)d.set(e.transaction.Hash,e)}const c=[],p=[],g=new(O());for(const s of r.txsFromNetwork){const o=d.get(s.hash);if(null==o){c.push(s);continue}const l=He(s,r.toAbsoluteSlotNumber,n,i);g.add(o.transaction.TransactionId);const u=await a.ModifyTransaction.updateExisting(e,t,{block:l.block,transaction:e=>({...l.transaction(e),TransactionId:o.transaction.TransactionId})});o.transaction.Status!==re.YM.IN_BLOCK&&null!==u.block&&p.push({...o,transaction:u.transaction,block:u.block})}const h=H()(new(O())(R()(c).call(c,(e=>{var t,a,s,n;return[...V()(t=R()(a=e.inputs).call(a,(e=>e.assets))).call(t,(e=>e.assetId)),...V()(s=R()(n=e.outputs).call(n,(e=>e.assets))).call(s,(e=>e.assetId)),r.defaultToken.defaultIdentifier]})))),f=await Fe(e,t,{ModifyToken:a.ModifyToken,GetToken:a.GetToken},h,r.getTokenInfo,r.getMultiAssetMetadata,r.getMultiAssetSupply,r.network),y=await(0,ee.i9)(e,t,{AssociateToken:a.AssociateToken}),{byronTxs:m,shelleyTxs:x}=await async function(e,t,a,r,n,i,d,u,c,p,g,h){const f=H()(new(O())(R()(n).call(n,(e=>{var t,a,r;return[...V()(t=e.inputs).call(t,(e=>e.address)),...V()(a=e.outputs).call(a,(e=>e.address)),...e.withdrawals?V()(r=e.withdrawals).call(r,(e=>e.address)):[]]})))),y=await i({db:e,tx:t,lockedTables:H()(w()(r).call(r)),hashes:f}),m=e=>{const t=y.get(e);if(void 0===t)throw new Error("networkTxToDbTx should never happen id === undefined");return t},x=e=>{const t=g.get(e);if(void 0===t)throw new Error("networkTxToDbTx should never happen -- asset missing");return t},b=[],A=[];for(const g of n){const{block:n,transaction:f}=He(g,u,c,p);if(null==g.type||g.type===ye.p.byron)b.push({block:n,transaction:f,ioGen:Be(g,m,a,x,h)});else{var v;if(g.type!==ye.p.shelley)throw new Error(`networkTxToDbTx Unhandled tx type ${null!==(v=g.type)&&void 0!==v?v:""}`);{var _;const u=l()(_=(0,de.getCardanoHaskellBaseConfig)(a)).call(_,((e,t)=>o()(e,t)),{}),c=null==g.certificates?[e=>{}]:await Ue(e,t,{certificates:g.certificates,hashToIds:i,findOwnAddress:d,derivationTables:r,network:s()(u.ChainNetworkId,10)});A.push({block:n,transaction:f,certificates:c,ioGen:Pe(g,m,a,x,h)})}}}return{byronTxs:b,shelleyTxs:A}}(e,t,r.network,r.derivationTables,c,r.hashToIds,r.findOwnAddress,r.toAbsoluteSlotNumber,n,i,f,y),b=new(O());for(const r of m){const s=await a.ModifyCardanoByronTx.addTxWithIOs(e,t,r);b.add(s.transaction.TransactionId),null!==s.block&&p.push({txType:s.txType,block:s.block,transaction:s.transaction,utxoInputs:s.utxoInputs,utxoOutputs:s.utxoOutputs,tokens:s.tokens})}for(const r of x){const s=await a.ModifyCardanoShelleyTx.addTxWithIOs(e,t,r);b.add(s.transaction.TransactionId),null!==s.block&&p.push({txType:s.txType,block:s.block,transaction:s.transaction,certificates:s.certificates,utxoInputs:s.utxoInputs,utxoOutputs:s.utxoOutputs,accountingInputs:s.accountingInputs,tokens:s.tokens})}const A=V()(p).call(p,(e=>e.transaction.TransactionId));await Oe(e,t,{MarkUtxo:a.MarkUtxo,GetUtxoInputs:a.GetUtxoInputs,GetTransaction:a.GetTransaction},{inputTxIds:A,allTxIds:[...r.txIds,...A],isUnspent:!1,TransactionSeed:n,networkId:r.network.NetworkId});const v=await a.GetTransaction.withStatus(e,t,{txIds:r.txIds,status:[re.YM.PENDING]});for(const r of v)g.has(r.TransactionId)||b.has(r.TransactionId)||await a.ModifyTransaction.updateStatus(e,t,{transaction:r,status:re.YM.NOT_IN_REMOTE});return p}(e,t,{MarkUtxo:a.MarkUtxo,CardanoByronAssociateTxWithIOs:a.CardanoByronAssociateTxWithIOs,CardanoShelleyAssociateTxWithIOs:a.CardanoShelleyAssociateTxWithIOs,GetEncryptionMeta:a.GetEncryptionMeta,GetTransaction:a.GetTransaction,GetUtxoInputs:a.GetUtxoInputs,ModifyTransaction:a.ModifyTransaction,ModifyCardanoByronTx:a.ModifyCardanoByronTx,ModifyCardanoShelleyTx:a.ModifyCardanoShelleyTx,ModifyToken:a.ModifyToken,GetToken:a.GetToken,AssociateToken:a.AssociateToken},{network:r.getParent().getNetworkInfo(),txIds:n,txsFromNetwork:A,hashToIds:(0,ge.SL)(_,r.getParent().getNetworkInfo()),defaultToken:r.getParent().getDefaultToken(),findOwnAddress:(0,ge.K0)(_),toAbsoluteSlotNumber:k,derivationTables:p,getTokenInfo:g,getMultiAssetMetadata:h,getMultiAssetSupply:f})}else S=[];const G=await Ee(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,CardanoByronAssociateTxWithIOs:a.CardanoByronAssociateTxWithIOs,CardanoShelleyAssociateTxWithIOs:a.CardanoShelleyAssociateTxWithIOs,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetTxAndBlock:a.GetTxAndBlock,GetDerivationSpecific:a.GetDerivationSpecific,GetCertificates:a.GetCertificates},{publicDeriver:r,getTxAndBlock:async r=>await a.GetTxAndBlock.byTime(e,t,{txIds:r})},p),j=V()(A=m()(_=G.txs).call(_,100)).call(A,(e=>e.transaction.TransactionId));await a.DeleteAllTransactions.delete(e,t,{publicDeriverId:r.getPublicDeriverId(),txIds:j},!1);const K=new(O())(S);return{txs:B()(E=G.txs).call(E,(e=>K.has(e.transaction.Hash))),addressLookupMap:G.addressLookupMap}}(e,f,_,t,x,r,n,i,d,y,u,c,p,g,h)}))}catch(a){var E,k;if(!(a instanceof fe.zJ))throw a;if(void 0===x)throw a;const r=C()({GetPathWithSpecific:q.LY,GetAddress:q.t9,GetTxAndBlock:q.Lq,GetLastSyncForPublicDeriver:ne.tV,ModifyLastSyncInfo:ue.Ms,GetBlock:q.Ff,ModifyTransaction:$.BP,MarkUtxo:Q.t,GetTransaction:q.Ey,GetUtxoInputs:ee.uR,GetEncryptionMeta:q.t$,GetDerivationSpecific:le.n,CardanoByronAssociateTxWithIOs:ae.X,AssociateTxWithUtxoIOs:ee.zb,AssociateTxWithAccountingIOs:te.KN}),s=R()(E=V()(k=M()(r)).call(k,(e=>r[e]))).call(E,(t=>(0,z.Hz)(e,t)));return await(0,z.zm)(e,[...s,...(0,z.pS)(e,y)],(async a=>{const s=await r.GetLastSyncForPublicDeriver.forId(e,a,t.getPublicDeriverId());(0,j.isEqual)(s,x)&&await async function(e,t,a,r,s){const{TransactionSeed:n}=await a.GetEncryptionMeta.get(e,t);if(null===r.lastSyncInfo.SlotNum)return;const{utxoAddresses:o,accountingAddresses:i}=await(0,ce.g_)(t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,GetDerivationSpecific:a.GetDerivationSpecific},{publicDeriver:r.publicDeriver},s),l=V()(o).call(o,(e=>e.address.AddressId)),d=V()(i).call(i,(e=>e.address.AddressId)),u=H()(new(O())([...await a.AssociateTxWithAccountingIOs.getTxIdsForAddresses(e,t,{addressIds:d}),...await a.AssociateTxWithUtxoIOs.getTxIdsForAddresses(e,t,{addressIds:l})])),c=await a.GetTxAndBlock.firstSuccessTxBefore(e,t,{txIds:u,height:I()});if(null==c)return;const p=await a.GetTxAndBlock.gteHeight(e,t,{txIds:u,height:c.Block.Height-he.Q});for(const r of p)await a.ModifyTransaction.updateStatus(e,t,{status:re.YM.ROLLBACK_FAIL,transaction:r.Transaction});await Oe(e,t,{MarkUtxo:a.MarkUtxo,GetUtxoInputs:a.GetUtxoInputs,GetTransaction:a.GetTransaction},{inputTxIds:V()(p).call(p,(e=>e.Transaction.TransactionId)),allTxIds:u,isUnspent:!0,TransactionSeed:n,networkId:r.publicDeriver.getParent().getNetworkInfo().NetworkId});const g=await a.GetTransaction.withStatus(e,t,{txIds:u,status:[re.YM.PENDING]});for(const r of g)await a.ModifyTransaction.updateStatus(e,t,{transaction:r,status:re.YM.ROLLBACK_FAIL});const h=await a.GetTxAndBlock.firstSuccessTxBefore(e,t,{txIds:u,height:c.Block.Height-he.Q});await a.ModifyLastSyncInfo.overrideLastSyncInfo(e,t,{LastSyncInfoId:r.lastSyncInfo.LastSyncInfoId,Time:new Date(T()()),SlotNum:void 0===h?null:h.Block.SlotNum,Height:void 0===h?0:h.Block.Height,BlockHash:void 0===h?null:h.Block.Hash})}(e,a,r,{publicDeriver:t,lastSyncInfo:s},y)})),{addressLookupMap:new(N()),txs:[]}}}function Be(e,t,a,r,s){if(null!=e.type&&e.type!==ye.p.byron)throw new Error("genByronIOGen not a byron transaction");return n=>{const o=[],i=[],l=[];for(let i=0;i<e.inputs.length;i++){const d=e.inputs[i],u=s();l.push({TokenList:{Amount:d.amount,ListId:u,TokenId:r(re.hd.Cardano).TokenId},identifier:re.hd.Cardano,networkId:a.NetworkId});for(let e=0;e<d.assets.length;e++){const t=r(d.assets[e].assetId);l.push({TokenList:{Amount:d.assets[e].amount.toString(),ListId:u,TokenId:t.TokenId},identifier:d.assets[e].assetId,networkId:a.NetworkId})}o.push({TransactionId:n,AddressId:t(d.address),ParentTxHash:d.txHash,IndexInParentTx:d.index,IndexInOwnTx:i,TokenListId:u})}for(let o=0;o<e.outputs.length;o++){const d=e.outputs[o],u=s();l.push({TokenList:{Amount:d.amount,ListId:u,TokenId:r(re.hd.Cardano).TokenId},identifier:re.hd.Cardano,networkId:a.NetworkId});for(let e=0;e<d.assets.length;e++){const t=r(d.assets[e].assetId);l.push({TokenList:{Amount:d.assets[e].amount.toString(),ListId:u,TokenId:t.TokenId},identifier:d.assets[e].assetId,networkId:a.NetworkId})}i.push({TransactionId:n,AddressId:t(d.address),OutputIndex:o,IsUnspent:!0,ErgoBoxId:null,ErgoCreationHeight:null,ErgoRegisters:null,ErgoTree:null,TokenListId:u})}return{utxoInputs:o,utxoOutputs:i,tokenList:l}}}function Pe(e,t,a,r,s){if(e.type!==ye.p.shelley)throw new Error("genShelleyIOGen not a shelley transaction");return n=>{const o=[],i=[],l=[],d=[];for(let i=0;i<e.inputs.length;i++){const l=e.inputs[i],u=s();d.push({TokenList:{Amount:l.amount,ListId:u,TokenId:r(re.hd.Cardano).TokenId},identifier:re.hd.Cardano,networkId:a.NetworkId});for(let e=0;e<l.assets.length;e++){const t=r(l.assets[e].assetId);d.push({TokenList:{Amount:l.assets[e].amount.toString(),ListId:u,TokenId:t.TokenId},identifier:l.assets[e].assetId,networkId:a.NetworkId})}o.push({TransactionId:n,AddressId:t(l.address),ParentTxHash:l.txHash,IndexInParentTx:l.index,IndexInOwnTx:i,TokenListId:u})}for(let o=0;o<e.withdrawals.length;o++){const i=s();d.push({TokenList:{Amount:e.withdrawals[o].amount,ListId:i,TokenId:r(re.hd.Cardano).TokenId},identifier:re.hd.Cardano,networkId:a.NetworkId}),l.push({TransactionId:n,AddressId:t(e.withdrawals[o].address),SpendingCounter:0,IndexInOwnTx:o,TokenListId:i})}for(let o=0;o<e.outputs.length;o++){const l=e.outputs[o],u=s();d.push({TokenList:{Amount:l.amount,ListId:u,TokenId:r(re.hd.Cardano).TokenId},identifier:re.hd.Cardano,networkId:a.NetworkId});for(let e=0;e<l.assets.length;e++){const t=r(l.assets[e].assetId);d.push({TokenList:{Amount:l.assets[e].amount.toString(),ListId:u,TokenId:t.TokenId},identifier:l.assets[e].assetId,networkId:a.NetworkId})}const c=(0,me.addressToKind)(l.address,"bytes",a);if(c!==re.dq.CARDANO_LEGACY&&c!==re.dq.CARDANO_ENTERPRISE&&c!==re.dq.CARDANO_BASE&&c!==re.dq.CARDANO_PTR)throw c===re.dq.CARDANO_REWARD?new Error("networkTxToDbTx cannot send to a reward address"):new Error("networkTxToDbTx Unhandled output type");i.push({TransactionId:n,AddressId:t(l.address),OutputIndex:o,TokenListId:u,IsUnspent:!0,ErgoBoxId:null,ErgoCreationHeight:null,ErgoRegisters:null,ErgoTree:null})}return{utxoInputs:o,utxoOutputs:i,accountingInputs:l,tokenList:d}}}const Ne=36e5;async function Fe(e,t,a,r,s,n,o,i){var l,d,c;const g=B()(l=await a.GetToken.fromIdentifier(e,t,r)).call(l,(e=>e.NetworkId===i.NetworkId)),f=new(N())(V()(g).call(g,(e=>[e.Identifier,e]))),w=new(O())(V()(d=B()(g).call(g,(e=>{if(e.IsDefault)return!0;const{lastUpdatedAt:t}=e.Metadata;return null!=t&&T()()-Date.parse(t)<Ne}))).call(d,(e=>e.Identifier))),y=B()(r).call(r,(e=>!w.has(e))),m=s({network:i,tokenIds:V()(y).call(y,(e=>e.split(".").join("")))}),x=async function(e,t,a,r){var s,n;const o=V()(s=B()(n=e||[]).call(n,(e=>-1!==h()(e).call(e,".")))).call(s,(e=>{const t=e.split("."),a=t[0];return{nameHex:t[1],policy:a}}));if(0===o.length)return[{},{}];const[i,l]=await p().all([t({network:r,assets:o}),a({network:r,assets:o})]);return[i,l]}(r,n,o,i);let b={},A={},v={};try{[b,[A,v]]=await p().all([m,x])}catch(e){console.error("Failed to query token info, metadata, or supply",e)}const _=B()(c=V()(y).call(y,(e=>{var t;const a=e.split(".").join("");let r=0,s=null,n=null,o=null,l=null;const d=b[a];var u,c,p,g;if(d)r=null!==(u=d.decimals)&&void 0!==u?u:0,n=null!==(c=d.ticker)&&void 0!==c?c:null,s=(new Date).toISOString(),o=null!==(p=d.name)&&void 0!==p?p:null,l=null!==(g=d.logo)&&void 0!==g?g:null;else if(null===d)s=(new Date).toISOString();else if(f.has(e))return null;const h=(0,we.PF)(e),w=(0,ve.bytesToHex)(h.name.name()),y=h.policyId.to_hex(),m=A[e],x=v[e];let _=!1,T=[];return m&&(_=B()(m).call(m,(e=>"721"===e.key)).length>0&&"1"===x,T=V()(m).call(m,(e=>{const t={};return t[e.key]=e.metadata,t}))),{NetworkId:i.NetworkId,Identifier:e,IsDefault:!1,TokenId:null===(t=f.get(e))||void 0===t?void 0:t.TokenId,IsNFT:_,Metadata:{type:"Cardano",ticker:n,logo:l,longName:o,numberOfDecimals:r,assetName:w,policyId:y,lastUpdatedAt:s,assetMintMetadata:T}}}))).call(c,Boolean),E=await a.ModifyToken.upsert(e,t,_),I=new(N());return u()(g).call(g,(e=>I.set(e.Identifier,e))),u()(E).call(E,(e=>I.set(e.Identifier,e))),I}async function Oe(e,t,a,r){const s=await a.GetUtxoInputs.fromTxIds(e,t,{ids:r.inputTxIds}),n=V()(s).call(s,(e=>(0,X.a)(e.ParentTxHash,r.TransactionSeed))),o=await a.GetTransaction.byDigest(e,t,{digests:n,txIds:r.allTxIds});for(const n of s){const s=o.get(n.ParentTxHash);void 0!==s&&await a.MarkUtxo.markAs(e,t,{txId:s.TransactionId,outputIndex:n.IndexInParentTx,isUnspent:r.isUnspent,networkId:r.networkId})}}function Le(e){if("Successful"===e)return re.YM.IN_BLOCK;if("Pending"===e)return re.YM.PENDING;if("Failed"===e)return re.YM.FAIL_RESPONSE;throw new Error("statusStringToCode unexpected status "+e)}function He(e,t,a,r){var s;const n=null!=e.epoch&&null!=e.slot&&null!=e.block_hash&&null!=e.time&&null!=e.height?{Hash:e.block_hash,BlockTime:new Date(e.time),Height:e.height,SlotNum:t({epoch:e.epoch,slot:e.slot}),Digest:(0,X.a)(e.hash,r)}:null,o=(0,X.a)(e.hash,a),i={Hash:e.hash,Digest:o,Ordinal:e.tx_ordinal,LastUpdateTime:null==n||null==e.time?new Date(e.last_update).getTime():new Date(e.time).getTime(),Status:Le(e.tx_state),ErrorMessage:null};if(null==e.type||e.type===ye.p.byron)return{block:n,transaction:e=>({Type:Y.iU.CardanoByron,Extra:null,BlockId:e,...i})};if(e.type===ye.p.shelley)return{block:n,transaction:t=>{var a;return{Type:Y.iU.CardanoShelley,Extra:{Fee:e.fee,Metadata:e.metadata,IsValid:null===(a=e.valid_transaction)||void 0===a||a},BlockId:t,...i}}};throw new Error(`networkTxHeaderToDb Unhandled tx type ${null!==(s=e.type)&&void 0!==s?s:""}`)}async function Ue(e,t,a){const r=async r=>{var s;return await a.findOwnAddress({db:e,tx:t,lockedTables:H()(w()(s=a.derivationTables).call(s)),hash:r})},s=async r=>{var s;const n=(await a.hashToIds({db:e,tx:t,lockedTables:H()(w()(s=a.derivationTables).call(s)),hashes:[r]})).get(r);if(void 0===n)throw new Error("certificateToDb should never happen id === undefined");return n},n=async e=>{{const t=xe.RustModule.WasmScope((t=>{const r=t.WalletV4.Credential.from_bytes((0,ve.hexToBytes)(e));return(0,ve.bytesToHex)(t.WalletV4.RewardAddress.new(a.network,r).to_address().to_bytes())})),s=await r(t);if(null!=s)return s}{const t=xe.RustModule.WasmScope((t=>{const r=t.WalletV4.Credential.from_bytes((0,ve.hexToBytes)(e));return t.WalletV4.EnterpriseAddress.new(a.network,r).to_address().to_hex()})),s=await r(t);if(null!=s)return s}},o=[];for(let e=0;e<a.certificates.length;e++){const t=a.certificates[e];switch(t.kind){case ye.U.StakeRegistration:{const[e,r]=xe.RustModule.WasmScope((e=>{var r;const s=null===(r=e.WalletV4.RewardAddress.from_address(e.WalletV4.Address.from_bytes((0,ve.hexToBytes)(t.rewardAddress))))||void 0===r?void 0:r.payment_cred();if(null==s)throw new Error("certificateToDb not a valid reward account");return[(0,ve.bytesToHex)(e.WalletV4.RewardAddress.new(a.network,s).to_address().to_bytes()),(0,ve.bytesToHex)(e.WalletV4.StakeRegistration.new(s).to_bytes())]})),n=await s(e);o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.StakeRegistration,Payload:r,TransactionId:e},relatedAddresses:e=>[{CertificateId:e,AddressId:n,Relation:re.cS.SIGNER}]})));break}case ye.U.StakeDeregistration:{const[e,r]=xe.RustModule.WasmScope((e=>{var r;const s=null===(r=e.WalletV4.RewardAddress.from_address(e.WalletV4.Address.from_bytes((0,ve.hexToBytes)(t.rewardAddress))))||void 0===r?void 0:r.payment_cred();if(null==s)throw new Error("certificateToDb not a valid reward account");return[(0,ve.bytesToHex)(e.WalletV4.RewardAddress.new(a.network,s).to_address().to_bytes()),(0,ve.bytesToHex)(e.WalletV4.StakeRegistration.new(s).to_bytes())]})),n=await s(e);o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.StakeDeregistration,Payload:r,TransactionId:e},relatedAddresses:e=>[{CertificateId:e,AddressId:n,Relation:re.cS.SIGNER}]})));break}case ye.U.StakeDelegation:{const e=[],[a,r,i]=xe.RustModule.WasmScope((e=>{const a=e.WalletV4.RewardAddress.from_address(e.WalletV4.Address.from_bytes((0,ve.hexToBytes)(t.rewardAddress)));if(null==a)throw new Error("certificateToDb not a valid reward account");const r=a.payment_cred(),s=e.WalletV4.Ed25519KeyHash.from_bytes((0,ve.hexToBytes)(t.poolKeyHash));return[(0,ve.bytesToHex)(a.to_address().to_bytes()),(0,ve.bytesToHex)(e.WalletV4.StakeDelegation.new(r,s).to_bytes()),(0,ve.bytesToHex)(e.WalletV4.Credential.from_keyhash(s).to_bytes())]}));{const t=await n(i);null!=t&&e.push({AddressId:t,Relation:re.cS.POOL_KEY})}{const t=await s(a);e.push({AddressId:t,Relation:re.cS.SIGNER})}o.push((a=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.StakeDelegation,Payload:r,TransactionId:a},relatedAddresses:t=>V()(e).call(e,(e=>({...e,CertificateId:t})))})));break}case ye.U.PoolRegistration:{const e=[],a=[],[r,i]=xe.RustModule.WasmScope((e=>{const r=e.WalletV4.RewardAddress.from_address(e.WalletV4.Address.from_bytes((0,ve.hexToBytes)(t.poolParams.rewardAccount)));if(null==r)throw new Error("certificateToDb registration address not a reward address");const s=e.WalletV4.Ed25519KeyHash.from_bytes((0,ve.hexToBytes)(t.poolParams.operator)),n=e.WalletV4.Ed25519KeyHashes.new();for(let r=0;r<t.poolParams.poolOwners.length;r++){const s=t.poolParams.poolOwners[r],o=e.WalletV4.Ed25519KeyHash.from_hex(s);n.add(o);const i=(0,ve.bytesToHex)(e.WalletV4.Credential.from_keyhash(o).to_bytes());a.push(i)}let o;if(null!=t.poolParams.poolMetadata){const a=t.poolParams.poolMetadata;o=e.WalletV4.PoolMetadata.new(e.WalletV4.URL.new(a.url),e.WalletV4.PoolMetadataHash.from_hex(a.metadataHash))}const i=e.WalletV4.PoolRegistration.new(e.WalletV4.PoolParams.new(s,e.WalletV4.VRFKeyHash.from_hex(t.poolParams.vrfKeyHash),e.WalletV4.BigNum.from_str(t.poolParams.pledge),e.WalletV4.BigNum.from_str(t.poolParams.cost),e.WalletV4.UnitInterval.new(e.WalletV4.BigNum.from_str("1"),e.WalletV4.BigNum.from_str("1")),r,n,e.WalletV4.Relays.new(),o));return[(0,ve.bytesToHex)(e.WalletV4.Credential.from_keyhash(s).to_bytes()),(0,ve.bytesToHex)(i.to_bytes())]}));for(const t of a){const a=await n(t);null!=a&&e.push({AddressId:a,Relation:re.cS.OWNER})}{const t=await n(r);null!=t&&e.push({AddressId:t,Relation:re.cS.OPERATOR})}{const a=await s(t.poolParams.rewardAccount);e.push({AddressId:a,Relation:re.cS.REWARD_ADDRESS})}o.push((a=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.PoolRegistration,Payload:i,TransactionId:a},relatedAddresses:t=>V()(e).call(e,(e=>({...e,CertificateId:t})))})));break}case ye.U.PoolRetirement:{const e=[],[a,r]=xe.RustModule.WasmScope((e=>{const a=e.WalletV4.Ed25519KeyHash.from_bytes((0,ve.hexToBytes)(t.poolKeyHash));return[(0,ve.bytesToHex)(e.WalletV4.Credential.from_keyhash(a).to_bytes()),(0,ve.bytesToHex)(e.WalletV4.PoolRetirement.new(a,t.epoch).to_bytes())]}));{const t=await n(a);null!=t&&e.push({AddressId:t,Relation:re.cS.POOL_KEY})}o.push((a=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.PoolRetirement,Payload:r,TransactionId:a},relatedAddresses:t=>V()(e).call(e,(e=>({...e,CertificateId:t})))})));break}case ye.U.GenesisKeyDelegation:{const e=xe.RustModule.WasmScope((e=>(0,ve.bytesToHex)(e.WalletV4.GenesisKeyDelegation.new(e.WalletV4.GenesisHash.from_bytes((0,ve.hexToBytes)(t.genesishash)),e.WalletV4.GenesisDelegateHash.from_bytes((0,ve.hexToBytes)(t.genesisDelegateHash)),e.WalletV4.VRFKeyHash.from_bytes((0,ve.hexToBytes)(t.vrfKeyHash))).to_bytes())));o.push((a=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.GenesisKeyDelegation,Payload:e,TransactionId:a},relatedAddresses:e=>[]})));break}case ye.U.MoveInstantaneousRewardsCert:{const e=[],a=xe.RustModule.WasmScope((e=>{const a=e.WalletV4.MIRToStakeCredentials.new();for(const r of M()(t.rewards)){const s=e.WalletV4.RewardAddress.from_address(e.WalletV4.Address.from_bytes((0,ve.hexToBytes)(r)));if(null==s)throw new Error("certificateToDb not a valid reward account");const n=s.payment_cred();if(null==n)throw new Error("certificateToDb not a valid reward account");a.insert(n,e.WalletV4.Int.new(e.WalletV4.BigNum.from_str(t.rewards[r])))}const r=e.WalletV4.MoveInstantaneousRewardsCert.new(e.WalletV4.MoveInstantaneousReward.new_to_stake_creds(t.pot,a));return(0,ve.bytesToHex)(r.to_bytes())}));for(const a of M()(t.rewards)){const t=await r(a);null!=t&&e.push({AddressId:t,Relation:re.cS.REWARD_ADDRESS})}o.push((r=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.MoveInstantaneousRewardsCert,Payload:a,TransactionId:r},relatedAddresses:t=>V()(e).call(e,(e=>({...e,CertificateId:t})))})));break}case ye.U.VoteDelegation:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.VoteDelegation,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case ye.U.StakeVoteDelegation:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.StakeAndVoteDelegation,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case ye.U.StakeRegistrationDelegation:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.StakeRegistrationAndDelegation,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case ye.U.VoteRegistrationDelegation:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.VoteRegistrationAndDelegation,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case ye.U.StakeVoteRegistrationDelegation:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.StakeVoteRegistrationAndDelegation,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case ye.U.AuthCommitteeHot:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.CommitteeHotAuth,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case ye.U.ResignCommitteeCold:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.CommitteeColdResign,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case ye.U.RegisterDrep:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.DRepRegistration,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case ye.U.UnregisterDrep:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.DRepDeregistration,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case ye.U.UpdateDrep:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.DRepUpdate,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;default:throw new Error("certificateToDb unknown cert kind "+t.kind)}}return o}function Ve(e){var t,a,r,s,n;return[...V()(t=B()(a=e.utxoAddresses).call(a,(e=>e.Type===re.dq.CARDANO_LEGACY))).call(t,(e=>e.Hash)),...l()(r=B()(s=e.utxoAddresses).call(s,(e=>e.Type===re.dq.CARDANO_ENTERPRISE))).call(r,((e,t)=>xe.RustModule.WasmScope((a=>{const r=a.WalletV4.Address.from_hex(t.Hash),s=a.WalletV4.EnterpriseAddress.from_address(r);if(null==s)return e;const n=s.payment_cred().to_keyhash();return null==n||e.push(n.to_bech32(be.a.PAYMENT_KEY_HASH)),e}))),[]),...V()(n=e.accountingAddresses).call(n,(e=>e.Hash))]}},95667:(e,t,a)=>{a.d(t,{addressToKind:()=>p,normalizeToAddress:()=>w,getCardanoSpendingKeyHash:()=>y,addressToDisplayString:()=>m,toHexOrBase58:()=>x,unwrapStakingKey:()=>b,isCertificateKindDrepDelegation:()=>A});var r=a(94473),s=a.n(r),n=a(97093),o=a.n(n),i=(a(59340),a(51938),a(38079)),l=a(86335),d=a(84174),u=(a(99095),a(27715)),c=a(90649);function p(e,t,a){try{return l.RustModule.WasmScope((r=>{if((0,d.isCardanoHaskell)(a)){if(r.WalletV4.ByronAddress.is_valid(e))return i.dq.CARDANO_LEGACY;const a="bytes"===t?r.WalletV4.Address.from_hex(e):r.WalletV4.Address.from_bech32(e);if(r.WalletV4.ByronAddress.from_address(a))return i.dq.CARDANO_LEGACY;if(r.WalletV4.BaseAddress.from_address(a))return i.dq.CARDANO_BASE;if(r.WalletV4.PointerAddress.from_address(a))return i.dq.CARDANO_PTR;if(r.WalletV4.EnterpriseAddress.from_address(a))return i.dq.CARDANO_ENTERPRISE;if(r.WalletV4.RewardAddress.from_address(a))return i.dq.CARDANO_REWARD;throw new Error("addressToKind unknown address type")}throw new Error(`addressToKind not implemented for network ${a.NetworkId}`)}))}catch(t){throw new Error(`addressToKind failed to parse address type ${t} ${e}`)}}const g=e=>(0,c.bytesToHex)(u.bech32.fromWords(e)),h=e=>{const t=u.bech32.decodeUnsafe(e,e.length);return(0,c.maybe)(null==t?void 0:t.words,g)},f=[{validate:e=>57===(0,c.hexToBytes)(e).length,header:/^[0-3]/},{validate:e=>(0,c.hexToBytes)(e).length>=32,header:/^[4-5]/},{validate:e=>29===(0,c.hexToBytes)(e).length,header:/^[6-7]/},{parse:e=>{const t=(e=>{const t=[];let a=e;for(;a>0;){const e=a/BigInt(58),r=a%BigInt(58);a=e,t.push("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"[r])}return o()(t).call(t).join("")})(BigInt(`0x${e}`));if(l.RustModule.WalletV4.ByronAddress.is_valid(t))return l.RustModule.WalletV4.ByronAddress.from_base58(t).to_address()},header:/^[8]/},{validate:e=>29===(0,c.hexToBytes)(e).length,header:/^[e-f]|[E-F]/}];function w(e){var t;if(l.RustModule.WalletV4.ByronAddress.is_valid(e))return l.RustModule.WalletV4.ByronAddress.from_base58(e).to_address();const a=e=>{const t=s()(f).call(f,(t=>t.header.test(e)));if(t){if(t.parse)return t.parse(e);if(t.validate(e))try{return l.RustModule.WalletV4.Address.from_hex(e)}catch{}}};return/^[a-fA-F0-9]+$/.test(e)?a(e):null!==(t=(0,c.maybe)(h(e),a))&&void 0!==t?t:void 0}function y(e){if(l.RustModule.WalletV4.ByronAddress.from_address(e))return null;{const t=l.RustModule.WalletV4.BaseAddress.from_address(e);if(t)return t.payment_cred().to_keyhash()}{const t=l.RustModule.WalletV4.PointerAddress.from_address(e);if(t)return t.payment_cred().to_keyhash()}{const t=l.RustModule.WalletV4.EnterpriseAddress.from_address(e);if(t)return t.payment_cred().to_keyhash()}{const t=l.RustModule.WalletV4.RewardAddress.from_address(e);if(t)return t.payment_cred().to_keyhash()}throw new Error("getCardanoSpendingKeyHash unknown address type")}function m(e,t){try{if((0,d.isCardanoHaskell)(t)){if(l.RustModule.WalletV4.ByronAddress.is_valid(e))return e;const t=l.RustModule.WalletV4.Address.from_hex(e),a=l.RustModule.WalletV4.ByronAddress.from_address(t);return null==a?t.to_bech32():a.to_base58()}throw new Error(`addressToDisplayString not implemented for network ${t.NetworkId}`)}catch(t){throw new Error("addressToDisplayString failed to parse address type "+e)}}function x(e){var t,a;return null!==(t=null===(a=l.RustModule.WalletV4.ByronAddress.from_address(e))||void 0===a?void 0:a.to_base58())&&void 0!==t?t:e.to_hex()}function b(e){var t,a;return null!==(t=null===(a=l.RustModule.WalletV4.RewardAddress.from_address(l.RustModule.WalletV4.Address.from_hex(e)))||void 0===a?void 0:a.payment_cred())&&void 0!==t?t:(0,c.fail)("unwrapStakingKey staking key invalid")}function A(e){return e===l.RustModule.WalletV4.CertificateKind.VoteDelegation||e===l.RustModule.WalletV4.CertificateKind.StakeAndVoteDelegation||e===l.RustModule.WalletV4.CertificateKind.VoteRegistrationAndDelegation||e===l.RustModule.WalletV4.CertificateKind.StakeVoteRegistrationAndDelegation}},84174:(e,t,a)=>{a.d(t,{networks:()=>E,isTestnet:()=>I,isCardanoHaskell:()=>k,getCardanoHaskellBaseConfig:()=>C,cardanoHaskellConfigCombine:()=>D,getCardanoHaskellBaseConfigCombined:()=>M,defaultAssets:()=>S,getNetworkById:()=>R});var r,s,n=a(94473),o=a.n(n),i=a(86902),l=a.n(i),d=a(2991),u=a.n(d),c=a(80426),p=a.n(c),g=a(51942),h=a.n(g),f=a(32366),w=a.n(f),y=a(59340),m=a.n(y),x=a(56474),b=a.n(x),A=a(66905),v=a(85412),_=a(38079);const T=b()({Haskell:0}),E=b()({CardanoMainnet:{NetworkId:0,NetworkName:"Cardano Mainnet",NetworkFeatureName:"mainnet",Backend:{BackendService:v.Z.isTest()?"http://localhost:21000":"https://api.yoroiwallet.com",TokenInfoService:"https://cdn.yoroiwallet.com",BackendServiceZero:"https://zero.yoroiwallet.com"},BaseConfig:[b()({StartAt:0,ChainNetworkId:"1",ByronNetworkId:764824073,GenesisDate:"1506203091000",SlotsPerEpoch:21600,SlotDuration:20}),b()({StartAt:208,SlotsPerEpoch:432e3,SlotDuration:1,PerEpochPercentageReward:69344,LinearFee:{coefficient:"44",constant:"155381"},MinimumUtxoVal:"1000000",CoinsPerUtxoWord:"34482",PoolDeposit:"500000000",KeyDeposit:"2000000"}),b()({CoinsPerUtxoByte:"4310"})],CoinType:A.M8.CARDANO,Fork:T.Haskell},CardanoPreprodTestnet:{NetworkId:250,NetworkName:"Cardano Preprod Testnet",NetworkFeatureName:"preprod",Backend:{BackendService:v.Z.isTest()?"http://localhost:21000":"https://preprod-backend.yoroiwallet.com",TokenInfoService:"https://stage-cdn.yoroiwallet.com",BackendServiceZero:"https://yoroi-backend-zero-preprod.emurgornd.com"},BaseConfig:[b()({StartAt:0,ChainNetworkId:"0",ByronNetworkId:1,GenesisDate:"1654041600000",SlotsPerEpoch:21600,SlotDuration:20}),b()({StartAt:0,SlotsPerEpoch:432e3,SlotDuration:1,PerEpochPercentageReward:69344,LinearFee:{coefficient:"44",constant:"155381"},CoinsPerUtxoWord:"34482",MinimumUtxoVal:"1000000",PoolDeposit:"500000000",KeyDeposit:"2000000"}),b()({CoinsPerUtxoByte:"4310"})],CoinType:A.M8.CARDANO,Fork:T.Haskell},CardanoPreviewTestnet:{NetworkId:350,NetworkName:"Cardano Preview Testnet",NetworkFeatureName:"preview",Backend:{BackendService:v.Z.isTest()?"http://localhost:21000":"https://preview-backend.emurgornd.com",TokenInfoService:"https://stage-cdn.yoroiwallet.com",BackendServiceZero:"https://yoroi-backend-zero-preview.emurgornd.com"},BaseConfig:[b()({StartAt:0,ChainNetworkId:"0",ByronNetworkId:2,GenesisDate:"1666656000000",SlotsPerEpoch:21600,SlotDuration:20}),b()({StartAt:0,SlotsPerEpoch:86400,SlotDuration:1,PerEpochPercentageReward:69344,LinearFee:{coefficient:"44",constant:"155381"},CoinsPerUtxoWord:"34482",MinimumUtxoVal:"1000000",PoolDeposit:"500000000",KeyDeposit:"2000000"}),b()({CoinsPerUtxoByte:"4310"})],CoinType:A.M8.CARDANO,Fork:T.Haskell},CardanoSanchoTestnet:{NetworkId:450,NetworkName:"Cardano Sancho Testnet",NetworkFeatureName:"sanchonet",Backend:{BackendService:v.Z.isTest()?"http://localhost:21000":"https://sanchonet-backend.yoroiwallet.com",TokenInfoService:"https://stage-cdn.yoroiwallet.com",BackendServiceZero:"https://yoroi-backend-zero-sanchonet.emurgornd.com"},BaseConfig:[b()({StartAt:0,ChainNetworkId:"0",ByronNetworkId:4,GenesisDate:"1686789000000",SlotsPerEpoch:4320,SlotDuration:20}),b()({StartAt:0,SlotsPerEpoch:86400,SlotDuration:1,PerEpochPercentageReward:69344,LinearFee:{coefficient:"44",constant:"155381"},CoinsPerUtxoWord:"34482",MinimumUtxoVal:"1000000",PoolDeposit:"500000000",KeyDeposit:"2000000"}),b()({CoinsPerUtxoByte:"4310"})],CoinType:A.M8.CARDANO,Fork:T.Haskell}});function I(e){return e.NetworkId!==E.CardanoMainnet.NetworkId}function k(e){return e.CoinType===A.M8.CARDANO&&e.Fork===T.Haskell}function C(e){if(!k(e))throw new Error(`Incorrect network type ${m()(e)}`);return e.BaseConfig}function D(e){return w()(e).call(e,((e,t)=>h()(e,t)),{})}function M(e){return D(C(e))}const S=p()(r=u()(s=l()(E)).call(s,(e=>E[e]))).call(r,(e=>{if(k(e))return[{NetworkId:e.NetworkId,Identifier:_.hd.Cardano,IsDefault:!0,IsNFT:!1,Metadata:{type:"Cardano",policyId:_.hd.Cardano,assetName:_.hd.Cardano,ticker:e===E.CardanoPreprodTestnet||e===E.CardanoPreviewTestnet||e===E.CardanoSanchoTestnet?"TADA":"ADA",logo:null,longName:null,numberOfDecimals:6}}];throw new Error(`Missing default asset for network type ${m()(e)}`)}));function R(e){var t;const a=o()(t=l()(E)).call(t,(t=>E[t].NetworkId===e));if(!a)throw new Error("network not found by id: "+e);return E[a]}},70184:(e,t,a)=>{a.d(t,{Fb:()=>x,od:()=>M,Qo:()=>S});var r=a(86902),s=a.n(r),n=a(78914),o=a.n(n),i=(a(36384),a(59340),a(10062),a(94473)),l=a.n(i),d=a(2991),u=a.n(d),c=a(47302),p=a.n(c),g=a(1499),h=a(68469),f=(a(34786),a(86335)),w=a(95667),y=(a(52367),a(66905),a(87315)),m=a(90649);function x(e){var t,a,r,s,n,o;const i=e.signRequest.unsignedTx.build(),d=function(e){var t;for(const t of e)(0,g.sV)(t.addressing);return p()(t=u()(e).call(e,(e=>({txHashHex:e.tx_hash,outputIndex:e.tx_index,path:e.addressing.path})))).call(t,b)}(e.signRequest.senderUtxos),c=function(e){const t=[];for(const n of(0,m.iterateLenGet)(e.txOutputs)){var a,r,s;const o=n.address(),i=(0,w.toHexOrBase58)(o),d=null!==(a=null===(r=n.data_hash())||void 0===r?void 0:r.to_hex())&&void 0!==a?a:null,u=l()(s=e.changeAddrs).call(s,(e=>i===e.address));if(null!=u){(0,g.sV)(u.addressing);const a=D({networkId:e.networkId,address:o,path:u.addressing.path,addressingMap:e.addressingMap});t.push({amount:n.amount().coin().to_str(),tokenBundle:A(n.amount().multiasset()),destination:{type:h.TxOutputDestinationType.DEVICE_OWNED,params:a},datumHashHex:d})}else t.push({amount:n.amount().coin().to_str(),tokenBundle:A(n.amount().multiasset()),destination:{type:h.TxOutputDestinationType.THIRD_PARTY,params:{addressHex:o.to_hex()}},datumHashHex:d})}return t}({networkId:e.networkId,txOutputs:i.outputs(),changeAddrs:e.signRequest.changeAddr,addressingMap:e.addressingMap}),y=i.withdrawals(),x=i.certs(),v=[];null!=y&&y.len()>0&&v.push(..._(y,e.addressingMap));const T=[];let E;if(null!=x&&x.len()>0&&T.push(...C(e.networkId,x,e.addressingMap)),e.signRequest.ledgerNanoCatalystRegistrationTxSignData){const{votingPublicKey:t,stakingKeyPath:a,nonce:r,paymentKeyPath:s}=e.signRequest.ledgerNanoCatalystRegistrationTxSignData;E=e.cip36?{type:h.TxAuxiliaryDataType.CIP36_REGISTRATION,params:{format:h.CIP36VoteRegistrationFormat.CIP_36,delegations:[{type:h.CIP36VoteDelegationType.KEY,voteKeyHex:t.replace(/^0x/,""),weight:1}],stakingPath:a,paymentDestination:{type:h.TxOutputDestinationType.DEVICE_OWNED,params:{type:h.AddressType.BASE_PAYMENT_KEY_STAKE_KEY,params:{spendingPath:s,stakingPath:a}}},nonce:r,votingPurpose:0}}:{type:h.TxAuxiliaryDataType.CIP36_REGISTRATION,params:{format:h.CIP36VoteRegistrationFormat.CIP_15,voteKeyHex:t.replace(/^0x/,""),stakingPath:a,paymentDestination:{type:h.TxOutputDestinationType.DEVICE_OWNED,params:{type:h.AddressType.BASE_PAYMENT_KEY_STAKE_KEY,params:{spendingPath:s,stakingPath:a}}},nonce:r}}}else null!=e.signRequest.metadata&&(E={type:h.TxAuxiliaryDataType.ARBITRARY_HASH,params:{hashHex:f.RustModule.WalletV4.hash_auxiliary_data(e.signRequest.metadata).to_hex()}});return{signingMode:h.TransactionSigningMode.ORDINARY_TRANSACTION,tx:{inputs:d,outputs:c,ttl:null!==(t=null===(a=i.ttl_bignum())||void 0===a?void 0:a.to_str())&&void 0!==t?t:null,validityIntervalStart:null!==(r=null===(s=i.validity_start_interval_bignum())||void 0===s?void 0:s.to_str())&&void 0!==r?r:null,fee:i.fee().to_str(),network:{networkId:e.networkId,protocolMagic:e.byronNetworkMagic},withdrawals:0===v.length?null:v,certificates:0===T.length?null:T,auxiliaryData:E,scriptDataHashHex:null!==(n=null===(o=i.script_data_hash())||void 0===o?void 0:o.to_hex())&&void 0!==n?n:null},additionalWitnessPaths:[],options:{tagCborSets:!1}}}function b(e,t){return e.txHashHex!==t.txHashHex?e.txHashHex<t.txHashHex?-1:1:e.outputIndex-t.outputIndex}function A(e){var t;if(null==e)return null;const a=u()(t=(0,m.iterateLenGetMap)(e)).call(t,(([e,t])=>{var a;const r=u()(a=(0,m.iterateLenGetMap)(t).nonNullValue()).call(a,(([e,t])=>({assetNameHex:(0,m.bytesToHex)(e.name()),amount:t.to_str()}))).toArray();return p()(r).call(r,((e,t)=>v(e.assetNameHex,t.assetNameHex))),{policyIdHex:e.to_hex(),tokens:r}})).toArray();return p()(a).call(a,((e,t)=>v(e.policyIdHex,t.policyIdHex))),a}function v(e,t){return e.length<t.length?-1:e.length>t.length?1:e<t?-1:e>t?1:0}function _(e,t){const a=[];for(const[r,s]of(0,m.iterateLenGetMap)(e).nonNullValue()){const e=r.to_address().to_hex(),n=t(e);if(null==n)throw new Error(`formatLedgerWithdrawals Ledger can only withdraw from own address ${e}`);a.push({amount:s.to_str(),stakeCredential:{type:h.CredentialParamsType.KEY_PATH,keyPath:n.path}})}return a}function T(e){const t=e.anchor();return null==t?void 0:{url:t.url().url(),hashHex:t.anchor_data_hash().to_hex()}}function E(e,t){return{type:h.CredentialParamsType.KEY_PATH,keyPath:t(e.stake_credential())}}function I(e,t){return{type:h.CredentialParamsType.KEY_PATH,keyPath:t(e.voting_credential())}}function k(e){const t=e.drep();switch(t.kind()){case f.RustModule.WalletV4.DRepKind.KeyHash:return{type:h.DRepParamsType.KEY_HASH,keyHashHex:(0,m.forceNonNull)(t.to_key_hash()).to_hex()};case f.RustModule.WalletV4.DRepKind.ScriptHash:return{type:h.DRepParamsType.SCRIPT_HASH,scriptHashHex:(0,m.forceNonNull)(t.to_script_hash()).to_hex()};case f.RustModule.WalletV4.DRepKind.AlwaysAbstain:return{type:h.DRepParamsType.ABSTAIN};case f.RustModule.WalletV4.DRepKind.AlwaysNoConfidence:return{type:h.DRepParamsType.NO_CONFIDENCE};default:throw new Error("Ledger: Unsupported dRep kind: "+t.to_hex())}}function C(e,t,a){var r;const s=t=>{const r=f.RustModule.WalletV4.RewardAddress.new(e,t).to_address().to_hex(),s=a(r);if(null==s)throw new Error(`getPath Ledger only supports certificates from own address ${r}`);return s.path};return u()(r=(0,m.iterateLenGet)(t)).call(r,(e=>function(e,t){const a=e.kind();switch(a){case f.RustModule.WalletV4.CertificateKind.StakeRegistration:return function(e,t){const a=E(e,t),r=e.coin();return null==r?{type:h.CertificateType.STAKE_REGISTRATION,params:{stakeCredential:a}}:{type:h.CertificateType.STAKE_REGISTRATION_CONWAY,params:{stakeCredential:a,deposit:r.to_str()}}}((0,m.forceNonNull)(e.as_stake_registration()),t);case f.RustModule.WalletV4.CertificateKind.StakeDeregistration:return function(e,t){const a=E(e,t),r=e.coin();return null==r?{type:h.CertificateType.STAKE_DEREGISTRATION,params:{stakeCredential:a}}:{type:h.CertificateType.STAKE_DEREGISTRATION_CONWAY,params:{stakeCredential:a,deposit:r.to_str()}}}((0,m.forceNonNull)(e.as_stake_deregistration()),t);case f.RustModule.WalletV4.CertificateKind.StakeDelegation:return function(e,t){return{type:h.CertificateType.STAKE_DELEGATION,params:{stakeCredential:E(e,t),poolKeyHashHex:e.pool_keyhash().to_hex()}}}((0,m.forceNonNull)(e.as_stake_delegation()),t);case f.RustModule.WalletV4.CertificateKind.VoteDelegation:return function(e,t){return{type:h.CertificateType.VOTE_DELEGATION,params:{stakeCredential:E(e,t),dRep:k(e)}}}((0,m.forceNonNull)(e.as_vote_delegation()),t);case f.RustModule.WalletV4.CertificateKind.DRepRegistration:{const a=(0,m.forceNonNull)(e.as_drep_registration());return{type:h.CertificateType.DREP_REGISTRATION,params:{dRepCredential:I(a,t),anchor:T(a),deposit:a.coin().to_str()}}}case f.RustModule.WalletV4.CertificateKind.DRepUpdate:{const a=(0,m.forceNonNull)(e.as_drep_update());return{type:h.CertificateType.DREP_UPDATE,params:{dRepCredential:I(a,t),anchor:T(a)}}}case f.RustModule.WalletV4.CertificateKind.DRepDeregistration:{const a=(0,m.forceNonNull)(e.as_drep_deregistration());return{type:h.CertificateType.DREP_DEREGISTRATION,params:{dRepCredential:I(a,t),deposit:a.coin().to_str()}}}case f.RustModule.WalletV4.CertificateKind.StakeAndVoteDelegation:case f.RustModule.WalletV4.CertificateKind.StakeRegistrationAndDelegation:case f.RustModule.WalletV4.CertificateKind.VoteRegistrationAndDelegation:case f.RustModule.WalletV4.CertificateKind.StakeVoteRegistrationAndDelegation:throw new Error(`formatLedgerCertificates Ledger doesn't support combinatory certificate types (${a}), use multiple simple certificates instead! `+e.to_hex());default:throw new Error("formatLedgerCertificates Ledger doesn't support this certificate type! "+e.to_hex())}}(e,s))).toArray()}function D(e){if(f.RustModule.WalletV4.ByronAddress.from_address(e.address))return{type:h.AddressType.BYRON,params:{spendingPath:e.path}};{const r=f.RustModule.WalletV4.BaseAddress.from_address(e.address);if(r){const s=f.RustModule.WalletV4.RewardAddress.new(e.networkId,r.stake_cred()).to_address().to_hex(),n=e.addressingMap(s);if(null==n){var t,a;const s=r.stake_cred(),n=null!==(t=s.to_keyhash())&&void 0!==t?t:s.to_scripthash(),o=null!==(a=null==n?void 0:n.to_hex())&&void 0!==a?a:(0,m.fail)("toLedgerAddressParameters unknown hash type");return{type:h.AddressType.BASE_PAYMENT_KEY_STAKE_KEY,params:{spendingPath:e.path,stakingKeyHashHex:o}}}return{type:h.AddressType.BASE_PAYMENT_KEY_STAKE_KEY,params:{spendingPath:e.path,stakingPath:n.path}}}}{const t=f.RustModule.WalletV4.PointerAddress.from_address(e.address);if(t){const a=t.stake_pointer();return{type:h.AddressType.POINTER_KEY,params:{spendingPath:e.path,stakingBlockchainPointer:{blockIndex:a.slot(),txIndex:a.tx_index(),certificateIndex:a.cert_index()}}}}}if(f.RustModule.WalletV4.EnterpriseAddress.from_address(e.address))return{type:h.AddressType.ENTERPRISE_KEY,params:{spendingPath:e.path}};if(f.RustModule.WalletV4.RewardAddress.from_address(e.address))return{type:h.AddressType.REWARD_KEY,params:{stakingPath:e.path}};throw new Error("toLedgerAddressParameters unknown address type")}function M(e,t,a,r,n,i=[]){var d,c,p,g,w,y,x,b,v,T,E,I,k;const D=f.RustModule.WalletV4.TransactionBody.from_hex(e);function M(e){var t;return u()(t=(0,m.iterateLenGet)(e)).call(t,(e=>{var t;const a=e.transaction_id().to_hex(),r=e.index(),s=l()(n).call(n,(e=>e.tx_hash===a&&e.tx_index===r)),o=null!==(t=null==s?void 0:s.addressing.path)&&void 0!==t?t:null;return{txHashHex:a,outputIndex:r,path:o}})).toArray()}function S(e){const a=e.serialization_format()===f.RustModule.WalletV4.CborContainerType.Map,s=e.address();let n;const o=f.RustModule.WalletV4.ByronAddress.from_address(s),i=f.RustModule.WalletV4.PointerAddress.from_address(s);if((o||i)&&(n={type:h.TxOutputDestinationType.THIRD_PARTY,params:{addressHex:s.to_hex()}}),f.RustModule.WalletV4.EnterpriseAddress.from_address(s)){const e=r(s.to_hex());n=e?{type:h.TxOutputDestinationType.DEVICE_OWNED,params:{type:h.AddressType.ENTERPRISE_KEY,params:{spendingPath:e}}}:{type:h.TxOutputDestinationType.THIRD_PARTY,params:{addressHex:s.to_hex()}}}const l=f.RustModule.WalletV4.BaseAddress.from_address(s);if(l){const e=f.RustModule.WalletV4.EnterpriseAddress.new(t,l.payment_cred()).to_address().to_hex(),a=r(e);if(a){const e=l.stake_cred(),s=f.RustModule.WalletV4.RewardAddress.new(t,e).to_address().to_hex(),o=r(s);if(o)n={type:h.TxOutputDestinationType.DEVICE_OWNED,params:{type:h.AddressType.BASE_PAYMENT_KEY_STAKE_KEY,params:{spendingPath:a,stakingPath:o}}};else{const t=e.to_keyhash(),r=e.to_scripthash();if(t)n={type:h.TxOutputDestinationType.DEVICE_OWNED,params:{type:h.AddressType.BASE_PAYMENT_KEY_STAKE_KEY,params:{spendingPath:a,stakingKeyHashHex:t.to_hex()}}};else{if(!r)throw new Error("unexpected stake credential type in base address");n={type:h.TxOutputDestinationType.DEVICE_OWNED,params:{type:h.AddressType.BASE_PAYMENT_KEY_STAKE_SCRIPT,params:{spendingPath:a,stakingScriptHashHex:r.to_hex()}}}}}}else n={type:h.TxOutputDestinationType.THIRD_PARTY,params:{addressHex:s.to_hex()}}}if(!n)throw new Error("not expecting to pay to reward address");const d=e.amount().coin().to_str(),u=A(e.amount().multiasset()),c=e.data_hash(),p=e.plutus_data(),g=e.script_ref();if(a||g||p){let e=null;return p?e={type:h.DatumType.INLINE,datumHex:p.to_hex()}:c&&(e={type:h.DatumType.HASH,datumHashHex:c.to_hex()}),{format:h.TxOutputFormat.MAP_BABBAGE,amount:d,destination:n,tokenBundle:u,datum:e,referenceScriptHex:g?g.to_hex():null}}return{format:h.TxOutputFormat.ARRAY_LEGACY,amount:d,destination:n,tokenBundle:u,datumHashHex:c?c.to_hex():null}}const R=u()(d=(0,m.iterateLenGet)(D.outputs())).call(d,S).toArray(),W=[],B=[];function P(e){const t=r(e);if(t)return{path:t}}f.RustModule.WasmScope((e=>{var a,s;function n(a){const s=e.WalletV4.Ed25519KeyHash.from_hex(a),n=e.WalletV4.EnterpriseAddress.new(t,e.WalletV4.Credential.from_keyhash(s)).to_address().to_hex(),o=e.WalletV4.RewardAddress.new(t,e.WalletV4.Credential.from_keyhash(s)).to_address().to_hex();return r(n)||r(o)}o()(a=u()(s=(0,m.iterateLenGet)(D.required_signers())).call(s,(e=>e.to_hex())).unique()).call(a,(e=>{const t=n(e);null!=t?(B.push({type:h.TxRequiredSignerType.PATH,path:t}),W.push(t)):B.push({type:h.TxRequiredSignerType.HASH,hashHex:e})}));for(const e of i||[]){const t=n(e);null!=t&&W.push(t)}}));let N=null;const F=D.certs();F&&(N=C(t,F,P));let O=null;const L=D.withdrawals();L&&(O=_(L,P));let H=null;const U=D.auxiliary_data_hash();U&&(H={type:h.TxAuxiliaryDataType.ARBITRARY_HASH,params:{hashHex:U.to_hex()}});let V=null;const G=D.collateral();G&&(V=M(G));const j=(0,m.maybe)(D.collateral_return(),S);let K=null;const Z=D.reference_inputs();Z&&(K=M(Z));let z=h.TransactionSigningMode.ORDINARY_TRANSACTION;return V&&(z=h.TransactionSigningMode.PLUTUS_TRANSACTION),{signingMode:z,tx:{network:{networkId:t,protocolMagic:a},inputs:M(D.inputs()),outputs:R,fee:D.fee().to_str(),ttl:null!==(c=null===(p=D.ttl_bignum())||void 0===p?void 0:p.to_str())&&void 0!==c?c:null,validityIntervalStart:null!==(g=null===(w=D.validity_start_interval_bignum())||void 0===w?void 0:w.to_str())&&void 0!==g?g:null,certificates:N,withdrawals:O,auxiliaryData:H,mint:null!==(y=null===(x=JSON.parse(null!==(b=null===(v=D.mint())||void 0===v?void 0:v.to_json())&&void 0!==b?b:"null"))||void 0===x?void 0:u()(x).call(x,(([e,t])=>{var a;return{policyIdHex:e,tokens:u()(a=s()(t)).call(a,(e=>({assetNameHex:e,amount:t[e]})))}})))&&void 0!==y?y:null,scriptDataHashHex:null!==(T=null===(E=D.script_data_hash())||void 0===E?void 0:E.to_hex())&&void 0!==T?T:null,collateralInputs:V,requiredSigners:B.length>0?B:null,includeNetworkId:null!=D.network_id(),collateralOutput:j,totalCollateral:null!==(I=null===(k=D.total_collateral())||void 0===k?void 0:k.to_str())&&void 0!==I?I:null,referenceInputs:K},additionalWitnessPaths:W}}function S(e,t,a){const r=f.RustModule.WalletV4.FixedTransaction.from_hex(e),s=a.addressing.startLevel+a.addressing.path.length-1;for(const e of t){const t={path:e.path,startLevel:1};(0,g.sV)(t);const n=(0,y.c)({addressing:t,startingFrom:{level:s,key:a.key}}),o=f.RustModule.WalletV4.Vkeywitness.new(f.RustModule.WalletV4.Vkey.new(n.to_raw_key()),f.RustModule.WalletV4.Ed25519Signature.from_hex(e.witnessSignatureHex));r.add_vkey_witness(o)}return r.to_hex()}a(27649)},84184:(e,t,a)=>{a.d(t,{T$:()=>J,fi:()=>ee,u2:()=>te,OJ:()=>ae});var r=a(94198),s=a.n(r),n=a(86902),o=a.n(n),i=(a(51942),a(89400)),l=a.n(i),d=a(77149),u=a.n(d),c=a(93476),p=a.n(c),g=a(78580),h=a.n(g),f=a(32366),w=a.n(f),y=a(59340),m=a.n(y),x=a(20116),b=a.n(x),A=a(36384),v=a.n(A),_=a(56474),T=a.n(_),E=a(2991),I=a.n(E),k=a(69301),C=a.n(k),D=a(66419),M=a.n(D),S=a(39392),R=a.n(S),W=a(905),B=a(21131),P=a(86335),N=a(52367),F=a(95667),O=a(55343),L=a(38079),H=a(27649),U=a(90649),V=(a(84174),a(4158),a(94346)),G=a(34704),j=a(71265),K=a(27423),Z=a(17462),z=a.n(Z),Y=a(87315),q=a(48764).Buffer;const $=7200;function J(e,t,a,r,s,n){var o;const i=new(R());for(const e of t)i.set({amount:e.amount,receiver:e.receiver,tx_hash:e.tx_hash,tx_index:e.tx_index,utxo_id:e.utxo_id,assets:e.assets},e);const l=function(e,t,a,r,s,n){var o;const i=w()(o=I()(t).call(t,(e=>new W.Z(e.amount)))).call(o,((e,t)=>e.plus(t)),new W.Z(0));if(i.isZero())throw new B.r7;const l=P.RustModule.WalletV4TxBuilder(r);l.set_ttl(a.plus($).toNumber());for(const e of t)if(Q(l,void 0,e,!1,n)===X.OVERFLOW)throw new B.gC;let d;void 0!==s&&l.set_auxiliary_data(s);try{d=l.min_fee().to_str()}catch(e){if(/Maximum transaction size of \d+ exceeded\./.test(e))throw new B.o_;throw e}if(i.lt(d))throw new B.r7;{const t=(0,F.normalizeToAddress)(e.address);if(null==t)throw new Error("sendAllUnsignedTxFromUtxo receiver not a valid Shelley address");let a=!1;try{a=l.add_change_if_needed(t)}catch(e){var u;if(!h()(u=String(e)).call(u,"Not enough ADA"))throw console.error("Failed to construct send-all output!",e),e}if(!a)throw new B.r7}const c=(()=>{if(null==e.addressing)return[];const{addressing:t}=e;return[{addressing:t,address:e.address,values:(0,H.$Z)(l.get_explicit_output(),{defaultNetworkId:r.networkId,defaultIdentifier:L.hd.Cardano})}]})();return{senderUtxos:t,txBuilder:l,changeAddr:c}}(e,M()(C()(i).call(i)),a,r,s,n);return{senderUtxos:I()(o=l.senderUtxos).call(o,(e=>{const t=i.get(e);if(null==t)throw new Error("sendAllUnsignedTx utxo reference was changed. Should not happen");return t})),txBuilder:l.txBuilder,changeAddr:l.changeAddr,certificates:[]}}const X=T()({VALID:0,TOO_SMALL:1,OVERFLOW:2,NO_NEED:3});function Q(e,t,a,r,s,n){const o=(0,F.normalizeToAddress)(a.receiver);if(null==o)throw new Error("addUtxoInput input not a valid Shelley address");const i=(c=a,P.RustModule.WalletV4.TransactionInput.new(P.RustModule.WalletV4.TransactionHash.from_hex(c.tx_hash),c.tx_index)),l=(0,H.Dw)(a),d=()=>{const t=e.get_explicit_input().checked_add(e.get_implicit_input());try{t.checked_add(l)}catch(e){return X.OVERFLOW}return X.VALID},u=(()=>{var n,u;if(null==t)return d();const c={defaultNetworkId:s,defaultIdentifier:L.hd.Cardano},p=new(v())(I()(n=a.assets).call(n,(e=>e.assetId))),g=(0,H.$Z)(t.value,c),h=b()(u=g.nonDefaultEntries()).call(u,(e=>p.has(e.identifier)));return g.getDefaultEntry().amount.gt(0)&&new W.Z(a.amount).gt(0)&&h.push(g.getDefaultEntry()),1===h.length&&h[0].identifier===c.defaultIdentifier&&r&&new W.Z(e.fee_for_input(o,i,l).to_str()).gt(a.amount)?X.TOO_SMALL:d()})();var c;if(u!==X.VALID)return u;if(null==n)(0,U.logErr)((()=>{e.add_regular_input(o,i,l)}),"Failed to add a regular input");else if(null!=n.nativeScript){const t=(0,U.logErr)((()=>P.RustModule.WalletV4.NativeScript.from_bytes((0,U.hexToBytes)(n.nativeScript))),`Failed to parse witness.nativeScript: ${m()(n)}`);(0,U.logErr)((()=>{e.add_native_script_input(t,i,l)}),"Failed to add a native script input")}else if(null!=n.plutusScript){const t=(0,U.logErr)((()=>P.RustModule.WalletV4.PlutusScript.from_bytes((0,U.hexToBytes)(n.plutusScript))),`Failed to parse witness.plutusScript: ${m()(n)}`),a=(0,U.logErr)((()=>P.RustModule.WalletV4.PlutusData.from_bytes((0,U.hexToBytes)(n.datum))),`Failed to parse witness.datum: ${m()(n)}`),r=(0,U.logErr)((()=>P.RustModule.WalletV4.Redeemer.from_bytes((0,U.hexToBytes)(n.redeemer))),`Failed to parse witness.redeemer: ${m()(n)}`);(0,U.logErr)((()=>{e.add_plutus_script_input(P.RustModule.WalletV4.PlutusWitness.new(t,a,r),i,l)}),"Failed to add a plutus script input")}return X.VALID}async function ee(e,t,a,r,s,n,o,i,d,c){var g;const f=new(R());for(const e of a)f.set({amount:e.amount,receiver:e.receiver,tx_hash:e.tx_hash,tx_index:e.tx_index,utxo_id:e.utxo_id,assets:e.assets},e);const y=await async function(e,t,a,r,s,n,o,i,d,c){var g;await P.RustModule.load(),(0,V.setRuntime)(P.RustModule.CrossCsl.init);const f={networkId:s.networkId,linearFee:{coefficient:s.linearFeeCoefficient,constant:s.linearFeeConstant},coinsPerUtxoByte:s.coinsPerUtxoByte,poolDeposit:s.poolDeposit,keyDeposit:s.keyDeposit,maxValueSize:5e3,maxTxSize:16384,memPriceFrom:577,memPriceTo:1e3,stepPriceFrom:721,stepPriceTo:1e7,coinsPerUtxoWord:8*Number(s.coinsPerUtxoByte)+2},y=new G.UTxOSet(await p().all(I()(a).call(a,se))),m=await K.TxBuilder.new(f,y),x=u()(e).call(e,(e=>null!=e.data&&null!=e.dataHash)),A=await K.SendRequest.from(I()(e).call(e,(t=>{var a;const r=t.amount.getDefaultEntry().amount.toString(),s=b()(a=l()(t.amount)).call(a,(({identifier:t})=>t!==e[0].amount.defaults.defaultIdentifier));return{data:t.data,dataHash:t.dataHash,receiver:t.address,value:new G.Value(new G.Amount(r),G.NativeAssets.from(I()(s).call(s,(e=>{const[t,a]=e.identifier.split(".");return{asset:{policy:(0,U.hexToBytes)(t),name:(0,U.hexToBytes)(a)},amount:new G.Amount(e.amount.toString())}}))))}})));try{await m.withSendRequest(A)}catch(e){var v;if(e instanceof j.NotEnoughMoneyToSendError)throw new B.r7;if(e instanceof j.OverflowError)throw new B.gC;if(h()(v=String(e)).call(v,"less than the minimum UTXO value"))throw new B.JZ;throw e}if(d&&await m.setAuxiliaryData(d.to_bytes()),n.length>0){const e=w()(n).call(n,((e,t)=>(e.add(t),e)),P.RustModule.WalletV4.Certificates.new());await m.setCertificates(e.to_bytes())}if(o.length>0){const e=w()(o).call(o,((e,t)=>(e.insert(t.address,t.amount),e)),P.RustModule.WalletV4.Withdrawals.new());await m.setWithdrawals(e.to_bytes())}m.setTtl(r.plus($).toNumber());const _=t&&await G.WalletAddress.from(t.address,V.WalletType.Shelley,{path:t.addressing.path,start:t.addressing.startLevel});let T;x&&await m.calcScriptDataHash("default"),await m.addChangeAndFee(_);try{T=await m.build()}catch(e){if(e instanceof j.NoOutputError)throw new B.hH;throw e}const E=[];T.change&&E.push({address:T.change.address.hex,addressing:{path:T.change.address.spendingKeyInfo.path,startLevel:T.change.address.spendingKeyInfo.start},values:re(T.change.value,c,L.hd.Cardano)});const k=new(R())(I()(a).call(a,(e=>[e.utxo_id,e])));return{senderUtxos:I()(g=T.inputs.asArray()).call(g,(e=>k.get(e.tx+e.index))),txBuilder:T.builder.wasm,changeAddr:E}}(e,t,M()(C()(f).call(f)),r,s,n,o,0,d,c);return{senderUtxos:I()(g=y.senderUtxos).call(g,(e=>{const t=f.get(e);if(null==t)throw new Error("newAdaUnsignedTx utxo reference was changed. Should not happen");return t})),txBuilder:y.txBuilder,changeAddr:y.changeAddr,certificates:n}}async function te(e,t,a,r,n,i,d,u,c,g,f,w){var y;const m=e=>({amount:e.amount,receiver:e.receiver,tx_hash:e.tx_hash,tx_index:e.tx_index,utxo_id:e.utxo_id,assets:e.assets}),x=[],A=new(R()),v=new(R());for(const[e,t]of n){const a=m(e);x.push([a,t]),A.set(a,e)}for(const e of i)v.set(m(e),e);const _=await async function(e,t,a,r,n,i,d,u,c,g,f,w){var y,m,x;await P.RustModule.load(),(0,V.setRuntime)(P.RustModule.CrossCsl.init);const A={linearFee:{coefficient:f.linearFeeCoefficient,constant:f.linearFeeConstant},coinsPerUtxoByte:f.coinsPerUtxoByte,poolDeposit:f.poolDeposit,keyDeposit:f.keyDeposit,maxValueSize:5e3,maxTxSize:16384,memPriceFrom:577,memPriceTo:1e3,stepPriceFrom:721,stepPriceTo:1e7,coinsPerUtxoWord:8*Number(f.coinsPerUtxoByte)+2},v=new G.UTxOSet(await p().all(I()(i).call(i,se))),_=await K.TxBuilder.new(A,v);await _.addRequiredInputs(await p().all(I()(n).call(n,(async([e,t])=>{let a;if(null==t)a=[];else if(t.nativeScript)a=[{type:"native",nativeScript:t.nativeScript}];else{if(!t.plutusScript)throw new Error("unxpected witness value");a=[{type:"plutus",plutusScript:t.plutusScript,datum:t.datum,redeemer:t.redeemer}]}return[await se(e),...a]})))),null!=c?await _.setTtl(c):await _.setTtl(d.plus($).toNumber()),null!=u&&await _.setValidityStartInterval(u),null!=g&&await _.addRequiredSigners(g);const T=null!==(y=a.metadata)&&void 0!==y?y:{};if(o()(T).length>0){const e={};for(const t of o()(T))e[s()(t,10)]=T[t];await _.withMetadata(e)}a.nativeScripts&&await _.addNativeScripts(a.nativeScripts),await _.addMint(t);const E=await K.SendRequest.from(I()(e).call(e,(t=>{var a;const r=t.amount.getDefaultEntry().amount.toString(),s=b()(a=l()(t.amount)).call(a,(({identifier:t})=>t!==e[0].amount.defaults.defaultIdentifier));return{receiver:t.address,value:new G.Value(new G.Amount(r),G.NativeAssets.from(I()(s).call(s,(e=>{const[t,a]=e.identifier.split(".");return{asset:{policy:(0,U.hexToBytes)(t),name:(0,U.hexToBytes)(a)},amount:new G.Amount(e.amount.toString())}}))))}})));try{await _.withSendRequest(E)}catch(e){var k;if(e instanceof j.NotEnoughMoneyToSendError)throw new B.r7;if(h()(k=String(e)).call(k,"less than the minimum UTXO value"))throw new B.JZ;throw e}await _.prepareForPlutus(f.networkId>0?"vasil":"default");const C=r&&await G.WalletAddress.from(r.address,V.WalletType.Shelley,{path:r.addressing.path,start:r.addressing.startLevel});await _.addChangeAndFee(C);const D=await _.build(),M=[];D.change&&M.push({address:D.change.address.hex,addressing:{path:D.change.address.spendingKeyInfo.path,startLevel:D.change.address.spendingKeyInfo.start},values:re(D.change.value,w,L.hd.Cardano)});const S=new(R())(I()(m=[...I()(n).call(n,(([e,t])=>e)),...i]).call(m,(e=>[e.utxo_id,e])));return{senderUtxos:I()(x=D.inputs.asArray()).call(x,(e=>S.get(e.tx+e.index))),txBuilder:D.builder.wasm,changeAddr:M}}(e,t,a,r,x,M()(C()(v).call(v)),d,u,c,g,f,w);return{senderUtxos:I()(y=_.senderUtxos).call(y,(e=>{const t=A.get(e)||v.get(e);if(null==t)throw new Error("newAdaUnsignedTx utxo reference was changed. Should not happen");return t})),txBuilder:_.txBuilder,changeAddr:_.changeAddr,certificates:[]}}function ae(e,t,a,r,s,n,o=[]){var i,l,d;const u=new(v()),c=new(v()),p=[];function g(e,t){const a=(0,F.normalizeToAddress)(e);if(null==a)throw new Error("signTransaction utxo not a valid Shelley address");const r=(0,F.getCardanoSpendingKeyHash)(a),s=a.to_hex();if(null!==r){if(void 0===r)throw new Error("signTransaction cannot sign script inputs");{const e=r.to_hex();c.has(e)||(c.add(e),p.push(t))}}else u.has(s)||(u.add(s),p.push(t))}for(const t of e)g(t.receiver,t);for(const e of o)g(e.address,e);let h,f,w;if(t instanceof P.RustModule.WalletV4.Transaction)h=t.body(),w=t.witness_set(),f=P.RustModule.WalletV4.hash_transaction(h);else if(t instanceof P.RustModule.WalletV4.TransactionBuilder){const e=t.build_tx();h=e.body(),w=e.witness_set(),f=P.RustModule.WalletV4.hash_transaction(h)}else if(t instanceof P.RustModule.WalletV4.TransactionBody)h=t,f=P.RustModule.WalletV4.hash_transaction(h);else{if(!(t instanceof q||t instanceof Uint8Array))throw new Error("unexpected tx body type");h=P.RustModule.WalletV4.TransactionBody.from_bytes(t),f=P.RustModule.WalletV4.TransactionHash.from_bytes(z()(32).update(t).digest("binary"))}const y=null!==(i=w)&&void 0!==i?i:P.RustModule.WalletV4.TransactionWitnessSet.new(),x=null!==(l=y.vkeys())&&void 0!==l?l:P.RustModule.WalletV4.Vkeywitnesses.new(),b=null!==(d=y.bootstraps())&&void 0!==d?d:P.RustModule.WalletV4.BootstrapWitnesses.new();!function(e,t,a,r,s,n){const o=I()(t).call(t,(e=>{if(e.addressing.startLevel+e.addressing.path.length-1!==N.CZ.ADDRESS.level)throw new Error("addWitnesses incorrect addressing size");return(0,Y.r)({addressing:e.addressing,startingFrom:{level:a,key:r}})}));for(let a=0;a<t.length;a++){const r=t[a],i=()=>{if(null!=r.receiver)return r.receiver;if(null!=r.address)return r.address;throw new Error(`[addWitnesses] Unexpected addressing for signing: ${m()(r)}`)},l=(0,F.normalizeToAddress)(i());if(null==l)throw new Error("addWitnesses utxo not a valid Shelley address");const d=P.RustModule.WalletV4.ByronAddress.from_address(l);if(null==d){const t=P.RustModule.WalletV4.make_vkey_witness(e,o[a].to_raw_key());s.add(t)}else{const t=P.RustModule.WalletV4.make_icarus_bootstrap_witness(e,d,o[a]);n.add(t)}}}(f,p,a,r,x,b);const A=new(v());for(const e of s)A.has(e)||(A.add(e),x.add(P.RustModule.WalletV4.Vkeywitness.from_hex(e)));b.len()>0&&y.set_bootstraps(b),x.len()>0&&y.set_vkeys(x);const _=null==n?null:P.RustModule.WalletV4.AuxiliaryData.from_bytes(q.from(n.to_bytes()));return P.RustModule.WalletV4.Transaction.new(h,y,_)}function re(e,t,a){var r;return new O.a([{amount:new W.Z(e.amount.toString()),identifier:a,networkId:t},...I()(r=e.assets.asArray()).call(r,(([e,a])=>({amount:new W.Z(a.toString()),identifier:e.getHash(),networkId:t})))],{defaultIdentifier:a,defaultNetworkId:t})}async function se(e){var t;return{address:await G.Address.from(e.receiver),tx:e.tx_hash,index:e.tx_index,value:new G.Value(new G.Amount(e.amount),G.NativeAssets.from(I()(t=e.assets).call(t,(e=>({asset:{policy:(0,U.hexToBytes)(e.policyId),name:(0,U.hexToBytes)(e.name)},amount:new G.Amount(e.amount)})))))}}},62021:(e,t,a)=>{a.d(t,{Gi:()=>E,fu:()=>M,Qo:()=>S});var r=a(86902),s=a.n(r),n=(a(36384),a(94473)),o=a.n(n),i=a(56474),l=a.n(i),d=a(47302),u=a.n(d),c=a(89400),p=a.n(c),g=a(2991),h=a.n(g),f=a(1499),w=a(5557),y=a(74057),m=(a(34786),a(52367)),x=a(66905),b=a(86335),A=a(95667),v=a(17462),_=a.n(v),T=(a(87315),a(90649));function E(e,t,a){var r,s,n;const i=(()=>{const t=e.senderUtxos[0];if(t.addressing.startLevel!==m.CZ.PURPOSE.level)throw new Error("createTrezorSignTxPayload unexpected addressing start level");const a=[...t.addressing.path];return a[m.CZ.CHAIN.level-1]=x.OC.CHIMERIC_ACCOUNT,a[m.CZ.ADDRESS.level-1]=0,a})(),l=e.unsignedTx.build(),d=function(e){var t;for(const t of e)(0,f.sV)(t.addressing);return u()(t=h()(e).call(e,(e=>({prev_hash:e.tx_hash,prev_index:e.tx_index,path:(0,w.FB)(e.addressing.path)})))).call(t,C)}(e.senderUtxos),c=function(e,t,a){const r=[];for(const i of(0,T.iterateLenGet)(e)){var s,n;const e=i.address(),l=(0,A.toHexOrBase58)(i.address()),d=D(i.amount().multiasset()),u=null!==(s=(0,T.maybe)(null===(n=i.data_hash())||void 0===n?void 0:n.to_hex(),(e=>({datumHash:e}))))&&void 0!==s?s:{},c=o()(t).call(t,(e=>l===e.address));if(null!=c)if((0,f.sV)(c.addressing),b.RustModule.WalletV4.BaseAddress.from_address(e))r.push({addressParameters:{addressType:y.CardanoAddressType.BASE,path:c.addressing.path,stakingPath:a},amount:i.amount().coin().to_str(),...d,...u});else{if(!b.RustModule.WalletV4.ByronAddress.from_address(e))throw new Error("unexpected change address type");r.push({addressParameters:{addressType:y.CardanoAddressType.BYRON,path:c.addressing.path},amount:i.amount().coin().to_str(),...u})}else{const t=b.RustModule.WalletV4.ByronAddress.from_address(e);r.push({address:null==t?e.to_bech32():t.to_base58(),amount:i.amount().coin().to_str(),...d,...u})}}return r}(l.outputs(),e.changeAddr,i);let p={signingMode:y.CardanoTxSigningMode.ORDINARY_TRANSACTION,inputs:d,outputs:c,fee:l.fee().to_str(),ttl:null===(r=l.ttl_bignum())||void 0===r?void 0:r.to_str(),validityIntervalStart:null===(s=l.validity_start_interval_bignum())||void 0===s?void 0:s.to_str(),scriptDataHash:null===(n=l.script_data_hash())||void 0===n?void 0:n.to_hex(),protocolMagic:t,networkId:a};const g=l.withdrawals();p=null==g?p:{...p,withdrawals:I(g,[i])};const v=l.certs();if(p=null==v?p:{...p,certificates:k(v,(e=>i))},e.trezorTCatalystRegistrationTxSignData){const{votingPublicKey:t,nonce:a,paymentKeyPath:r}=e.trezorTCatalystRegistrationTxSignData;p={...p,auxiliaryData:{cVoteRegistrationParameters:{delegations:[{votePublicKey:t.replace(/^0x/,""),weight:1}],stakingPath:i,paymentAddressParameters:{addressType:y.CardanoAddressType.BASE,path:r,stakingPath:i},nonce:String(a),format:y.CardanoGovernanceRegistrationFormat.CIP36,votingPurpose:0}}}}else{const t=e.metadata;p=void 0===t?p:{...p,auxiliaryData:{hash:_()(32).update(t.to_bytes()).digest("hex")}}}return p}function I(e,t){var a,r;return h()(a=p()(r=(0,T.iterateLenGetMap)(e)).call(r).nonNull().zip(t)).call(a,(([e,t])=>({amount:e.to_str(),path:t}))).toArray()}function k(e,t){const a=[];for(const r of(0,T.iterateLenGet)(e)){const e=r.as_stake_registration();if(null!=e){a.push({type:y.CardanoCertificateType.STAKE_REGISTRATION,path:t(e.stake_credential())});continue}const s=r.as_stake_deregistration();if(null!=s){a.push({type:y.CardanoCertificateType.STAKE_DEREGISTRATION,path:t(s.stake_credential())});continue}const n=r.as_stake_delegation();if(null!=n){a.push({type:y.CardanoCertificateType.STAKE_DELEGATION,path:t(n.stake_credential()),pool:n.pool_keyhash().to_hex()});continue}const o=r.as_vote_delegation();if(null==o)throw new Error("formatTrezorCertificates Trezor doesn't support this certificate type");{const e=o.drep();let r;switch(e.kind()){case b.RustModule.WalletV4.DRepKind.KeyHash:r={type:y.CardanoDRepType.KEY_HASH,keyHash:(0,T.forceNonNull)(o.drep().to_key_hash()).to_hex()};break;case b.RustModule.WalletV4.DRepKind.ScriptHash:r={type:y.CardanoDRepType.SCRIPT_HASH,scriptHash:(0,T.forceNonNull)(o.drep().to_script_hash()).to_hex()};break;case b.RustModule.WalletV4.DRepKind.AlwaysAbstain:r={type:y.CardanoDRepType.ABSTAIN};break;case b.RustModule.WalletV4.DRepKind.AlwaysNoConfidence:r={type:y.CardanoDRepType.NO_CONFIDENCE};break;default:throw new Error("Trezor: Unsupported dRep kind: "+e.kind())}a.push({type:y.CardanoCertificateType.VOTE_DELEGATION,dRep:r,path:t(o.stake_credential())})}}return a}function C(e,t){return e.prev_hash!==t.prev_hash?e.prev_hash<t.prev_hash?-1:1:e.prev_index-t.prev_index}function D(e){var t;return null==e?l()({}):{tokenBundle:h()(t=(0,T.iterateLenGetMap)(e).nonNullValue()).call(t,(([e,t])=>{var a;const r=h()(a=(0,T.iterateLenGetMap)(t).nonNullValue()).call(a,(([e,t])=>({assetNameBytes:(0,T.bytesToHex)(e.name()),amount:t.to_str()}))).toArray();return{policyId:e.to_hex(),tokenAmounts:r}})).toArray()}}function M(e,t,a,r,n){var i,l,d,u,c,p,g;const f=b.RustModule.WalletV4.TransactionBody.from_hex(e);function w(e){const t=[];for(const a of(0,T.iterateLenGet)(e)){const e=a.transaction_id().to_hex(),r=a.index(),s=o()(n).call(n,(t=>t.tx_hash===e&&t.tx_index===r)),i={prev_hash:e,prev_index:r};s&&(i.path=s.addressing.path),t.push(i)}return t}function m(e){const a=e.serialization_format()===b.RustModule.WalletV4.CborContainerType.Map,s=e.amount().coin().to_str(),{tokenBundle:n}=D(e.amount().multiasset()),o=e.data_hash(),i=e.address();let l;const d=b.RustModule.WalletV4.ByronAddress.from_address(i),u=b.RustModule.WalletV4.PointerAddress.from_address(i);if((d||u)&&(l={address:i.to_bech32(),amount:s}),b.RustModule.WalletV4.EnterpriseAddress.from_address(i)){const e=r(i.to_bech32());l=e?{addressParameters:{addressType:y.CardanoAddressType.ENTERPRISE,path:e},amount:s}:{address:i.to_bech32(),amount:s}}const c=b.RustModule.WalletV4.BaseAddress.from_address(i);if(c){const e=b.RustModule.WalletV4.EnterpriseAddress.new(t,c.payment_cred()).to_address().to_hex(),a=r(e);if(a){const e=c.stake_cred(),n=b.RustModule.WalletV4.RewardAddress.new(t,e).to_address().to_hex(),o=r(n);if(o)l={addressParameters:{addressType:y.CardanoAddressType.BASE,path:a,stakingPath:o},amount:s};else{const t=e.to_keyhash(),r=e.to_scripthash();if(t)l={addressParameters:{addressType:y.CardanoAddressType.BASE,path:a,stakingKeyHash:t.to_hex()},amount:s};else{if(!r)throw new Error("unexpected stake credential type in base address");l={addressParameters:{addressType:y.CardanoAddressType.BASE,path:a,stakingScriptHash:r.to_hex()},amount:s}}}}else l={address:i.to_bech32(),amount:s}}if(!l)throw new Error("not expecting to pay to reward address");n&&(l.tokenBundle=n),o&&(l.datumHash=o.to_hex()),a&&(l.format=y.CardanoTxOutputSerializationFormat.MAP_BABBAGE);const p=e.plutus_data();p&&(l.inlineDatum=p.to_hex(),l.format=y.CardanoTxOutputSerializationFormat.MAP_BABBAGE);const g=e.script_ref();return g&&(l.referenceScript=g.to_hex(),l.format=y.CardanoTxOutputSerializationFormat.MAP_BABBAGE),l}const x=h()(i=(0,T.iterateLenGet)(f.outputs())).call(i,m).toArray(),A=[],v=[],_=f.required_signers();if(_)for(const e of(0,T.iterateLenGet)(_)){const a=b.RustModule.WalletV4.EnterpriseAddress.new(t,b.RustModule.WalletV4.Credential.from_keyhash(e)).to_address().to_hex(),s=b.RustModule.WalletV4.RewardAddress.new(t,b.RustModule.WalletV4.Credential.from_keyhash(e)).to_address().to_hex(),n=r(a)||r(s);n?(A.push({keyPath:n}),v.push(n)):A.push({keyHash:e.to_hex()})}let E=null;const I=f.certs();I&&(E=k(I,(e=>{const a=b.RustModule.WalletV4.RewardAddress.new(t,e).to_address().to_hex(),s=r(a);if(null==s)throw new Error("not own address in certificate");return s})));let C=null;const M=f.withdrawals();if(M){const e=[];for(const[t,a]of(0,T.iterateLenGetMap)(M).nonNullValue()){const s=t.to_address().to_hex(),n=r(s);if(null==n)throw new Error("foreign withdrawal reward address");e.push({amount:a.to_str(),path:n})}C=e}let S=null;const R=f.auxiliary_data_hash();R&&(S={hash:R.to_hex()});let W=null;const B=f.collateral();B&&(W=w(B));const P=null===(l=JSON.parse(null!==(d=null===(u=f.mint())||void 0===u?void 0:u.to_json())&&void 0!==d?d:"null"))||void 0===l?void 0:h()(l).call(l,(([e,t])=>{var a;return{policyId:e,tokenAmounts:h()(a=s()(t)).call(a,(e=>({assetNameBytes:e,mintAmount:t[e]})))}})),N=null===(c=f.script_data_hash())||void 0===c?void 0:c.to_hex(),F={signingMode:y.CardanoTxSigningMode.ORDINARY_TRANSACTION,inputs:w(f.inputs()),outputs:x,fee:f.fee().to_str(),protocolMagic:a,networkId:t,includeNetworkId:null!=f.network_id()},O=null===(p=f.ttl_bignum())||void 0===p?void 0:p.to_str(),L=null===(g=f.validity_start_interval_bignum())||void 0===g?void 0:g.to_str();O&&(F.ttl=O),L&&(F.validityIntervalStart=L),E&&(F.certificates=E),C&&(F.withdrawals=C),S&&(F.auxiliaryData=S),P&&(F.mint=P),N&&(F.scriptDataHash=N),W&&(F.collateralInputs=W,F.signingMode=y.CardanoTxSigningMode.PLUTUS_TRANSACTION),_&&(F.requiredSigners=A);const H=f.collateral_return();H&&(F.collateralReturn=m(H));const U=f.total_collateral();U&&(F.totalCollateral=U.to_str());const V=f.reference_inputs();if(V){const e=[];for(const t of(0,T.iterateLenGet)(V))e.push({prev_hash:t.transaction_id().to_hex(),prev_index:t.index()});F.referenceInputs=e}return v.length>0&&(F.additionalWitnessRequests=v),F}function S(e,t){const a=b.RustModule.WalletV4.FixedTransaction.from_hex(e);for(const e of t){if(e.type===y.CardanoTxWitnessType.BYRON_WITNESS)throw new Error("Byron wallet does not support connector API");if(e.type!==y.CardanoTxWitnessType.SHELLEY_WITNESS)throw new Error("unexpected witness type");{const t=b.RustModule.WalletV4.Vkeywitness.new(b.RustModule.WalletV4.Vkey.new(b.RustModule.WalletV4.PublicKey.from_hex(e.pubKey)),b.RustModule.WalletV4.Ed25519Signature.from_hex(e.signature));a.add_vkey_witness(t)}}return a.to_hex()}a(27649)},27649:(e,t,a)=>{a.d(t,{PF:()=>b,$Z:()=>A,Dw:()=>v,Bi:()=>_,lG:()=>T,Nf:()=>E,ue:()=>k,RY:()=>C,b9:()=>D}),a(86902);var r=a(32366),s=a.n(r),n=a(20116),o=a.n(n),i=a(2991),l=a.n(i),d=a(80426),u=a.n(d),c=(a(96486),a(905)),p=a(9243),g=a(28336),h=a(55343),f=a(86335),w=a(38079),y=a(90649);const m="addr_test1qzz6hulv54gzf2suy2u5gkvmt6ysasfdlvvegy3fmf969y7r3y3kdut55a40jff00qmg74686vz44v6k363md06qkq0qy0adz0";function x(e,t){return`${e.to_hex()}.${(0,y.bytesToHex)(t.name())}`}function b(e){const t=e.split(".");return{policyId:f.RustModule.WalletV4.ScriptHash.from_hex(t[0]),name:f.RustModule.WalletV4.AssetName.new((0,y.hexToBytes)(t[1]))}}function A(e,t){const a=new h.a([],t);a.add({amount:new c.Z(e.coin().to_str()),identifier:t.defaultIdentifier,networkId:t.defaultNetworkId});for(const n of(r=e.multiasset(),void 0,u()(s=(0,y.iterateLenGetMap)(r)).call(s,(([e,t])=>{var a;return l()(a=(0,y.iterateLenGetMap)(t).nonNullValue()).call(a,(([t,a])=>({amount:a.to_str(),assetId:x(e,t),policyId:e.to_hex(),name:(0,y.bytesToHex)(t.name())})))})).toArray()))a.add({amount:new c.Z(n.amount),identifier:n.assetId,networkId:t.defaultNetworkId});var r,s;return a}function v(e){const t=f.RustModule.WalletV4.Value.new(f.RustModule.WalletV4.BigNum.from_str(e.amount));if(0===e.assets.length)return t;const a=f.RustModule.WalletV4.MultiAsset.new();for(const t of e.assets){var r;const{policyId:e,name:s}=b(t.assetId),n=null!==(r=a.get(e))&&void 0!==r?r:f.RustModule.WalletV4.Assets.new();n.insert(s,f.RustModule.WalletV4.BigNum.from_str(t.amount.toString())),a.insert(e,n)}return a.len()>0&&t.set_multiasset(a),t}function _(e,t){return function(e,t,a){const r=new h.a([],{defaultNetworkId:a,defaultIdentifier:w.hd.Cardano});r.add({identifier:w.hd.Cardano,amount:new c.Z(e),networkId:a});for(const e of t)r.add({identifier:e.assetId,amount:new c.Z(e.amount),networkId:a});return r}(e.amount,e.assets,t)}function T(e){var t,a,r,s;const n=[...e.utxoInputs,...null!==(t=e.accountingInputs)&&void 0!==t?t:[]],i=[...e.utxoOutputs,...null!==(a=e.accountingOutputs)&&void 0!==a?a:[]],l=o()(n).call(n,(t=>e.allOwnedAddressIds.has(t.AddressId))),d=o()(i).call(i,(t=>e.allOwnedAddressIds.has(t.AddressId))),u=I(n,e.tokens,e.defaultToken),c=I(i,e.tokens,e.defaultToken),g=I(l,e.tokens,e.defaultToken).joinAddCopy(null!==(r=e.ownImplicitInput)&&void 0!==r?r:new h.a([],e.defaultToken)),f=I(d,e.tokens,e.defaultToken).joinAddCopy(null!==(s=e.ownImplicitOutput)&&void 0!==s?s:new h.a([],e.defaultToken)),w=l.length===n.length,y=d.length===i.length,m=w&&y,x=l.length>0&&l.length!==n.length,b=f.joinSubtractCopy(g),A=c.joinSubtractCopy(u);return m?{type:p.s.SELF,amount:new h.a([],e.defaultToken),fee:A}:x?{type:p.s.MULTI,amount:b,fee:new h.a([],e.defaultToken)}:w?{type:p.s.EXPEND,amount:b.joinSubtractCopy(A),fee:A}:{type:p.s.INCOME,amount:b,fee:new h.a([],e.defaultToken)}}function E(e,t){const a=[];for(const i of e){var r,s,n,o;null!=i.block&&a.push({date:i.block.BlockTime,type:i.type===p.s.INCOME?"in":"out",amount:(0,g.formatBigNumberToFloatString)(null!==(r=null===(s=i.amount.get(t.Identifier))||void 0===s?void 0:s.abs().shiftedBy(-t.Metadata.numberOfDecimals))&&void 0!==r?r:new c.Z(0)),fee:(0,g.formatBigNumberToFloatString)(null!==(n=null===(o=i.fee.get(t.Identifier))||void 0===o?void 0:o.abs().shiftedBy(-t.Metadata.numberOfDecimals))&&void 0!==n?n:new c.Z(0)),id:i.transaction.Hash})}return a}function I(e,t,a){const r=s()(e).call(e,((e,a)=>{for(const r of o()(t).call(t,(e=>e.TokenList.ListId===a.TokenListId)))e.push(r);return e}),[]);return new h.a(l()(r).call(r,(e=>({identifier:e.Token.Identifier,amount:new c.Z(e.TokenList.Amount),networkId:e.Token.NetworkId}))),a)}function k(e){return l()(e).call(e,(e=>{var t,a;const r=s()(t=e.output.tokens).call(t,((e,t)=>(t.Token.Identifier===w.hd.Cardano?e.amount=e.amount.plus(t.TokenList.Amount):e.tokens.push({amount:t.TokenList.Amount,tokenId:t.Token.Identifier}),e)),{amount:new c.Z(0),tokens:[]}),n=l()(a=r.tokens).call(a,(e=>{const t=b(e.tokenId);return{amount:e.amount,assetId:e.tokenId,policyId:t.policyId.to_hex(),name:(0,y.bytesToHex)(t.name.name())}}));return{amount:r.amount.toString(),receiver:e.address,tx_hash:e.output.Transaction.Hash,tx_index:e.output.UtxoTransactionOutput.OutputIndex,utxo_id:e.output.Transaction.Hash+e.output.UtxoTransactionOutput.OutputIndex,addressing:e.addressing,assets:n}}))}function C(e,t){return f.RustModule.WasmScope((a=>{const r=a.WalletV4.TransactionOutput.new(a.WalletV4.Address.from_bech32(m),function(e,t=f.RustModule){const a=t.WalletV4.Value.new(t.WalletV4.BigNum.from_str(e.getDefaultEntry().amount.toString()));if(1===e.size())return a;const r=t.WalletV4.MultiAsset.new();for(const a of e.nonDefaultEntries()){var s;const{policyId:e,name:n}=b(a.identifier),o=null!==(s=r.get(e))&&void 0!==s?s:t.WalletV4.Assets.new();o.insert(n,t.WalletV4.BigNum.from_str(a.amount.toString())),r.insert(e,o)}return r.len()>0&&a.set_multiasset(r),a}(e,a));return function(e,t,a){const r=a.WalletV4.BigNum.from_str(t.toString()),s=a.WalletV4.DataCost.new_coins_per_byte(r),n=a.WalletV4.min_ada_for_output(e,s).to_str();return new c.Z(n)}(r,t,a)}))}function D(e,t){return f.RustModule.WasmScope((a=>{const r=a.WalletV4.TransactionWitnessSet.from_hex(e),s=a.WalletV4.TransactionWitnessSet.from_hex(t),n=a.WalletV4.TransactionWitnessSet.new();let o=r.vkeys();const i=s.vkeys();if(o&&i)for(const e of(0,y.iterateLenGet)(i))o.add(e);else i&&(o=i);o&&n.set_vkeys(o);let l=r.native_scripts();const d=s.native_scripts();if(l&&d)for(const e of(0,y.iterateLenGet)(d))l.add(e);else d&&(l=d);l&&n.set_native_scripts(l);let u=r.bootstraps();const c=s.bootstraps();if(u&&c)for(const e of(0,y.iterateLenGet)(c))u.add(e);else c&&(u=c);u&&n.set_bootstraps(u);let p=r.plutus_scripts();const g=s.plutus_scripts();if(p&&g)for(const e of(0,y.iterateLenGet)(g))p.add(e);else g&&(p=g);p&&n.set_plutus_scripts(p);let h=r.plutus_data();const f=s.plutus_data();if(h&&f)for(const e of(0,y.iterateLenGet)(f))h.add(e);else f&&(h=f);h&&n.set_plutus_data(h);let w=r.redeemers();const m=s.redeemers();if(w&&m)for(const e of(0,y.iterateLenGet)(m))w.add(e);else m&&(w=m);return w&&n.set_redeemers(w),n.to_hex()}))}},21131:(e,t,a)=>{a.d(t,{AW:()=>o,Px:()=>i,js:()=>l,rp:()=>d,dJ:()=>u,JI:()=>c,ke:()=>p,r7:()=>g,JZ:()=>h,gC:()=>f,x:()=>w,oy:()=>y,hH:()=>m,fc:()=>x,oc:()=>b,PQ:()=>A,E8:()=>v,zJ:()=>_,k:()=>T,qH:()=>E,HH:()=>I,AH:()=>k,nW:()=>C,Dy:()=>D,XX:()=>M,kl:()=>S,Jq:()=>R,o_:()=>W});var r=a(99095),s=a(63139);const n=(0,r.defineMessages)({serverStatusError:{id:"api.errors.serverStatusError",defaultMessage:'!!!Server connection failed. Please check your internet connection or reach out to our support team <a target="_blank" href="https://emurgohelpdesk.zendesk.com/hc/en-us/requests/new?ticket_form_id=360013330335">here</a>.'},currentCoinPriceError:{id:"api.errors.currentCoinPriceError",defaultMessage:"!!!There is no current coin price data available."},historicalCoinPriceError:{id:"api.errors.histoicalCoinPriceError",defaultMessage:"!!!There is no historical coin price data available."},genericApiError:{id:"api.errors.GenericApiError",defaultMessage:"!!!An error occurred. Please retry."},incorrectWalletPasswordError:{id:"api.errors.IncorrectPasswordError",defaultMessage:"!!!Incorrect password. Please retype."},walletAlreadyRestoredError:{id:"api.errors.WalletAlreadyRestoredError",defaultMessage:"!!!The wallet you are trying to restore already exists."},reportRequestError:{id:"api.errors.ReportRequestError",defaultMessage:"!!!There was a problem sending the support request."},unusedAddressesError:{id:"api.errors.unusedAddressesError",defaultMessage:"!!!You cannot generate more than 20 consecutive unused addresses."},walletAlreadyImportedError:{id:"api.errors.WalletAlreadyImportedError",defaultMessage:"!!!Wallet you are trying to import already exists."},notEnoughMoneyToSendError:{id:"api.errors.NotEnoughMoneyToSendError",defaultMessage:"!!!Insufficient funds to complete this transaction."},cannotSendBelowMinimumValueError:{id:"api.errors.CannotSendBelowMinimumValueError",defaultMessage:"!!!A minimum of 1 ADA is required"},assetOverflowError:{id:"api.errors.assetOverflowError",defaultMessage:"!!!Maximum value of a token inside a UTXO exceeded (overflow)."},getAddressesKeysError:{id:"api.errors.getAddressesWithFundsError",defaultMessage:"!!!An error occurred while getting addresses with funds. Please retry."},noInputsError:{id:"api.errors.noInputsError",defaultMessage:"!!!Your recovered wallet is empty. Please check your recovery phrase and restore again."},rewardAddressEmptyError:{id:"api.errors.rewardAddressEmpty",defaultMessage:"!!!Reward address is not visible until users get any reward."},noOutputsError:{id:"api.errors.noOutputsError",defaultMessage:"!!!The transaction requires at least 1 output, but none was provided."},generateTransferTxError:{id:"api.errors.generateTransferTxError",defaultMessage:"!!!An error occurred while generating the transfer transaction. Please retry."},sendTransactionError:{id:"api.errors.sendTransactionError",defaultMessage:"!!!Error received from api method call while sending tx."},getAllUTXOsForAddressesError:{id:"api.errors.getAllUTXOsForAddressesError",defaultMessage:"!!!Error received from api method call while getting utxos."},discoverAddressesError:{id:"api.errors.discoverAddressesError",defaultMessage:"!!!Error received from api method call while discovering addresses."},getUtxosForAddressesApiError:{id:"api.errors.getUtxosForAddressesApiError",defaultMessage:"!!!Error received from server while getting UTXOs."},getTxHistoryForAddressesApiError:{id:"api.errors.getTxHistoryForAddressesApiError",defaultMessage:"!!!Error received from server while getting txs."},getRewardHistoryApiError:{id:"api.errors.getRewardHistoryApiError",defaultMessage:"!!!Error received from server while getting reward history."},rollbackApiError:{id:"api.errors.rollbackApiError",defaultMessage:"!!!Rollback was detected."},getBestBlockApiError:{id:"api.errors.getBestBlockApiError",defaultMessage:"!!!Error received from server while getting best block."},sendTransactionApiError:{id:"api.errors.sendTransactionApiError",defaultMessage:"!!!Error received from server while sending tx."},checkAdressesInUseApiError:{id:"api.errors.checkAdressesInUseApiError",defaultMessage:"!!!Error received from server while checking used addresses."},getMultiAssetMintMetadataApiError:{id:"api.errors.getMultiAssetMintMetadataApiError",defaultMessage:"!!!Error received from server while querying minting metadata."},assetInfoApiError:{id:"api.errors.assetInfoApiError",defaultMessage:"!!!Error received from server while getting asset info."},getAccountStateApiError:{id:"api.errors.getAccountStateApiError",defaultMessage:"!!!Error received from server while getting account state."},getPoolInfoApiError:{id:"api.errors.getPoolInfoApiError",defaultMessage:"!!!Error received from server while getting pool info."},getCatalystRoundApiError:{id:"api.errors.getCatalystRoundApiError",defaultMessage:"!!!Error received from server while getting catalyst round info."},getTokenInfoApiError:{id:"api.errors.getTokenInfoApiError",defaultMessage:"!!!Error received from server while getting token info."},poolMissingApiError:{id:"api.errors.poolMissingApiError",defaultMessage:"!!!Pool could not be found. Please check the pool ID and ensure the pool was not deregistered."},invalidWitnessError:{id:"api.errors.invalidWitnessError",defaultMessage:"!!!The signature is invalid."},invalidMnemonicError:{id:"api.errors.invalidMnemonicError",defaultMessage:"!!!Invalid phrase entered, please check."},hardwareUnsupportedError:{id:"api.errors.hardwareUnsupportedError",defaultMessage:"!!!This action is incompatible with the hardware."},getUtxoDataError:{id:"api.errors.getUtxoDataError",defaultMessage:"!!!Error received from server while getting UTXO data"},oversizedTransactionError:{id:"api.errors.oversizedTransaction",defaultMessage:"!!!Maximum transaction size exceeded."}});class o extends s.default{constructor(){super({id:n.serverStatusError.id,defaultMessage:n.serverStatusError.defaultMessage||""})}}class i extends s.default{constructor(){super({id:n.currentCoinPriceError.id,defaultMessage:n.currentCoinPriceError.defaultMessage||""})}}class l extends s.default{constructor(){super({id:n.historicalCoinPriceError.id,defaultMessage:n.historicalCoinPriceError.defaultMessage||""})}}class d extends s.default{constructor(){super({id:n.genericApiError.id,defaultMessage:n.genericApiError.defaultMessage||""})}}class u extends s.default{static get errorId(){return n.incorrectWalletPasswordError.id}constructor(){super({id:u.errorId,defaultMessage:n.incorrectWalletPasswordError.defaultMessage||""})}}class c extends s.default{constructor(){super({id:n.walletAlreadyRestoredError.id,defaultMessage:n.walletAlreadyRestoredError.defaultMessage||""})}}class p extends s.default{constructor(){super({id:n.unusedAddressesError.id,defaultMessage:n.unusedAddressesError.defaultMessage||""})}}class g extends s.default{constructor(){super({id:n.notEnoughMoneyToSendError.id,defaultMessage:n.notEnoughMoneyToSendError.defaultMessage||""})}}class h extends s.default{constructor(){super({id:n.cannotSendBelowMinimumValueError.id,defaultMessage:n.cannotSendBelowMinimumValueError.defaultMessage||""})}}class f extends s.default{constructor(){super({id:n.assetOverflowError.id,defaultMessage:n.assetOverflowError.defaultMessage||""})}}class w extends s.default{constructor(){super({id:n.noInputsError.id,defaultMessage:n.noInputsError.defaultMessage||""})}}class y extends s.default{constructor(){super({id:n.rewardAddressEmptyError.id,defaultMessage:n.rewardAddressEmptyError.defaultMessage||""})}}class m extends s.default{constructor(){super({id:n.noOutputsError.id,defaultMessage:n.noOutputsError.defaultMessage||""})}}class x extends s.default{constructor(){super({id:n.getAllUTXOsForAddressesError.id,defaultMessage:n.getAllUTXOsForAddressesError.defaultMessage||""})}}class b extends s.default{constructor(){super({id:n.getUtxosForAddressesApiError.id,defaultMessage:n.getUtxosForAddressesApiError.defaultMessage||""})}}class A extends s.default{constructor(){super({id:n.getTxHistoryForAddressesApiError.id,defaultMessage:n.getTxHistoryForAddressesApiError.defaultMessage||""})}}class v extends s.default{constructor(){super({id:n.getRewardHistoryApiError.id,defaultMessage:n.getRewardHistoryApiError.defaultMessage||""})}}class _ extends s.default{constructor(){super({id:n.rollbackApiError.id,defaultMessage:n.rollbackApiError.defaultMessage||""})}}class T extends s.default{constructor(){super({id:n.getBestBlockApiError.id,defaultMessage:n.getBestBlockApiError.defaultMessage||""})}}class E extends s.default{constructor(){super({id:n.sendTransactionApiError.id,defaultMessage:n.sendTransactionApiError.defaultMessage||""})}}class I extends s.default{constructor(){super({id:n.checkAdressesInUseApiError.id,defaultMessage:n.checkAdressesInUseApiError.defaultMessage||""})}}class k extends s.default{constructor(){super({id:n.getAccountStateApiError.id,defaultMessage:n.getAccountStateApiError.defaultMessage||""})}}class C extends s.default{constructor(){super({id:n.getPoolInfoApiError.id,defaultMessage:n.getPoolInfoApiError.defaultMessage||""})}}class D extends s.default{constructor(){super({id:n.getCatalystRoundApiError.id,defaultMessage:n.getCatalystRoundApiError.defaultMessage||""})}}class M extends s.default{constructor(){super({id:n.getTokenInfoApiError.id,defaultMessage:n.getTokenInfoApiError.defaultMessage||""})}}class S extends s.default{constructor(){super({id:n.invalidWitnessError.id,defaultMessage:n.invalidWitnessError.defaultMessage||""})}}class R extends s.default{constructor(){super({id:n.getUtxoDataError.id,defaultMessage:n.getUtxoDataError.defaultMessage||""})}}class W extends s.default{constructor(){super({id:n.oversizedTransactionError.id,defaultMessage:n.oversizedTransactionError.defaultMessage})}}},4158:(e,t,a)=>{a.d(t,{MX:()=>y,ZP:()=>m,qP:()=>x,_Y:()=>b});var r=a(32366),s=a.n(r),n=a(94473),o=a.n(n),i=a(59340),l=a.n(i),d=a(905),u=a(13469),c=a(19008),p=(a(38441),a(21131)),g=a(63139),h=(a(27189),a(14986),a(33913)),f=a(26333),w=a(55343);async function y(e){try{return await(0,c.M)(e.db)}catch(e){if(u.Yd.error("getWallets error: "+(0,u.n)(e)),e instanceof g.default)throw e;throw new p.rp}}class m{async getTokenInfo(e){u.Yd.debug("getTokenInfo called");try{const t=await(0,f.r)(e);return u.Yd.debug("getTokenInfo success: "+(0,u.WO)(t)),t}catch(e){if(u.Yd.error("getTokenInfo error: "+(0,u.n)(e)),e instanceof g.default)throw e;throw new p.rp}}async getTxLastUpdatedDate(e){try{return await e.getLastSyncInfo()}catch(e){if(u.Yd.error("CommonApi::getTxLastUpdatedDate error: "+(0,u.n)(e)),e instanceof g.default)throw e;throw new p.rp}}async createAddress(e){u.Yd.debug("CommonApi::createAddress called");try{const t=await e.popFunc();return u.Yd.debug("CommonApi::createAddress success: "+(0,u.WO)(t)),t}catch(e){if(u.Yd.error("CommonApi::createAddress error: "+(0,u.n)(e)),e instanceof g.default)throw e;throw new p.rp}}async getBalance(e){try{return await e.getBalance()}catch(e){if(u.Yd.error("CommonApi::getBalance error: "+(0,u.n)(e)),e instanceof g.default)throw e;throw new p.rp}}async getAssetDeposit(e){try{return await e.getBalance()}catch(e){if(u.Yd.error("CommonApi::getAssetDeposit error: "+(0,u.n)(e)),e instanceof g.default)throw e;throw new p.rp}}async exportLocalDatabase(e){const t=await e.export();return l()(t)}async renameModel(e){u.Yd.debug("CommonApi::renameModel called: "+(0,u.WO)(e));try{const t=await e.func(e.request);return u.Yd.debug("CommonApi::renameModel success: "+(0,u.WO)(t)),t}catch(e){if(u.Yd.error("CommonApi::renameModel error: "+(0,u.n)(e)),e instanceof g.default)throw e;throw new p.rp}}async changeModelPassword(e){u.Yd.debug("CommonApi::changeModelPassword called");try{const t=await e.func(e.request);return u.Yd.debug("CommonApi::changeModelPassword success"),t}catch(e){if(u.Yd.error("CommonApi::changeModelPassword error: "+(0,u.n)(e)),e instanceof h.UZ)throw new p.dJ;if(e instanceof g.default)throw e;throw new p.rp}}}function x(e){return null!=o()(e).call(e,(e=>!(!0!==e.shouldSendAll||!e.token.IsDefault)))}function b(e,t,a){const r=new w.a([],e);for(const e of t)if(null!=e.amount)r.add({amount:new d.Z(e.amount),identifier:e.token.Identifier,networkId:e.token.NetworkId});else if(e.token.IsDefault){const t=s()(a).call(a,((e,t)=>e.plus(t.getDefaultEntry().amount)),new d.Z(0));r.add({amount:t,identifier:e.token.Identifier,networkId:e.token.NetworkId})}else{const t=s()(a).call(a,((t,a)=>{var r;const s=o()(r=a.nonDefaultEntries()).call(r,(t=>t.identifier===e.token.Identifier));return null!=s?t.plus(s.amount):t}),new d.Z(0));r.add({amount:t,identifier:e.token.Identifier,networkId:e.token.NetworkId})}return r}},79562:(e,t,a)=>{a.d(t,{default:()=>P,persistSubmittedTransactions:()=>F,loadSubmittedTransactions:()=>O,createStorageField:()=>L});var r,s,n=a(56474),o=a.n(n),i=a(98926),l=a.n(i),d=a(31238),u=a.n(d),c=a(41511),p=a.n(c),g=a(86902),h=a.n(g),f=a(2991),w=a.n(f),y=a(20455),m=a.n(y),x=a(36384),b=a.n(x),A=a(93476),v=a.n(A),_=a(59340),T=a.n(_),E=a(87672),I=a.n(E),k=a(85412),C=a(6697),D=a(74119),M=a(61346),S=a(36231),R=a(90649);const W=String(k.Z.getNetworkName()),B={USER_LOCALE:W+"-USER-LOCALE",URI_SCHEME_ACCEPTANCE:W+"-URI-SCHEME-ACCEPTANCE",COMPLEXITY_LEVEL:W+"-COMPLEXITY-LEVEL",IS_USER_MIGRATED_TO_REVAMP:"IS_USER_MIGRATED_TO_REVAMP",IS_REVAMP_THEME_ANNOUNCED:"IS_REVAMP_THEME_ANNOUNCED",VERSION:W+"-LAST-LAUNCH-VER",HIDE_BALANCE:W+"-HIDE-BALANCE",UNIT_OF_ACCOUNT:W+"-UNIT-OF-ACCOUNT",COIN_PRICE_PUB_KEY_DATA:W+"-COIN-PRICE-PUB-KEY-DATA",EXTERNAL_STORAGE:W+"-EXTERNAL-STORAGE",TOGGLE_SIDEBAR:W+"-TOGGLE-SIDEBAR",WALLETS_NAVIGATION:W+"-WALLETS-NAVIGATION",SUBMITTED_TRANSACTIONS:"submittedTransactions",CATALYST_ROUND_INFO:W+"-CATALYST_ROUND_INFO",FLAGS:W+"-FLAGS",USER_THEME:W+"-USER-THEME",PORTFOLIO_FIAT_PAIR:W+"-PORTFOLIO_FIAT_PAIR",DAPP_CONNECTOR_WHITELIST:"connector_whitelist",SELECTED_WALLET:"SELECTED_WALLET",IS_ANALYTICS_ALLOWED:W+"-IS_ANALYTICS_ALLOWED",ACCEPTED_TOS_VERSION:W+"-ACCEPTED_TOS_VERSION",CUSTOM_THEME:W+"-CUSTOM-THEME",THEME:W+"-THEME"};class P{constructor(){I()(this,"getUserLocale",(()=>(0,D.Jt)(B.USER_LOCALE))),I()(this,"setUserLocale",(e=>(0,D.mM)(B.USER_LOCALE,e))),I()(this,"unsetUserLocale",(()=>(0,D.Hx)(B.USER_LOCALE))),I()(this,"getUriSchemeAcceptance",(()=>(0,D.Jt)(B.URI_SCHEME_ACCEPTANCE).then((e=>"true"===e&&JSON.parse(e))))),I()(this,"setUriSchemeAcceptance",(()=>(0,D.mM)(B.URI_SCHEME_ACCEPTANCE,T()(!0)))),I()(this,"unsetUriSchemeAcceptance",(()=>(0,D.Hx)(B.URI_SCHEME_ACCEPTANCE))),I()(this,"getComplexityLevel",(()=>(0,D.Jt)(B.COMPLEXITY_LEVEL).then((e=>null==e?null:JSON.parse(e))))),I()(this,"setComplexityLevel",(e=>(0,D.mM)(B.COMPLEXITY_LEVEL,T()(e)))),I()(this,"unsetComplexityLevel",(()=>(0,D.Hx)(B.COMPLEXITY_LEVEL))),I()(this,"getUserThemeMode",(()=>(0,D.Jt)(B.USER_THEME))),I()(this,"setUserThemeMode",(e=>(0,D.mM)(B.USER_THEME,e))),I()(this,"getPortfolioFiatPair",(()=>(0,D.Jt)(B.PORTFOLIO_FIAT_PAIR))),I()(this,"setSetPortfolioFiatPair",(e=>(0,D.mM)(B.PORTFOLIO_FIAT_PAIR,e))),I()(this,"unsetPortfolioFiatPair",(()=>(0,D.Hx)(B.PORTFOLIO_FIAT_PAIR))),I()(this,"getUserRevampMigrationStatus",(async()=>"true"===await(0,D.Jt)(B.IS_USER_MIGRATED_TO_REVAMP))),I()(this,"setUserRevampMigrationStatus",(e=>(0,D.mM)(B.IS_USER_MIGRATED_TO_REVAMP,e.toString()))),I()(this,"getUserRevampAnnouncementStatus",(async()=>"true"===await(0,D.Jt)(B.IS_REVAMP_THEME_ANNOUNCED))),I()(this,"setUserRevampAnnouncementStatus",(e=>(0,D.mM)(B.IS_REVAMP_THEME_ANNOUNCED,e.toString()))),I()(this,"getSelectedWalletId",(()=>{const e=localStorage.getItem(B.SELECTED_WALLET);if(!e)return null;if(isNaN(Number(e)))throw new Error(`Invalid wallet Id: ${e}`);return Number(e)})),I()(this,"setSelectedWalletId",(e=>{localStorage.setItem(B.SELECTED_WALLET,e.toString())})),I()(this,"hasAnyLegacyThemeFlags",(async()=>{const[e,t]=await v().all([(0,D.Jt)(B.THEME),(0,D.Jt)(B.CUSTOM_THEME)]);return null!=e||null!=t})),I()(this,"unsetLegacyThemeFlags",(async()=>{await v().all([(0,D.Hx)(B.THEME),(0,D.Hx)(B.CUSTOM_THEME)])})),I()(this,"getLastLaunchVersion",(()=>(0,D.Jt)(B.VERSION).then((e=>null==e?"0.0.0":e)))),I()(this,"setLastLaunchVersion",(e=>(0,D.mM)(B.VERSION,e))),I()(this,"unsetLastLaunchVersion",(()=>(0,D.Hx)(B.VERSION))),I()(this,"isEmpty",(()=>(0,D.cJ)())),I()(this,"clear",(async()=>{var e;const t=JSON.parse(await this.getStorage()),a=new(b())(m()(M.sz));await v().all(w()(e=h()(t)).call(e,(async e=>{a.has(e)||await(0,D.Hx)(e)})))})),I()(this,"getHideBalance",(()=>(0,D.Jt)(B.HIDE_BALANCE).then((e=>"true"===e&&JSON.parse(e))))),I()(this,"setHideBalance",(e=>(0,D.mM)(B.HIDE_BALANCE,T()(!e)))),I()(this,"unsetHideBalance",(()=>(0,D.Hx)(B.HIDE_BALANCE))),I()(this,"getToggleSidebar",(()=>(0,D.Jt)(B.TOGGLE_SIDEBAR).then((e=>"true"===e&&JSON.parse(e))))),I()(this,"setToggleSidebar",(e=>(0,D.mM)(B.TOGGLE_SIDEBAR,T()(!e)))),I()(this,"unsetToggleSidebar",(()=>(0,D.Hx)(B.TOGGLE_SIDEBAR))),I()(this,"getExternalStorage",(()=>(0,D.Jt)(B.EXTERNAL_STORAGE).then((e=>null==e?null:JSON.parse(e))))),I()(this,"setExternalStorage",(e=>(0,D.mM)(B.EXTERNAL_STORAGE,T()(e)))),I()(this,"unsetExternalStorage",(()=>(0,D.Hx)(B.EXTERNAL_STORAGE))),I()(this,"getWhitelist",(async()=>{const e=await(0,D.Jt)(B.DAPP_CONNECTOR_WHITELIST);if(null==e)return;const t=JSON.parse(e);return await this.setWhitelist(t),t})),I()(this,"setWhitelist",(e=>(0,D.mM)(B.DAPP_CONNECTOR_WHITELIST,T()(null!=e?e:[])))),I()(this,"getUnitOfAccount",(async()=>{const e=await(0,D.Jt)(B.UNIT_OF_ACCOUNT);return null==e?C.j:JSON.parse(e)})),I()(this,"setUnitOfAccount",(async e=>{await(0,D.mM)(B.UNIT_OF_ACCOUNT,T()(e))})),I()(this,"unsetUnitOfAccount",(async()=>{await(0,D.Hx)(B.UNIT_OF_ACCOUNT)})),I()(this,"getCoinPricePubKeyData",(async()=>await(0,D.Jt)(B.COIN_PRICE_PUB_KEY_DATA))),I()(this,"setCoinPricePubKeyData",(async e=>{await(0,D.mM)(B.COIN_PRICE_PUB_KEY_DATA,e)})),I()(this,"unsetCoinPricePubKeyData",(async()=>{try{await(0,D.Hx)(B.COIN_PRICE_PUB_KEY_DATA)}catch(e){}})),I()(this,"getFlag",(e=>"true"===localStorage.getItem(`${B.FLAGS}/${e}`))),I()(this,"setFlag",((e,t)=>{localStorage.setItem(`${B.FLAGS}/${e}`,String(t))})),I()(this,"getWalletsNavigation",(async()=>{let e=await(0,D.Jt)(B.WALLETS_NAVIGATION);if(null!=e)return e=JSON.parse(e),p()(e)?{cardano:[]}:e})),I()(this,"setWalletsNavigation",(e=>(0,D.mM)(B.WALLETS_NAVIGATION,T()(e)))),I()(this,"loadAcceptedTosVersion",(async()=>{const e=await(0,D.Jt)(B.ACCEPTED_TOS_VERSION);if(!e)return;const t=u()(e);return l()(t)?void 0:t})),I()(this,"saveAcceptedTosVersion",(async e=>{await(0,D.mM)(B.ACCEPTED_TOS_VERSION,String(e))})),I()(this,"unsetAcceptedTosVersion",(()=>(0,D.Hx)(B.ACCEPTED_TOS_VERSION))),I()(this,"_getIsAnalyticsAllowedKey",(()=>{let e=B.IS_ANALYTICS_ALLOWED;return k.Z.isFirefox()&&(e+="-firefox"),e})),I()(this,"loadIsAnalyticsAllowed",(async()=>{const e=await(0,D.Jt)(this._getIsAnalyticsAllowedKey());if(e)return JSON.parse(e)})),I()(this,"saveIsAnalysticsAllowed",(async e=>{await(0,D.mM)(this._getIsAnalyticsAllowedKey(),T()(e))})),I()(this,"unsetIsAnalyticsAllowed",(()=>(0,D.Hx)(B.IS_ANALYTICS_ALLOWED))),I()(this,"getItem",(e=>(0,D.Jt)(e))),I()(this,"setItem",((e,t)=>(0,D.mM)(e,t))),I()(this,"getOldStorage",(()=>new(v())((e=>{e(localStorage)})))),I()(this,"setStorage",(async e=>{var t;const a=new(b())(m()(M.sz));await v().all(w()(t=h()(e)).call(t,(async t=>{a.has(t)||await(0,D.mM)(t,e[t])})))})),I()(this,"getStorage",(()=>(0,D.Jt)(void 0).then((e=>null==e?"{}":e))))}async reset(){await this.unsetUserLocale(),await this.unsetComplexityLevel(),await this.unsetLastLaunchVersion(),await this.unsetHideBalance(),await this.unsetUnitOfAccount(),await this.unsetCoinPricePubKeyData(),await this.unsetExternalStorage(),await this.unsetToggleSidebar(),await this.unsetAcceptedTosVersion(),await this.unsetIsAnalyticsAllowed(),await this.unsetPortfolioFiatPair()}}const N=(null===(r=window.browser)||void 0===r?void 0:r.storage.local)||(null===(s=window.chrome)||void 0===s?void 0:s.storage.local);async function F(e){await N.set({[B.SUBMITTED_TRANSACTIONS]:T()(e)})}async function O(){var e;const t=await new(v())((e=>N.get(B.SUBMITTED_TRANSACTIONS,e)));return null==t||null==t[B.SUBMITTED_TRANSACTIONS]?[]:w()(e=JSON.parse(t[B.SUBMITTED_TRANSACTIONS])).call(e,(({networkId:e,publicDeriverId:t,transaction:a,usedUtxos:r,isDrepDelegation:s})=>({networkId:e,publicDeriverId:t,transaction:(0,S.T)(a),usedUtxos:r,isDrepDelegation:s})))}function L(e,t,a,r){return o()({get:async()=>{var t;return null!==(t=(0,R.maybe)(await(0,D.Jt)(e),a))&&void 0!==t?t:r},set:a=>(0,D.mM)(e,t(a)),remove:()=>(0,D.Hx)(e),defaultValue:()=>r})}},85540:(e,t,a)=>{a.d(t,{broadcastTransaction:()=>xe,connectWindowRetrieveData:()=>We,connectorCreateAuthEntry:()=>ve,getAllExplorers:()=>Te,getCardanoAssets:()=>Ae,getConnectedSites:()=>Pe,getHistoricalCoinPrices:()=>Ie,getPrivateStakingKey:()=>be,getProtocolParameters:()=>Ne,getSelectedExplorer:()=>_e,getWallets:()=>ye,listenForCoinPriceUpdate:()=>He,refreshCurrentCoinPrice:()=>ke,removeWalletFromWhiteList:()=>Be,saveSelectedExplorer:()=>Ee,signAndBroadcastTransaction:()=>me,signFail:()=>Se,signWindowRetrieveData:()=>Re,userConnectResponse:()=>Ce,userSignConfirm:()=>De,userSignReject:()=>Me});var r=a(78580),s=a.n(r),n=a(78914),o=a.n(n),i=a(56474),l=a.n(i),d=a(39392),u=a.n(d),c=a(20116),p=a.n(c),g=a(41511),h=a.n(g),f=a(89400),w=a.n(f),y=a(2991),m=a.n(y),x=a(59340),b=a.n(x),A=a(93476),v=a.n(A),_=(a(34786),a(86335)),T=(a(14986),a(36231)),E=a(37790),I=a(55343),k=a(21131),C=a(78877),D=a(23307),M=a(37872);function S(e){return e.LastUpdated=new Date(e.LastUpdated),e}l()({typeTag:"upsert-tx-memo",handle:async e=>{const t=await(0,M.zA)();return await(0,D.dj)({db:t,memo:S(e.memo)})}}),l()({typeTag:"delete-tx-memo",handle:async e=>{const t=await(0,M.zA)();await(0,D.Oy)({db:t,key:e.key})}}),l()({typeTag:"get-all-tx-memos",handle:async()=>{const e=await(0,M.zA)();return await(0,D.jM)({db:e})},fixMemoDate:S});var R=a(3649),W=a.n(R),B=a(11128),P=a.n(B),N=a(84174),F=a(60274),O=a(34147),L=a(10108),H=a(41058),U=a(79562),V=a(12565),G=a(21233),j=a(19008),K=a(3577),Z=a(4922),z=a(72499);l()({typeTag:"create-wallet",handle:async e=>{await _.RustModule.load();const t=await(0,M.zA)(),a=(0,N.getNetworkById)(e.networkId),r=new F.ZP,{publicDerivers:s}=await r.createWallet({db:t,network:a,recoveryPhrase:e.recoveryPhrase,walletName:e.walletName,walletPassword:e.walletPassword,accountIndex:e.accountIndex});return(0,O.aR)({type:"wallet-state-update",params:{eventType:"new",publicDeriverId:s[0].getPublicDeriverId()}}),(0,M.UA)(s[0],"new wallet",1),await(0,L._)(s[0])}}),l()({typeTag:"create-hardware-wallet",handle:async e=>{await _.RustModule.load();const t=await(0,M.zA)(),a=await(0,H.s)(new U.default),r=new F.ZP,{publicDeriver:s}=await r.createHardwareWallet({db:t,network:e.network,walletName:e.walletName,publicKey:e.publicKey,hwFeatures:e.hwFeatures,checkAddressesInUse:a.checkAddressesInUse,addressing:e.addressing});return(0,O.aR)({type:"wallet-state-update",params:{eventType:"new",publicDeriverId:s.getPublicDeriverId()}}),(0,M.UA)(s,"new wallet",1),await(0,L._)(s)}}),l()({typeTag:"remove-wallet",handle:async e=>{const t=await(0,V.A)(e.publicDeriverId);await(0,G.q)({publicDeriver:t,conceptualWallet:t.getParent()}),(0,O.aR)({type:"wallet-state-update",params:{eventType:"remove",publicDeriverId:e.publicDeriverId}})}}),l()({typeTag:"rename-public-deriver",handle:async e=>{const t=await(0,V.A)(e.publicDeriverId);await t.rename({newName:e.newName})}}),l()({typeTag:"rename-conceptual-wallet",handle:async e=>{const t=await(0,M.zA)();for(const a of await(0,j.M)(t))a.getParent().getConceptualWalletId()===e.conceptualWalletId&&await a.getParent().rename({newName:e.newName})}});const Y=l()({typeTag:"get-wallets",handle:async e=>await(0,L.k)(e.walletId)}),q=(l()({typeTag:"resync-wallet",handle:async e=>{const t=await(0,V.A)(e.publicDeriverId);await(0,M.UA)(t,"UI resync"),await(0,z.sI)(t.getParent().getNetworkInfo().NetworkId)}}),l()({typeTag:"change-signing-password",handle:async e=>{const t=await(0,V.A)(e.publicDeriverId),a=(0,K.y9)(t);if(null==a)throw new Error("unexpected missing asGetSigningKey result");const r=new Date(P()());await a.changeSigningKeyPassword({currentTime:r,oldPassword:e.oldPassword,newPassword:e.newPassword})}}),l()({typeTag:"get-private-staking-key",handle:async e=>{const t=await(0,V.A)(e.publicDeriverId),a=(0,K.y9)(t);if(null==a)throw new Error("unexpected missing asGetSigningKey result");const r=(0,K.Oq)(a);if(null==r)throw new Error("unexpected missing asGetAllAcccounting result");try{return(await(0,F.oN)({publicDeriver:r,password:e.password})).to_hex()}catch(e){return{error:e.message}}}}));l()({typeTag:"remove-all-transactions",handle:async e=>{const t=await(0,V.A)(e.publicDeriverId),a=(0,K.JM)(t);if(!a)throw new Error("unexpected missing asHasLevels result");await(0,Z.ew)({publicDeriver:a});const r=await(0,U.loadSubmittedTransactions)();if(!r)return;const s=p()(r).call(r,(({publicDeriverId:t})=>t!==e.publicDeriverId));await(0,U.persistSubmittedTransactions)(s)}}),l()({typeTag:"pop-address",handle:async e=>{const t=await(0,V.A)(e.publicDeriverId),a=(0,K.Bq)(t);if(null==a)throw new Error("unexpected missing asDisplayCutoff result");await a.popAddress()}}),l()({typeTag:"refresh-transactions",handle:async e=>{const t=await(0,V.A)(e.publicDeriverId),a=(0,K.JM)(t);if(!a)throw new Error("unexpected missing asHasLevels result");const r=await(0,H.s)(new U.default),s=new F.ZP,n={publicDeriver:a,isLocalRequest:!0,getRecentTransactionHashes:r.getRecentTransactionHashes,getTransactionsByHashes:r.getTransactionsByHashes,checkAddressesInUse:r.checkAddressesInUse,getBestBlock:r.getBestBlock,getTokenInfo:r.getTokenInfo,getMultiAssetMetadata:r.getMultiAssetMintMetadata,getMultiAssetSupply:r.getMultiAssetSupply,getTransactionHistory:r.getTransactionsHistoryForAddresses};let o;if("number"==typeof e.skip&&e.limit&&e.beforeTx){const{skip:t,limit:a,beforeTx:r}=e;n.skip=t,n.limit=a;const i=await s.refreshTransactions(n);if(i.length===a)o=i;else{n.beforeTx=i.length?i[i.length-1]:r,n.isLocalRequest=!1;const e=await s.refreshTransactions(n);o=[...i,...W()(e).call(e,0,a-i.length)]}}else o=await s.refreshTransactions(n);return b()(o)}});var $=a(72119),J=a.n($),X=a(59927);const Q=l()({typeTag:"get-all-explorers",handle:async()=>{const e=await(0,M.zA)(),t=await(0,X.o2)({db:e});return[...J()(t).call(t)]}}),ee=l()({typeTag:"get-selected-explorer",handle:async()=>{const e=await(0,M.zA)(),t=await(0,X.Gb)({db:e});return[...J()(t).call(t)]}}),te=l()({typeTag:"save-selected-explorer",handle:async e=>{const t=await(0,M.zA)();return await(0,X.Qy)({db:t,explorer:e.explorer})}});var ae=a(57096),re=a(36384),se=a.n(re),ne=a(43577),oe=a(27649),ie=a(75723),le=a(90649);l()({typeTag:"sign-transaction",handle:async e=>{const{publicDeriverId:t,password:a,transactionHex:r}=e,s=await(0,V.A)(t);try{const e=await(0,ne.nH)(s,a,{tx:r,tabId:-1,partialSign:!1}),t=(0,oe.b9)((0,ie.transactionHexToWitnessSet)(r),e);return(0,ie.transactionHexReplaceWitnessSet)(r,t)}catch(e){return{error:e.message}}}});const de=l()({typeTag:"sign-and-broadcast-transaction",handle:async e=>_.RustModule.WasmScope((async t=>{const a=await(0,V.A)(e.publicDeriverId),{senderUtxos:r,unsignedTx:n,metadata:o,wits:i,neededHashes:l,txHash:d}=e;try{const u=(0,K.y9)(a);if(null==u)throw new Error("unexpected missing asGetSigningKey result");if(l.length-i.length>=2)throw new Error("Too many missing witnesses");if(l.length!==i.length){const a=(0,K.Oq)(u);if(null==a)throw new Error("unexpected missing asGetAllAcccounting result");const r=await(0,F.oN)({publicDeriver:a,password:e.password});if(!s()(l).call(l,t.WalletV4.Credential.from_keyhash(r.to_public().hash()).to_hex()))throw new Error("missing witness but it was not ours");i.push(t.WalletV4.make_vkey_witness(t.WalletV4.TransactionHash.from_hex(d),r).to_hex())}const c=_.RustModule.WalletV4.Transaction.from_hex(n),p={senderUtxos:r,unsignedTx:c,metadata:o?t.WalletV4.AuxiliaryData.from_hex(o):void 0,neededStakingKeyHashes:{wits:new(se())(i)}},g=await(0,H.s)(new U.default),h=new F.ZP,{txId:f,signedTxHex:w}=await h.signAndBroadcast({publicDeriver:u,password:e.password,signRequest:p,sendTx:g.sendTx});c.free();try{await(0,ne.xC)(a,t.WalletV4.Transaction.from_hex(w))}catch(e){}return ce(e.publicDeriverId),{txId:f}}catch(e){return{error:e.message}}}))}),ue=l()({typeTag:"broadcast-transaction",handle:async e=>{const t=await(0,V.A)(e.publicDeriverId);let a,r;if(e.signedTxHexArray){var s;a=m()(s=e.signedTxHexArray).call(s,(e=>({id:(0,ie.transactionHexToHash)(e),encodedTx:(0,le.hexToBytes)(e)}))),r=[]}else{const{signedTxHex:t,addressedUtxos:s}=e;if("string"!=typeof t)throw new Error("unexpected missing `signedTxHex` in request");a=[{id:(0,ie.transactionHexToHash)(t),encodedTx:(0,le.hexToBytes)(t)}],r=[s]}const n=await(0,H.s)(new U.default);try{await n.sendTx({network:t.getParent().getNetworkInfo(),txs:a});try{for(let e=0;e<a.length;e++)await _.RustModule.WasmScope((s=>(0,ne.xC)(t,s.WalletV4.Transaction.from_bytes(a[e].encodedTx),r[e])))}catch(e){}return ce(e.publicDeriverId),null}catch(e){return{error:e.message}}}});function ce(e){(async()=>{(0,O.aR)({type:"wallet-state-update",params:{eventType:"update",publicDeriverId:e,isRefreshing:!1,walletState:(await(0,L.k)(e))[0],newTxs:[]}})})().catch(console.error)}var pe=a(42140),ge=a(13469),he=(a(63139),a(33913));function fe(e){return new(v())(((t,a)=>{var r;const s={type:e.type,request:b()(null!==(r=e.request)&&void 0!==r?r:null)};window.chrome.runtime.sendMessage(s,(r=>{var s;console.debug(`CLIENT [${e.type}] received result: `,b()((0,le.sanitizeForLog)(r))),window.chrome.runtime.lastError?a(`Error ${window.chrome.runtime.lastError} when calling the background with: ${null!==(s=b()((0,le.sanitizeForLog)(e)))&&void 0!==s?s:"undefined"}`):t(r)}))}))}function we(e){var t;const a=e=>m()(e).call(e,(e=>m()(e).call(e,(e=>({...e,values:w()(e)&&I.a.from(w()(e))})))));return e.submittedTransactions=m()(t=e.submittedTransactions).call(t,(({networkId:e,publicDeriverId:t,transaction:a,usedUtxos:r,isDrepDelegation:s})=>({networkId:e,publicDeriverId:t,transaction:(0,T.T)(a),usedUtxos:r,isDrepDelegation:s}))),e.balance=I.a.from(e.balance),e.assetDeposits=I.a.from(e.assetDeposits),e.allAddressesByType=a(e.allAddressesByType),e.internalAddressesByType=a(e.internalAddressesByType),e.externalAddressesByType=a(e.externalAddressesByType),e}async function ye(e){const t=await fe({type:Y.typeTag,request:{walletId:e}});if(t.error)throw console.error("error when loading wallets:",t.error),new Error(`error when loading wallets: ${t.error}`);if(!h()(t))throw new Error(`loading wallets not array: ${b()(t)}`);for(const e of t)we(e);return t}async function me(e){var t;const a=e.signRequest.unsignedTx.build_tx(),r=a.body(),s=_.RustModule.WalletV4.hash_transaction(r),n={senderUtxos:e.signRequest.senderUtxos,unsignedTx:a.to_hex(),metadata:null===(t=e.signRequest.metadata)||void 0===t?void 0:t.to_hex(),neededHashes:[...e.signRequest.neededStakingKeyHashes.neededHashes],wits:[...e.signRequest.neededStakingKeyHashes.wits],password:e.password,publicDeriverId:e.publicDeriverId,txHash:s.to_hex()};a.free(),r.free(),s.free();const o=await fe({type:de.typeTag,request:n});return Ve(o),Ue(o,k.dJ)}async function xe(e){const t=await fe({type:ue.typeTag,request:e});if(Ve(t),null!=t&&t.error)throw new Error(t.error)}async function be(e){return Ue(await fe({type:q.typeTag,request:e}),he.UZ)}const Ae=async e=>await fe({type:ae.I.typeTag,request:e});async function ve(e){return Ue(await fe({type:pe.Xm.typeTag,request:e}),he.UZ)}async function _e(){return new(u())(await fe({type:ee.typeTag}))}async function Te(){return new(u())(await fe({type:Q.typeTag}))}const Ee=async e=>await fe({type:te.typeTag,request:e}),Ie=async e=>await fe({type:C.k.typeTag,request:e}),ke=async()=>{await fe({type:C.X.typeTag})},Ce=async e=>{await fe({type:pe.ln.typeTag,request:e})},De=async e=>{await fe({type:pe.aV.typeTag,request:e})},Me=async e=>{await fe({type:pe.FS.typeTag,request:e})},Se=async e=>{await fe({type:pe.RX.typeTag,request:e})},Re=async()=>await fe({type:pe.U9.typeTag}),We=async()=>await fe({type:pe.b.typeTag}),Be=async e=>{await fe({type:pe.oZ.typeTag,request:e})},Pe=async()=>await fe({type:pe.MH.typeTag}),Ne=async({networkId:e})=>await fe({type:z.Zc.typeTag,request:{networkId:e}}),Fe=l()({walletStateUpdate:[],serverStatusUpdate:[],coinPriceUpdate:[]}),Oe=window.location.origin||null,Le="yoroi-emit-update";function He(e){Fe.coinPriceUpdate.push(e)}function Ue(e,t){var a;if("string"==typeof e.error&&s()(a=e.error).call(a,k.dJ.errorId))throw new t;if(e.error)throw new k.qH;return e}function Ve(e){var t;if(null!=e&&null!==(t=e.error)&&void 0!==t&&s()(t).call(t,"api.errors.invalidWitnessError"))throw new k.kl}chrome.runtime.onMessage.addListener(((e,{origin:t},a)=>{if(null!=Oe&&t!==Oe)return void ge.Yd.debug("[client] ignoring non-origin message ("+t+"/"+Oe+")");if(e.type!==Le)return void ge.Yd.debug("[client] ignoring unknown type message ("+e.type+"/"+Le+")");const r=e.data,s=typeof r;if("string"!==s)return void ge.Yd.error("[client] unexpected message type ("+s+") a JSON string is expected, but received: "+b()((0,le.sanitizeForLog)(r)));let n;try{n=JSON.parse(r)}catch(e){return void ge.Yd.error("unparsable message: "+r+" | Error: "+(0,ge.n)(e))}if("object"==typeof n){if(ge.Yd.debug("get message from background:",b()((0,le.sanitizeForLog)(n))),"wallet-state-update"===n.type){var i,l,d;n.params.newTxs&&(n.params.newTxs=p()(l=m()(d=n.params.newTxs).call(d,(e=>{try{return function(e){return null==(null==e?void 0:e.txid)?null:Object.prototype.hasOwnProperty.call(e,"certificates")?T.Z.fromData((0,T.T)(e)):E.Z.fromData((0,E.T)(e))}(e)}catch(t){return console.error("Failed to deserialize a transaction from: "+b()(e),t),null}}))).call(l,Boolean)),n.params.walletState&&we(n.params.walletState),o()(i=Fe.walletStateUpdate).call(i,(e=>e(n.params)))}else if("server-status-update"===n.type){var u;o()(u=Fe.serverStatusUpdate).call(u,(e=>e(n.params)))}else if("coin-price-update"===n.type){var c;o()(c=Fe.coinPriceUpdate).call(c,(e=>e(n.params)))}}else ge.Yd.error("unrecognizable message type: "+typeof n+" (expected object); Original message: "+r)}))},69051:(e,t,a)=>{a.d(t,{default:()=>g});var r,s,n=a(87672),o=a.n(n),i=a(67294),l=a(70798),d=a(94184),u=a.n(d),c=a(11798),p=a(48521);let g=(0,l.Pi)((s=class extends i.Component{constructor(...e){super(...e),o()(this,"root",void 0)}render(){const e=1-(this.props.small?1:0)+(this.props.large?1:0),t=[c.Z.smallSize,c.Z.standardSize,c.Z.largeSize][e],a=!0===this.props.light?c.Z.light:c.Z.dark,r=u()([c.Z.component,a,t]);return(0,p.jsx)("div",{className:r,id:this.props.id&&this.props.id+"-loadingSpinner-component",ref:e=>{this.root=e}})}},o()(s,"defaultProps",{small:!1,large:!1,light:!1,id:"somewhere"}),r=s))||r},66905:(e,t,a)=>{a.d(t,{yK:()=>o,r7:()=>i,M8:()=>l,C4:()=>d,OC:()=>u,Iz:()=>c,x_:()=>p,Q:()=>g});var r=a(56474),s=a.n(r),n=a(905);new n.Z(10).pow(8);const o=2147483648,i=s()({BIP44:2147483692,CIP1852:2147485500}),l=s()({CARDANO:2147485463}),d=20,u=s()({EXTERNAL:0,INTERNAL:1,CHIMERIC_ACCOUNT:2,GOVERNANCE_DREP_KEYS:3}),c=0,p=0,g=2160;new n.Z(25e6)},90649:(e,t,a)=>{a.d(t,{bytesToHex:()=>M,bytesToBase64:()=>S,hexToBytes:()=>R,hexToUtf:()=>W,utfToBytes:()=>B,logErr:()=>P,createFilterUniqueBy:()=>N,listValues:()=>F,last:()=>O,maybe:()=>L,noop:()=>H,fail:()=>U,forceNonNull:()=>V,purify:()=>G,isEmptyArray:()=>j,sanitizeForLog:()=>K,ensureArray:()=>Z,iterateLenGet:()=>z,iterateLenGetMap:()=>Y});var r=a(2991),s=a.n(r),n=a(20116),o=a.n(n),i=a(66419),l=a.n(i),d=a(98341),u=a.n(d),c=a(87672),p=a.n(c),g=a(16976),h=a.n(g),f=a(69301),w=a.n(f),y=a(86902),m=a.n(y),x=(a(11128),a(41511)),b=a.n(x),A=(a(33032),a(93476),a(59340)),v=a.n(A),_=a(32366),T=a.n(_),E=(a(47302),a(26295),a(20455)),I=a.n(E),k=a(36384),C=a.n(k),D=(a(29828),a(48764).Buffer);function M(e){return D.from(e).toString("hex")}function S(e){return D.from(e).toString("base64")}function R(e){return D.from(e,"hex")}function W(e){return R(e).toString("utf-8")}function B(e){return D.from(e,"utf-8")}function P(e,t){try{return e()}catch(e){throw console.error("string"==typeof t?t:t(e),e),e}}function N(e=(e=>e)){const t=new(C());return a=>{const r=e(a);return!t.has(r)&&t.add(r)&&!0}}function F(e){return I()(e)}function O(e){return e[e.length-1]}function L(e,t){return null==e?e:t(e)}function H(...e){}function U(...e){throw new Error(...e)}function V(e){return e}function G(e){return JSON.parse(v()(e))}function j(e){return b()(e)&&0===e.length}function K(e){const t=["password"];if(null!=e&&"object"==typeof e){var a;let r=T()(a=m()(e)).call(a,((t,a)=>({...t,[a]:K(e[a])})),{});for(const e of t)null!=r[e]&&(r={...r,[e]:"[sanitized]"});return r}return e}function Z(e){return b()(e)?e:[e]}function z(e){return q.from(function*(){if(null!=e){const t=e.len();for(let a=0;a<t;a++)yield e.get(a)}}())}function Y(e){return $.fromTuples(function*(){if(e)for(const t of z(w()(e).call(e)))yield[t,e.get(t)]}())}class q{constructor(e){p()(this,"__source",void 0),this.__source=e}static from(e){return new q(e)}[u()](){return h()(this.__source)}forEach(e){for(const t of this.__source)e(t)}zip(e){return function(e,t){return q.from(function*(){const a=h()(e),r=h()(t);for(;;){const e=a.next(),t=r.next();if(e.done||t.done)break;yield[e.value,t.value]}}())}(this.__source,e)}join(e){const t=this.__source;return q.from(function*(){for(const e of t)yield e;for(const t of e)yield t}())}toArray(){return l()(this.__source)}toSet(){return new(C())(this.__source)}map(e){const t=this.__source;return q.from(function*(){for(const a of t)yield e(a)}())}flatMap(e){const t=this.__source;return q.from(function*(){for(const a of t)for(const t of e(a))yield t}())}filter(e){const t=this.__source;return q.from(function*(){for(const a of t)e(a)&&(yield a)}())}unique(){const e=new(C());return o()(this).call(this,(t=>!e.has(t)&&(e.add(t),!0)))}nonNull(){return o()(this).call(this,(e=>null!=e))}}class $ extends q{static fromTuples(e){return new $(e)}keys(){return s()(this).call(this,(([e])=>e))}values(){return s()(this).call(this,(([,e])=>e))}nonNullValue(){return $.fromTuples(o()(this).call(this,(([,e])=>null!=e)))}}},85412:(e,t,a)=>{a.d(t,{N:()=>u,Z:()=>c});var r=a(12355),s=a(35487);const n=[null];function o(){return"chrome-extension:"===location.protocol}function i(){return"moz-extension:"===location.protocol}function l(){return o()||i()}function d(){return null!=n[0]?n[0]:!!i()||!l()&&"undefined"!=typeof InstallTrigger}"undefined"!=typeof browser&&browser.runtime.getBrowserInfo().then((({name:e})=>{const t="Firefox"===e;return console.debug(`isFirefox = ${String(t)} / defined by browser info API`),n[0]=t,null})).catch((e=>{console.error("failed to call browser info API",e)}));const u={NODE_ENV:"production",COMMIT:"52d418fb6911df36ecd7dde14af100f5308badec",BRANCH:"develop",NIGHTLY:!0,POOLS_UI_URL_FOR_YOROI:"https://adapools.yoroiwallet.com",IS_LIGHT:!1,getNetworkName:()=>"mainnet",getVersion:function(){const e=a(51887);return(void 0!==e.default?e.default(!0):e()).version},MOBX_DEV_TOOLS:{NODE_ENV:"production",COMMIT:"52d418fb6911df36ecd7dde14af100f5308badec",BRANCH:"develop",NIGHTLY:!0,POOLS_UI_URL_FOR_YOROI:"https://adapools.yoroiwallet.com",IS_LIGHT:!1}.MOBX_DEV_TOOLS,commit:"52d418fb6911df36ecd7dde14af100f5308badec",isJest:()=>!1,branch:"develop",isDev:()=>!1,isNightly:()=>JSON.parse(!0),isLight:Boolean(!1),isTest:()=>"mainnet"===r.t.TEST,isMainnet:()=>u.getNetworkName()===r.t.MAINNET,isProduction:()=>!0,getWalletRefreshInterval:()=>3e4,getServerStatusRefreshInterval:()=>2e4,userAgentInfo:s.Z,isFirefox:d,isChrome:function(){return!!o()||!l()&&!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime||d())},isExtension:l,canRegisterProtocol:function(){return!(l()&&d()||!l()&&"https:"!==window.location.protocol)},externalPrivacyPolicyURL:()=>d()?"https://addons.mozilla.org/en-US/firefox/addon/yoroi/privacy":null},c=u},63139:(e,t,a)=>{a.d(t,{UnexpectedError:()=>u,default:()=>c});var r=a(59340),s=a.n(r),n=a(87672),o=a.n(n),i=a(27216);const l=(0,a(99095).defineMessages)({unknownError:{id:"app.errors.unknowError",defaultMessage:"!!!Unknown error occurred. Please retry."},unexpectedError:{id:"app.errors.unexpectedError",defaultMessage:"!!!Unexpected error occurred. Please retry."}});class d extends i.Z{constructor({id:e,defaultMessage:t,values:a}){if(!e)throw new Error("id:string is required.");if(null==t)throw new Error("defaultMessage:string is required.");super(`${e}: ${void 0===a?"undefined":s()(a)}`),o()(this,"id",void 0),o()(this,"defaultMessage",void 0),o()(this,"values",void 0),this.id=e,this.defaultMessage=t,this.values=a||{}}}class u extends d{constructor(){super({id:l.unexpectedError.id,defaultMessage:l.unexpectedError.defaultMessage||""})}}const c=d},38043:(e,t,a)=>{a.d(t,{default:()=>s,connectorMessages:()=>n});var r=a(99095);const s=(0,r.defineMessages)({receive:{id:"global.receive",defaultMessage:"!!!Receive"},send:{id:"wallet.navigation.send",defaultMessage:"!!!Send"},yoroi:{id:"global.yoroi",defaultMessage:"!!!Yoroi"},yoroiNightly:{id:"global.yoroiNightly",defaultMessage:"!!!Yoroi Nightly"},yoroiIntro:{id:"global.yoroi.intro",defaultMessage:"!!!Light wallet for Cardano assets"},here:{id:"global.util.here",defaultMessage:"!!!here"},addToken:{id:"global.labels.addToken",defaultMessage:"!!!Add Token"},addNft:{id:"global.labels.addNft",defaultMessage:"!!!Add NFT"},nfts:{id:"global.labels.nft",defaultMessage:"!!!NFTs"},passwordLabel:{id:"global.labels.password",defaultMessage:"!!!Password"},standardWallet:{id:"wallet.nav.type.standard",defaultMessage:"!!!Standard wallet"},transactionFee:{id:"wallet.send.preview.transactionFee",defaultMessage:"!!!Transaction Fee"},trezorWallet:{id:"wallet.nav.type.trezor",defaultMessage:"!!!Trezor wallet"},ledgerWallet:{id:"wallet.nav.type.ledger",defaultMessage:"!!!Ledger wallet"},important:{id:"global.dialogs.important",defaultMessage:"!!!Important"},fieldIsRequired:{id:"global.errors.fieldIsRequired",defaultMessage:"!!!This field is required."},invalidWalletName:{id:"global.errors.invalidWalletName",defaultMessage:"!!!Wallet name requires at least 1 and no more than 40 characters."},invalidWalletPassword:{id:"global.errors.invalidWalletPassword",defaultMessage:"!!!Password requires at least 10 characters."},invalidRepeatPassword:{id:"global.errors.invalidRepeatPassword",defaultMessage:"!!!Passwords do not match. Please retype."},errorLabel:{id:"global.labels.error",defaultMessage:"!!!Error"},processingLabel:{id:"global.labels.processing",defaultMessage:"!!!Processing..."},nextButtonLabel:{id:"global.labels.next",defaultMessage:"!!!Next"},backButtonLabel:{id:"global.labels.back",defaultMessage:"!!!Back"},instructionTitle:{id:"transfer.instructions.instructions.title.label",defaultMessage:"!!!Instructions"},confirm:{id:"global.labels.confirm",defaultMessage:"!!!Confirm"},continue:{id:"global.labels.continue",defaultMessage:"!!!Continue"},current:{id:"global.labels.current",defaultMessage:"!!!Current"},name:{id:"global.labels.name",defaultMessage:"!!!Name"},amount:{id:"global.labels.amount",defaultMessage:"!!!Amount"},minAda:{id:"global.labels.minAda",defaultMessage:"!!!Min-ADA"},id:{id:"global.labels.id",defaultMessage:"!!!ID"},finish:{id:"global.labels.finish",defaultMessage:"!!!Finish"},cancel:{id:"global.labels.cancel",defaultMessage:"!!!Cancel"},close:{id:"global.labels.close",defaultMessage:"!!!Close"},change:{id:"global.labels.change",defaultMessage:"!!!Change"},delegateLabel:{id:"global.labels.delegate",defaultMessage:"!!!Delegate"},create:{id:"global.labels.create",defaultMessage:"!!!Create"},restore:{id:"global.labels.restore",defaultMessage:"!!!Restore"},remove:{id:"global.labels.remove",defaultMessage:"!!!Remove"},cardanoscan:{id:"global.explorers.cardanoscan",defaultMessage:"!!!Cardanoscan"},exportButtonLabel:{id:"wallet.transaction.export.dialog.exportButton.label",defaultMessage:"!!!Export"},derivationPathLabel:{id:"wallet.receive.confirmationDialog.derivationPathLabel",defaultMessage:"!!!Derivation Path"},publicKeyExplanation:{id:"global.publicKey.explanation",defaultMessage:"!!!Public keys allow seeing the wallet history for the wallet, but does <strong>not</strong> allow to spend or move the funds in any way (private key is <strong>not</strong> included)"},whyUse:{id:"global.why",defaultMessage:"!!!This can be used to:"},save:{id:"global.labels.save",defaultMessage:"!!!Save"},learnMore:{id:"global.labels.LearnMore",defaultMessage:"!!!Learn more"},smartContracts:{id:"global.labels.smartContracts",defaultMessage:"!!!Smart contracts"},walletLabel:{id:"settings.menu.wallet.link.label",defaultMessage:"!!!Wallet"},assetDepositLabel:{id:"settings.menu.assetDeposit.link.label",defaultMessage:"!!!Locked assets deposit"},languageEnglish:{id:"global.language.english",defaultMessage:"!!!English"},languageJapanese:{id:"global.language.japanese",defaultMessage:"!!!"},languageRussian:{id:"global.language.russian",defaultMessage:"!!!P"},languageChineseSimplified:{id:"global.language.chinese.simplified",defaultMessage:"!!!"},languageChineseTraditional:{id:"global.language.chinese.traditional",defaultMessage:"!!!"},languageKorean:{id:"global.language.korean",defaultMessage:"!!!"},languageGerman:{id:"global.language.german",defaultMessage:"!!!Deutsch"},languageFrench:{id:"global.language.french",defaultMessage:"!!!Franais"},languagePortuguese:{id:"global.language.portuguese",defaultMessage:"!!!Portugus"},languageDutch:{id:"global.language.dutch",defaultMessage:"!!!Nederlands"},languageIndonesian:{id:"global.language.indonesian",defaultMessage:"!!!Bahasa Indonesia"},languageTurkish:{id:"global.language.turkish",defaultMessage:"!!!Turkish"},languageSpanish:{id:"global.language.spanish",defaultMessage:"!!!Espaol"},languageItalian:{id:"global.language.italian",defaultMessage:"!!!Italiano"},languageCzech:{id:"global.language.czech",defaultMessage:"!!!Czech"},languageSlovak:{id:"global.language.slovak",defaultMessage:"!!!Slovak"},languageVietnamese:{id:"global.language.vietnamese",defaultMessage:"!!!Vietnamese"},addressLabel:{id:"wallet.receive.confirmationDialog.addressLabel",defaultMessage:"!!!Address"},addressesLabel:{id:"wallet.receive.confirmationDialog.addressesLabel",defaultMessage:"!!!Addresses"},addWalletLabel:{id:"wallet.nav.addButton",defaultMessage:"!!!Add new wallet"},allWalletsLabel:{id:"wallet.nav.allWalletsLabel",defaultMessage:"!!!All wallets"},changeWallet:{id:"wallet.nav.changeWallet",defaultMessage:"!!!Change wallet"},attentionHeaderText:{id:"widgets.warningBox.headerText",defaultMessage:"!!!Attention"},recoveryPhraseDialogTitle:{id:"wallet.backup.recovery.phrase.dialog.title",defaultMessage:"!!!Recovery phrase"},faqLinkUrl:{id:"settings.support.faq.faqLinkURL",defaultMessage:"!!!https://yoroi-wallet.com/faq/"},walletSendConfirmationDialogTitle:{id:"wallet.send.confirmationDialog.title",defaultMessage:"!!!Confirm transaction"},walletSendConfirmationAddressToLabel:{id:"wallet.send.confirmationDialog.addressToLabel",defaultMessage:"!!!To"},amountLabel:{id:"wallet.send.confirmationDialog.amountLabel",defaultMessage:"!!!Amount"},walletSendConfirmationFeesLabel:{id:"wallet.send.confirmationDialog.feesLabel",defaultMessage:"!!!Fees"},walletSendConfirmationTotalLabel:{id:"wallet.send.confirmationDialog.totalLabel",defaultMessage:"!!!Total"},walletSendConfirmationTxSizeLabel:{id:"wallet.send.confirmationDialog.txSizeLabel",defaultMessage:"!!!Size"},connectLabel:{id:"wallet.connect.hw.dialog.connect.button.label",defaultMessage:"!!!Connect"},hwConnectDialogSaveButtonLabel:{id:"wallet.connect.hw.dialog.save.button.label",defaultMessage:"!!!Save"},hwConnectDialogAboutPrerequisite4:{id:"wallet.connect.hw.dialog.step.about.prerequisite.4",defaultMessage:"!!!Your computer must remain connected to the Internet throughout the process."},hwConnectDialogAboutPrerequisiteHeader:{id:"wallet.connect.hw.dialog.step.about.prerequisite.header",defaultMessage:"!!!Prerequisites"},hwConnectDialogConnectIntroTextLine3:{id:"wallet.connect.hw.dialog.step.connect.introText.line.3",defaultMessage:"!!!This process shares the Cardano public key with Yoroi."},hwConnectDialogSaveWalletNameInputLabel:{id:"wallet.connect.hw.dialog.step.save.walletName.label",defaultMessage:"!!!Wallet name"},hwConnectDialogSaveWalletNameInputPH:{id:"wallet.connect.hw.dialog.step.save.walletName.hint",defaultMessage:"!!!Enter wallet name"},ledgerConnectAllDialogTitle:{id:"wallet.connect.ledger.dialog.title.label",defaultMessage:"!!!Connect to Ledger Hardware Wallet"},ledgerError101:{id:"wallet.connect.ledger.error.101",defaultMessage:"!!!Failed to connect. Please check your ledger device and retry."},trezorConnectAllDialogTitle:{id:"wallet.connect.trezor.dialog.title.label",defaultMessage:"!!!Connect to Trezor Hardware Wallet"},trezorError101:{id:"wallet.connect.trezor.error.101",defaultMessage:"!!!Failed to connect trezor.io. Please check your Internet connection and retry."},hwError101:{id:"wallet.hw.common.error.101",defaultMessage:"!!!Necessary permissions were not granted by the user. Please retry."},trezorError103:{id:"wallet.connect.trezor.error.103",defaultMessage:"!!!Cancelled. Please retry."},walletCreatedNotificationMessage:{id:"wallet.summary.page.walletCreatedNotificationMessage",defaultMessage:"!!!You have successfully created a new wallet"},walletRestoredNotificationMessage:{id:"wallet.summary.page.walletRestoredNotificationMessage",defaultMessage:"!!!You have successfully restored your wallet"},integratedNotificationMessage:{id:"wallet.summary.page.integratedNotificationMessage",defaultMessage:"!!!You have successfully integrated with your {deviceName}"},noTransactionsFound:{id:"wallet.summary.no.transaction",defaultMessage:"!!!No transaction history."},assetSelect:{id:"global.selectAsset.labael",defaultMessage:"!!!Select asset"},assets:{id:"global.label.assets",defaultMessage:"!!!assets"},success:{id:"global.label.success",defaultMessage:"!!!Success"},step1:{id:"transfer.form.instructions.step1.text",defaultMessage:"!!!It will take about 1 minute to restore your balance. In the next step, you will be presented with a transaction that will move all of your funds. Please review the details of the transaction carefully. You will need to pay a standard transaction fee on the Cardano network to make the transaction."},feeLabel:{id:"wallet.transaction.fee",defaultMessage:"!!!Fee"},languageSelectLabel:{id:"profile.languageSelect.form.languageSelectLabel",defaultMessage:"!!!Select your language"},languageSelectLabelShort:{id:"profile.languageSelect.form.languageSelectLabelShort",defaultMessage:"!!!Select language"},languageSelectLabelInfo:{id:"settings.general.languageSelect.labelInfo",defaultMessage:"!!!The selected language translation is fully provided by the community"},languageSelectInfo:{id:"settings.general.languageSelect.info",defaultMessage:"!!!For EMURGO, friendliness in Yoroi is an important topic. We believe understanding blockchain concepts is easier in your native language. We try supporting as many languages as possible, but for a broader selection of languages we need to accept the help from community translators. The selected language translation is fully provided by the community."},translationAcknowledgment:{id:"settings.general.translation.acknowledgment",defaultMessage:"!!!Thanks to the following"},translationContributors:{id:"settings.general.translation.contributors",defaultMessage:"_"},paperPasswordLabel:{id:"wallet.restore.dialog.paperPasswordLabel",defaultMessage:"!!!Paper wallet password"},shortRecoveryPhrase:{id:"wallet.restore.dialog.form.errors.shortRecoveryPhrase",defaultMessage:"!!!Short recovery phrase"},goBack:{id:"global.labels.goBack",defaultMessage:"!!!Go back label"},allowLabel:{id:"global.label.allow",defaultMessage:"!!!Allow"},contactSupport:{id:"global.contact",defaultMessage:"!!!contact support"},staleTxnWarningLine1:{id:"global.staleTxnWarningLine1",defaultMessage:"!!!Your wallet has changed since you created this transaction."},staleTxnWarningLine2:{id:"global.staleTxnWarningLine2",defaultMessage:"!!!You can still send this transaction but it may fail."},forMoreHelp:{id:"loading.screen.error",defaultMessage:"!!!Unexpected error occurred. We apologize for the inconvenience. If this error persists, please reach out to our support team {supportRequestLink}"},logsContent:{id:"settings.support.logs.content",defaultMessage:"!!!If you want to inspect logs, you can {downloadLogsLink}. Logs do not contain sensitive information, and it would be helpful to attach them to problem reports to help the team investigate the issue you are experiencing. Logs can be attached automatically when using the bug reporting feature."},downloadLogsLink:{id:"settings.support.logs.downloadLogsLink",defaultMessage:"!!!download them here"},downloadLogsButtonLabel:{id:"settings.support.logs.downloadLogsButtonLabel",defaultMessage:"!!!Download Logs"},blockchainExplorer:{id:"settings.general.explorer",defaultMessage:"!!!explorer"},newPasswordLabel:{id:"wallet.settings.changePassword.dialog.newPasswordLabel",defaultMessage:"!!!New password"},newPasswordFieldPlaceholder:{id:"wallet.settings.changePassword.dialog.newPasswordFieldPlaceholder",defaultMessage:"!!!Type new password"},repeatPasswordLabel:{id:"wallet.settings.changePassword.dialog.repeatPasswordLabel",defaultMessage:"!!!Repeat new password"},repeatPasswordFieldPlaceholder:{id:"wallet.settings.changePassword.dialog.repeatPasswordFieldPlaceholder",defaultMessage:"!!!Type new password"},uriSchemeLabel:{id:"global.uriSchemeTitleLabel",defaultMessage:"!!!Cardano Payment URLs"},uriExplanation:{id:"global.uriExplanation",defaultMessage:"!!!These allow you to easily share invoices with friends and businesses by simply clicking a URL."},uriExplanationRevamp:{id:"global.uriExplanation.revamp",defaultMessage:"!!!Allow URLs to easily share invoices with friends and businesses"},updatePool:{id:"global.updatePool",defaultMessage:"!!!  UPDATE POOL"},copyTooltipMessage:{id:"global.copyTooltipMessage",defaultMessage:"!!!Copied"},attentionTitle:{id:"transfer.instructions.attention.title.label",defaultMessage:"!!!Attention"},invalidMemo:{id:"wallet.transaction.memo.invalid",defaultMessage:"!!!Memo must be at least 1 and at most {maxMemo} characters."},transactionFailed:{id:"wallet.transaction.transactionFailed",defaultMessage:"!!!Transaction failed"},transactionFailedInfo:{id:"wallet.transaction.transactionFailedInfo",defaultMessage:"!!!Your transaction has not been processed properly due to technical issues"},tryAgain:{id:"wallet.transaction.tryAgain",defaultMessage:"!!!Try Again"},transactionSubmitted:{id:"wallet.transaction.transactionSubmitted",defaultMessage:"!!!Transaction submitted"},transactionSubmittedInfo:{id:"wallet.transaction.transactionSubmittedInfo",defaultMessage:"!!!Check this transaction in the list of wallet transactions"},sendingIsDisabled:{id:"wallet.send.form.sendingIsDisabled",defaultMessage:"!!!Unable to process. Please retry after the previous transaction has been completed."},passwordDisclaimer:{id:"wallet.restore.dialog.passwordDisclaimer",defaultMessage:"!!!Typing the wrong wallet password will give you a different wallet. This allows for plausible deniability."},recoveryPhraseInputLabel:{id:"wallet.restore.dialog.recovery.phrase.input.label",defaultMessage:"!!!Recovery phrase"},recoveryPhraseInputHint:{id:"wallet.restore.dialog.recovery.phrase.input.hint",defaultMessage:"!!!Enter recovery phrase"},recoveryPhraseNoResults:{id:"wallet.restore.dialog.recovery.phrase.input.noResults",defaultMessage:"!!!Not found"},invalidRecoveryPhrase:{id:"wallet.restore.dialog.form.errors.invalidRecoveryPhrase",defaultMessage:"!!!Invalid recovery phrase. Please retype."},totalRewardsLabel:{id:"wallet.dashboard.summary.rewardsTitle",defaultMessage:"!!!Total Rewards"},skipLabel:{id:"profile.uriPrompt.form.skipLabel",defaultMessage:"!!!Skip"},checkLabel:{id:"wallet.connect.hw.dialog.step.about.label",defaultMessage:"!!!CHECK"},walletUpgrade:{id:"wallet.backup.dialog.legacy.upgrade",defaultMessage:"!!!Wallet Upgrade"},dateToday:{id:"wallet.summary.page.todayLabel",defaultMessage:"!!!Today"},dateYesterday:{id:"wallet.summary.page.yesterdayLabel",defaultMessage:"!!!Yesterday"},uriLandingDialogConfirmLabel:{id:"uri.landing.dialog.confirm.label",defaultMessage:"!!!I understand"},restoreByronEraWalletDescription:{id:"wallet.add.optionDialog.walletEra.byronEra.description",defaultMessage:"!!!Wallets created before July 29th, 2020 are Byron-era wallets and cannot delegate."},sendButtonLabel:{id:"wallet.send.confirmationDialog.submit",defaultMessage:"!!!Send"},walletPasswordLabel:{id:"wallet.send.confirmationDialog.walletPasswordLabel",defaultMessage:"!!!Password"},walletPasswordFieldPlaceholder:{id:"wallet.send.confirmationDialog.walletPasswordFieldPlaceholder",defaultMessage:"!!!Type your password"},txGeneration:{id:"wallet.delegation.transaction.generation",defaultMessage:"!!!Generating transaction"},poolFetching:{id:"wallet.delegation.poolInfo.fetching",defaultMessage:"!!!Fetching pool information"},transactionId:{id:"wallet.transaction.transactionId",defaultMessage:"!!!Transaction ID"},epochLabel:{id:"global.labels.epoch",defaultMessage:"!!!Epoch"},stakepoolNameLabel:{id:"global.labels.stakepool",defaultMessage:"!!!Stakepool Name"},stakePoolChecksumAndName:{id:"global.labels.stakePoolChecksumAndName",defaultMessage:"!!!Stake pool checksum and name"},rewardsLabel:{id:"global.labels.rewardsLabel",defaultMessage:"!!!Rewards"},rewardsListLabel:{id:"global.labels.rewardsListLabel",defaultMessage:"!!!Rewards list"},totalTokenLabel:{id:"wallet.dashboard.summary.adaTitle",defaultMessage:"!!!Total {ticker}"},marginsLabel:{id:"wallet.dashboard.stakePool.margins",defaultMessage:"!!!Margins"},loadMoreButtonLabel:{id:"global.labels.loadMore",defaultMessage:"!!!Load more"},unknownPoolLabel:{id:"wallet.staking.pool.unknownLabel",defaultMessage:"!!!Unknown pool"},poolSize:{id:"wallet.staking.pool.size",defaultMessage:"!!!Pool size"},poolShare:{id:"wallet.staking.pool.share",defaultMessage:"!!!Share"},poolSaturation:{id:"wallet.staking.pool.saturation",defaultMessage:"!!!Saturation"},sidebarWallets:{id:"sidebar.wallets",defaultMessage:"!!!My wallets"},sidebarAssets:{id:"sidebar.assets",defaultMessage:"!!!Assets"},sidebarSettings:{id:"sidebar.settings",defaultMessage:"!!!Settings"},sidebarGovernance:{id:"sidebar.governance",defaultMessage:"!!!Governance"},sidebarTransfer:{id:"sidebar.transfer",defaultMessage:"!!!Claim or transfer wallet"},stakingDashboard:{id:"sidebar.stakingDashboard",defaultMessage:"!!!Staking Dashboard"},sidebarStaking:{id:"sidebar.staking",defaultMessage:"!!!Staking"},sidebarPortfolio:{id:"sidebar.portfolio",defaultMessage:"!!!Portfolio"},sidebarNfts:{id:"sidebar.nfts",defaultMessage:"!!!NFTs"},sidebarVoting:{id:"sidebar.voting",defaultMessage:"!!!Voting"},sidebarSwap:{id:"sidebar.swap",defaultMessage:"!!!Swap"},sidebarFaq:{id:"sidebar.faq",defaultMessage:"!!!Faq"},sidebarNewUpdates:{id:"sidebar.newUpdates",defaultMessage:"!!!New updates"},sidebarFeedback:{id:"sidebar.feedback",defaultMessage:"!!!Feedback"},ledgerTitle:{id:"wallet.add.optionDialog.connect.hw.ledger.title",defaultMessage:"!!!Ledger Hardware Wallet"},trezorTitle:{id:"wallet.add.optionDialog.connect.hw.trezor.title",defaultMessage:"!!!Trezor Hardware Wallet"},undelegateLabel:{id:"global.labael.undelegate",defaultMessage:"!!!Undelegate"},roa30d:{id:"wallet.staking.banner.roa30d",defaultMessage:"!!!ROA 30d"},roaHelperMessage:{id:"wallet.staking.banner.roaHelperMessage",defaultMessage:"!!!Estimated ROA (Return of ADA) based on staking result from the last 30 days"},stakePoolDelegated:{id:"wallet.dashboard.upcomingRewards.stakePoolDelegated",defaultMessage:"!!!Stake Pool Delegated"},totalDelegated:{id:"wallet.dashboard.summary.totalDelegated",defaultMessage:"!!!Total Delegated"},overview:{id:"wallet.staking.overview",defaultMessage:"!!!Overview"},rewardHistory:{id:"wallet.staking.rewards.rewardHistory",defaultMessage:"!!!Reward History"},rewardValue:{id:"wallet.staking.rewards.rewardValue",defaultMessage:"!!!Reward value"},openRewardHistory:{id:"wallet.staking.rewards.openRewardHistory",defaultMessage:"!!!Open Reward History"},epochProgress:{id:"wallet.staking.epochProgress",defaultMessage:"!!!Epoch Progress"},epochs:{id:"wallet.staking.epochsLabel",defaultMessage:"!!!Epochs"},tokens:{id:"wallet.assets.tokens",defaultMessage:"!!!Tokens"},fingerprint:{id:"wallet.assets.fingerprint",defaultMessage:"!!!Fingerprint"},auditAddressWarning:{id:"wallet.receive.page.internalWarning2",defaultMessage:"!!!addresses are shown here for personal auditing purposes and should never be used."},rewardAddressesTitle:{id:"wallet.receive.page.rewardAddressesTitle",defaultMessage:"!!!Reward addresses"},internalAddressesTitle:{id:"wallet.receive.page.internalAddressesTitle",defaultMessage:"!!!Internal addresses"},lastSyncMessage:{id:"myWallets.wallets.lastSyncText",defaultMessage:"!!!Last sync"},neverSyncedMessage:{id:"myWallets.wallets.neverSync",defaultMessage:"!!!Never synced"},createWalletLabel:{id:"wallet.add.page.create.title",defaultMessage:"!!!Create Wallet"},allLabel:{id:"wallet.receive.navigation.allLabel",defaultMessage:"!!!All"},noteLabel:{id:"global.labels.note",defaultMessage:"!!!Note:"},upgradeLabel:{id:"global.labels.upgrade",defaultMessage:"!!!Upgrade"},pendingTxWarning:{id:"wallet.staking.warning.pendingTx",defaultMessage:"!!!You cannot change your delegation preference while a transaction is pending"},stakePoolHash:{id:"wallet.delegation.transaction.stakePoolHash",defaultMessage:"!!!Stake pool id"},finalBalanceLabel:{id:"transfer.summary.finalBalance.label",defaultMessage:"!!!Final balance"},StakeDeregistration:{id:"wallet.transaction.certificate.StakeDeregistration",defaultMessage:"!!!Staking key deregistration"},withdrawalsLabel:{id:"wallet.transaction.withdrawalsLabel",defaultMessage:"!!!Withdrawals"},withdrawLabel:{id:"wallet.transaction.withdraw",defaultMessage:"!!!Withdraw"},byronLabel:{id:"wallet.receive.navigation.byronLabel",defaultMessage:"!!!Byron"},shelleyLabel:{id:"global.labels.shelleyLabel",defaultMessage:"!!!Shelley"},spendingKeyHashLabel:{id:"global.labels.spendingKeyHash",defaultMessage:"!!!Spending key hash"},stakingKeyHashLabel:{id:"global.labels.stakingKeyHash",defaultMessage:"!!!Staking key hash"},keyRegistrationPointer:{id:"global.labels.keyRegistrationPointer",defaultMessage:"!!!Key registration pointer"},support:{id:"settings.menu.support.link.label",defaultMessage:"!!!Support"},termsOfUse:{id:"settings.menu.termsOfUse.link.label",defaultMessage:"!!!Terms of use"},termsOfService:{id:"settings.menu.termsOfService.link.label",defaultMessage:"!!!Terms of Service Agreement"},fromAddresses:{id:"wallet.transaction.addresses.from",defaultMessage:"!!!From addresses"},toAddresses:{id:"wallet.transaction.addresses.to",defaultMessage:"!!!To addresses"},resyncButtonLabel:{id:"wallet.settings.resync.buttonLabel",defaultMessage:"!!!Resync wallet"},blogLinkWrapper:{id:"settings.support.faq.blogLinkWrapper",defaultMessage:"!!!blog post"},blogLearnMore:{id:"global.blog.learnMore",defaultMessage:"!!!You can read our {blogLink} to learn more."},keyLabel:{id:"global.key.label",defaultMessage:"!!!Key"},stepPin:{id:"wallet.voting.dialog.stepPin",defaultMessage:"!!!PIN"},stepConfirm:{id:"wallet.voting.dialog.stepConfirm",defaultMessage:"!!!Confirm"},registerLabel:{id:"wallet.voting.dialog.registerLabel",defaultMessage:"!!!Register"},transactionLabel:{id:"wallet.voting.dialog.transactionLabel",defaultMessage:"!!!Transaction"},stepQrCode:{id:"wallet.voting.dialog.stepQrCode",defaultMessage:"!!!QR Code"},votingRegistrationTitle:{id:"wallet.voting.dialog.title",defaultMessage:"!!!Register for Voting"},confirmPin:{id:"wallet.voting.dialog.confirmPin",defaultMessage:"!!!Confirm PIN"},pinDoesNotMatch:{id:"global.errors.pinDoesNotMatch",defaultMessage:"!!!PIN codes do not match. Please retype."},invalidPin:{id:"global.errors.invalidPin",defaultMessage:"!!!Invalid PIN. Please retype."},buyAda:{id:"button.buyAda",defaultMessage:"!!!Buy ADA"},sellAda:{id:"button.sellAda",defaultMessage:"!!!Sell ADA"},buySellAda:{id:"button.buySellAda",defaultMessage:"!!!Buy/Sell ADA"},txConfirmationLedgerNanoLine2:{id:"wallet.send.ledger.confirmationDialog.info.line.2",defaultMessage:"!!!Make sure Cardano ADA app must remain open on the Ledger device throughout the process."},txConfirmationTrezorTLine2:{id:"wallet.send.trezor.confirmationDialog.info.line.2",defaultMessage:"!!!A new tab will appear. Please follow the instructions in the new tab."},syncing:{id:"wallet.syncing",defaultMessage:"!!!Syncing..."},loading:{id:"wallet.loading",defaultMessage:"!!!Loading..."},confirmOnLedger:{id:"label.confirm.ledger",defaultMessage:"!!!Confirm on Ledger"},confirmOnTrezor:{id:"label.confirm.trezor",defaultMessage:"!!!Confirm on Trezor"},tosAgreement:{id:"profile.languageSelect.tosAgreement",defaultMessage:'!!!I agree with <span id="tosLink">Terms of Service Agreement</span> and <span id="privacyLink">Privacy Notice</span>'},poolNotGenerating:{id:"wallet.transitionDialog.poolNotGenerating",defaultMessage:"!!!This pool is NOT generating staking rewards anymore"},goToTransactions:{id:"wallet.transaction.success.button.label",defaultMessage:"!!!Go To Transactions"},provider:{id:"buysell.dialog.provider",defaultMessage:"!!!Provider"}}),n=((0,r.defineMessages)({memoLabel:{id:"global.labels.memo",defaultMessage:"!!!Memo"},addMemo:{id:"global.labels.addMemo",defaultMessage:"!!!Add memo"},editMemo:{id:"global.labels.editMemo",defaultMessage:"!!!Edit memo"},deleteMemo:{id:"global.labels.deleteMemo",defaultMessage:"!!!Delete memo"},optionalMemo:{id:"global.labels.optionalMemo",defaultMessage:"!!!Memo (optional)"},memoWarning:{id:"wallet.send.form.memoWarning",defaultMessage:"!!!(Optional) Memo is stored locally"}}),(0,r.defineMessages)({connectedWebsites:{id:"global.connector.connectedWebsites",defaultMessage:"!!!Connected Websites"},messageReadOnly:{id:"global.connector.messageReadOnly",defaultMessage:"!!!We are granting read-only to view utxos/addresses."},about:{id:"connector.settings.about",defaultMessage:"!!!About"},signTransaction:{id:"connector.settings.signTransaction",defaultMessage:"!!!Sign transaction"},signData:{id:"connector.signin.signData",defaultMessage:"!!!Sign data"},connect:{id:"connector.settings.connect",defaultMessage:"!!!Connect"},dappConnector:{id:"connector.appName",defaultMessage:"!!!Dapp Connector"},connector:{id:"connector.appNameShort",defaultMessage:"!!!Connector"},yourAddresses:{id:"connector.yourAddresses",defaultMessage:"!!!Your Addresses"},foreignAddresses:{id:"connector.foreignAddresses",defaultMessage:"!!!Foreign Addresses"},fromWallet:{id:"connector.fromWallet",defaultMessage:"!!!From wallet"},fromAddresses:{id:"connector.from",defaultMessage:"!!!From (Inputs): {qty}"},toAddresses:{id:"connector.to",defaultMessage:"!!!To (Outputs): {qty}"},send:{id:"wallet.navigation.send",defaultMessage:"!!!Send"},receive:{id:"wallet.navigation.receive",defaultMessage:"!!!Receive"},assetsSent:{id:"connector.assetsSent",defaultMessage:"!!!{quantity} assets sent"},assetsReceived:{id:"connector.assetsReceived",defaultMessage:"!!!{quantity} assets received"},assetSent:{id:"connector.assetSent",defaultMessage:"!!!{assetName} sent"},assetReceived:{id:"connector.assetReceived",defaultMessage:"!!!{assetName} received"},noAssetsSent:{id:"connector.noAssetsSent",defaultMessage:"!!!No assets sent"},noAssetsReceived:{id:"connector.noAssetsReceived",defaultMessage:"!!!No assets received"}}))},70210:(e,t,a)=>{a.d(t,{Iz:()=>oe,a2:()=>ie});var r,s=a(69301),n=a.n(s),o=a(78914),i=a.n(o),l=a(56474),d=a.n(l),u=a(6467),c=a.n(u),p=a(4187),g=a.n(p),h=a(63151),f=a.n(h),w=a(13655),y=a.n(w),m=a(51949),x=a.n(m),b=a(51738),A=a.n(b),v=a(54206),_=a.n(v),T=a(95383),E=a.n(T),I=a(68333),k=a.n(I),C=a(75686),D=a.n(C),M=a(32820),S=a.n(M),R=a(78398),W=a.n(R),B=a(88495),P=a.n(B),N=a(7637),F=a.n(N),O=a(72198),L=a.n(O),H=a(22669),U=a.n(H),V=a(38043),G=a(44435),j=a(82442),K=a(5511),Z=a(72284),z=a(22253),Y=a(83818),q=a(37061),$=a(22219),J=a(11045),X=a(45619),Q=a(43507),ee=a(89157),te=a(78789),ae=a(70593),re=a(33494),se=a(6711);d()([...c(),...g(),...f(),...y(),...x(),...A(),..._(),...E(),...k(),...D(),...S(),...W(),...P(),...F(),...L(),...U()]);const ne=a(88754),oe={};i()(r=n()(ne).call(ne)).call(r,(e=>{const t=e.replace("./","").replace(".json","");oe[t]=ne(e)}));const ie=[{value:"en-US",label:V.default.languageEnglish,svg:G.r},{value:"ja-JP",label:V.default.languageJapanese,svg:j.r},{value:"ko-KR",label:V.default.languageKorean,svg:K.r},{value:"zh-Hans",label:V.default.languageChineseSimplified,svg:Z.r},{value:"zh-Hant",label:V.default.languageChineseTraditional,svg:Z.r},{value:"ru-RU",label:V.default.languageRussian,svg:z.r},{value:"de-DE",label:V.default.languageGerman,svg:Y.r},{value:"fr-FR",label:V.default.languageFrench,svg:q.r},{value:"nl-NL",label:V.default.languageDutch,svg:$.r},{value:"pt-BR",label:V.default.languagePortuguese,svg:J.r},{value:"es-ES",label:V.default.languageSpanish,svg:X.r},{value:"it-IT",label:V.default.languageItalian,svg:Q.r},{value:"id-ID",label:V.default.languageIndonesian,svg:ee.r},{value:"tr-TR",label:V.default.languageTurkish,svg:te.r},{value:"cs-CZ",label:V.default.languageCzech,svg:ae.r},{value:"sk-SK",label:V.default.languageSlovak,svg:re.r},{value:"vi-VN",label:V.default.languageVietnamese,svg:se.r}]},5227:(e,t,a)=>{a.d(t,{ROUTES:()=>s});const r="/page-error",s={ROOT:"/",PAGE_ERROR:r,NIGHTLY_INFO:"/nightly",MY_WALLETS:"/my-wallets",PROFILE:{LANGUAGE_SELECTION:"/profile/language-selection",TERMS_OF_USE:"/profile/terms-of-use",COMPLEXITY_LEVEL:"/profile/complexity-level",URI_PROMPT:"/profile/uri-prompt",OPT_FOR_ANALYTICS:"/profile/opt-for-analytics"},SWITCH:"/switch",WALLETS:{ROOT:"/wallets",ADD:"/wallets/add",CREATE_NEW_WALLET:"/wallets/new",RESTORE_WALLET:"/wallets/restore",TRANSACTIONS:"/wallets/transactions",SEND:"/wallets/send",ASSETS:"/wallets/assets",RECEIVE:{ROOT:"/wallets/receive",ADDRESS_LIST:"/wallets/receive/:group/:name"},DELEGATION_DASHBOARD:"/wallets/delegation-dashboard",ADAPOOL_DELEGATION_SIMPLE:"/wallets/delegation-simple",CARDANO_DELEGATION:"/wallets/cardano-delegation",CATALYST_VOTING:"/wallets/voting"},SETTINGS:{ROOT:"/settings",GENERAL:"/settings/general",BLOCKCHAIN:"/settings/blockchain",WALLET:"/settings/wallet",EXTERNAL_STORAGE:"/settings/external-storage",TERMS_OF_USE:"/settings/terms-of-use",SUPPORT:"/settings/support",LEVEL_OF_COMPLEXITY:"/settings/level-of-complexity",ANALYTICS:"/settings/analytics",PAPER_WALLET:"/settings/paper-wallet"},TRANSFER:{ROOT:"/transfer"},SEND_FROM_URI:{ROOT:"/send-from-uri"},OAUTH_FROM_EXTERNAL:{DROPBOX:"/foo"},STAKING:"/staking",ASSETS:{ROOT:"/assets",DETAILS:"/assets/tokens/:tokenId"},NFTS:{ROOT:"/nfts",DETAILS:"/nfts/:nftId"},DAPP_CONNECTOR:{CONNECTED_WEBSITES:"/connector/connected-websites"},EXPERIMENTAL:{YOROI_PALETTE:"/experimental/yoroi-palette",YOROI_COMPONENTS:"/experimental/components",THEMES:"/experimental/themes"},REVAMP:{CATALYST_VOTING:"/voting"},SWAP:{ROOT:"/swap",ERROR:"/swap"+r,ORDERS:"/swap/orders"},EXCHANGE_END:"/exchange-end",Governance:{ROOT:"/governance",DELEGATE:"/governance/delagation",SUBMITTED:"/governance/submitted",FAIL:"/governance/failed"},PORTFOLIO:{ROOT:"/portfolio",DAPPS:"/portfolio/dapps",DETAILS:"/portfolio/details/:tokenId"}}},41274:(e,t,a)=>{a.d(t,{JV:()=>A,kh:()=>v,T2:()=>_,z3:()=>T,IJ:()=>E,Wx:()=>I,zq:()=>k,_4:()=>C,gO:()=>D,xP:()=>M});var r,s,n,o,i=a(34074),l=a.n(i),d=a(5838),u=a.n(d),c=a(87672),p=a.n(c),g=a(89749),h=a.n(g),f=(a(18293),a(22188)),w=a(148),y=a(96486),m=a(66905),x=a(38079);let b=(r=class{constructor(e){u()(this,"addressesRequests",s,this),p()(this,"stores",void 0),p()(this,"actions",void 0),p()(this,"request",void 0),u()(this,"refreshAddressesFromDb",n,this),p()(this,"_flowCoerceResult",(e=>(e.result,e.result))),p()(this,"_getRequest",(e=>{const t=(0,y.find)(this.addressesRequests,{publicDeriverId:e});return t&&t.cachedRequest?t.cachedRequest:new w.Z(this.request)})),u()(this,"addObservedWallet",o,this),this.stores=e.stores,this.actions=e.actions,this.request=e.request}get all(){const e=this.stores.wallets.selected;if(!e)return[];const t=this._flowCoerceResult(this._getRequest(e.publicDeriverId));return null==t?[]:t}get wasExecuted(){const e=this.stores.wallets.selected;return!!e&&this._getRequest(e.publicDeriverId).wasExecuted}},s=h()(r.prototype,"addressesRequests",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h()(r.prototype,"all",[f.computed],l()(r.prototype,"all"),r.prototype),h()(r.prototype,"wasExecuted",[f.computed],l()(r.prototype,"wasExecuted"),r.prototype),n=h()(r.prototype,"refreshAddressesFromDb",[f.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{const t=this._getRequest(e.publicDeriverId);t.invalidate({immediately:!1}),await t.execute({publicDeriver:e}).promise}}}),o=h()(r.prototype,"addObservedWallet",[f.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return({publicDeriverId:e})=>{this.addressesRequests.push({publicDeriverId:e,cachedRequest:this._getRequest(e)})}}}),r);class A extends b{constructor(e){return super({stores:e.stores,actions:e.actions,request:t=>e.stores.addresses._wrapForeign({...t,storeName:e.name})}),this}}class v extends b{constructor(e){return super({stores:e.stores,actions:e.actions,request:t=>e.stores.addresses._wrapForAllAddresses({...t,storeName:e.name,type:x.dq.CARDANO_LEGACY})}),this}}class _ extends b{constructor(e){return super({stores:e.stores,actions:e.actions,request:t=>e.stores.addresses._createAddressIfNeeded({publicDeriver:t.publicDeriver,genAddresses:()=>e.stores.addresses._wrapForChainAddresses({...t,storeName:e.name,type:x.dq.CARDANO_LEGACY,chainsRequest:{chainId:m.OC.EXTERNAL}})})}),this}}class T extends b{constructor(e){return super({stores:e.stores,actions:e.actions,request:t=>e.stores.addresses._wrapForChainAddresses({...t,storeName:e.name,type:x.dq.CARDANO_LEGACY,chainsRequest:{chainId:m.OC.INTERNAL}})}),this}}class E extends b{constructor(e){return super({stores:e.stores,actions:e.actions,request:t=>e.stores.addresses._createAddressIfNeeded({publicDeriver:t.publicDeriver,genAddresses:()=>e.stores.addresses._wrapForChainAddresses({...t,storeName:e.name,type:x.dq.CARDANO_BASE,chainsRequest:{chainId:m.OC.EXTERNAL}})})}),this}}class I extends b{constructor(e){return super({stores:e.stores,actions:e.actions,request:t=>e.stores.addresses._createAddressIfNeeded({publicDeriver:t.publicDeriver,genAddresses:()=>e.stores.addresses._wrapForChainAddresses({...t,storeName:e.name,type:x.dq.CARDANO_BASE,chainsRequest:{chainId:m.OC.INTERNAL}})})}),this}}class k extends b{constructor(e){return super({stores:e.stores,actions:e.actions,request:t=>e.stores.addresses._wrapForAllAddresses({publicDeriver:t.publicDeriver,...t,storeName:e.name,type:x.dq.CARDANO_BASE})}),this}}class C extends b{constructor(e){return super({stores:e.stores,actions:e.actions,request:t=>e.stores.addresses._createAddressIfNeeded({publicDeriver:t.publicDeriver,genAddresses:()=>e.stores.addresses._wrapForChainAddresses({...t,storeName:e.name,type:x.dq.CARDANO_ENTERPRISE,chainsRequest:{chainId:m.OC.EXTERNAL}})})}),this}}class D extends b{constructor(e){return super({stores:e.stores,actions:e.actions,request:t=>e.stores.addresses._createAddressIfNeeded({publicDeriver:t.publicDeriver,genAddresses:()=>e.stores.addresses._wrapForChainAddresses({...t,storeName:e.name,type:x.dq.CARDANO_ENTERPRISE,chainsRequest:{chainId:m.OC.INTERNAL}})})}),this}}class M extends b{constructor(e){return super({stores:e.stores,actions:e.actions,request:t=>e.stores.addresses._wrapForAllAddresses({publicDeriver:t.publicDeriver,...t,storeName:e.name,type:x.dq.CARDANO_REWARD})}),this}}},148:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(89837);a(63139);class s extends r.Z{}},39803:(e,t,a)=>{a.d(t,{ZP:()=>D});var r,s,n,o,i,l=a(34074),d=a.n(l),u=a(41511),c=a.n(u),p=a(93476),g=a.n(p),h=a(33032),f=a.n(h),w=a(36384),y=a.n(w),m=a(5838),x=a.n(m),b=a(87672),A=a.n(b),v=a(89749),_=a.n(v),T=(a(18293),a(22188)),E=a(78230),I=a(99095),k=a(63139);const C=(0,I.defineMessages)({apiMethodNotYetImplementedError:{id:"api.errors.ApiMethodNotYetImplementedError",defaultMessage:"!!!This API method is not yet implemented."},promiseNotCalledYetError:{id:"api.errors.PromiseNotCalledYetError",defaultMessage:"!!!Result accessed before execution finished."}});let D=(r=class{constructor(e){x()(this,"result",s,this),x()(this,"error",n,this),x()(this,"isExecuting",o,this),x()(this,"wasExecuted",i,this),A()(this,"currentlyExecuting",new(y())),A()(this,"promise",null),A()(this,"_method",void 0),A()(this,"_isWaitingForResponse",!1),A()(this,"_currentApiCall",null),this._method=e}execute(...e){if(this._isWaitingForResponse)return this;f()((0,T.action)("Request::execute (setting this.isExecuting)",(()=>{this.isExecuting=!0})),0);const t=Math.random();return this.currentlyExecuting.add(t),this.promise=new(g())(((a,r)=>{this._method||r(new M),this._method(...e).then((e=>{if(this.currentlyExecuting.has(t))return this.currentlyExecuting.delete(t),f()((0,T.action)("Request::execute/then",(()=>{null!=this.result&&(0,T.isObservableArray)(this.result)&&c()(e)?this.result.replace(e):this.result=e,this._currentApiCall&&(this._currentApiCall.result=e),this.isExecuting=!1,this.wasExecuted=!0,this.error=null,this._isWaitingForResponse=!1,a(e)})),1),e;a(e)})).catch((0,T.action)("Request::execute/catch",(e=>{this.currentlyExecuting.has(t)?(this.currentlyExecuting.delete(t),f()((0,T.action)((()=>{this.error=e,this.result=null,this.isExecuting=!1,this.wasExecuted=!0,this._isWaitingForResponse=!1,r(e)})),1)):r(e)})))})),this._isWaitingForResponse=!0,this._currentApiCall={args:e,result:null},this}isExecutingWithArgs(...e){return this.isExecuting&&null!=this._currentApiCall&&(0,E.isEqual)(this._currentApiCall.args,e)}get isExecutingFirstTime(){return!this.wasExecuted&&this.isExecuting}then(...e){if(!this.promise)throw new S;return this.promise.then(...e)}catch(...e){if(!this.promise)throw new S;return this.promise.catch(...e)}patch(e){return new(g())((t=>{f()((0,T.action)((()=>{const a=e(this.result);void 0!==a&&(this.result=a),this._currentApiCall&&(this._currentApiCall.result=this.result),t(this)})),0)}))}cancel(){return this.isExecuting=!1,this._isWaitingForResponse=!1,this._currentApiCall=null,this}reset(){this.result=null,this.error=null,this.isExecuting=!1,this.wasExecuted=!1,this._isWaitingForResponse=!1,this._currentApiCall=null}},s=_()(r.prototype,"result",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n=_()(r.prototype,"error",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o=_()(r.prototype,"isExecuting",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=_()(r.prototype,"wasExecuted",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_()(r.prototype,"isExecutingFirstTime",[T.computed],d()(r.prototype,"isExecutingFirstTime"),r.prototype),_()(r.prototype,"cancel",[T.action],d()(r.prototype,"cancel"),r.prototype),_()(r.prototype,"reset",[T.action],d()(r.prototype,"reset"),r.prototype),r);class M extends k.default{constructor(){super({id:C.apiMethodNotYetImplementedError.id,defaultMessage:C.apiMethodNotYetImplementedError.defaultMessage||""})}}class S extends k.default{constructor(){super({id:C.apiMethodNotYetImplementedError.id,defaultMessage:C.apiMethodNotYetImplementedError.defaultMessage||""})}}},45918:(e,t,a)=>{a.d(t,{WH:()=>c}),a(94473),a(89400);var r=a(20116),s=a.n(r),n=a(41274),o=a(3577),i=(a(95667),a(16885));a(5227),a(39329),a(84174);const l=[];function d(e){return l.push(e),e}const u=[i.DN.None,i.DN.Unused,i.DN.Used,i.DN.HasBalance];async function c(e){const t=(0,o.sX)(e);if(t)return(await t.nextInternal()).addressInfo;const a=(0,o.se)(e);if(a){const e=await a.getAllUtxoAddresses(),t=(0,o.h5)(a);if(t)return t.pickReceive(e[0]);const r=e[0];return{addr:r.addrs[0],row:r.row,addressing:r.addressing}}}d({isRelated:()=>!1,class:n.kh,validFilters:u,name:{subgroup:i.CW.all,group:i.m2.byron},isHidden:e=>!1}),d({isRelated:()=>!1,class:n.T2,validFilters:u,name:{subgroup:i.CW.external,group:i.m2.byron},isHidden:e=>!1}),d({isRelated:()=>!1,class:n.z3,validFilters:u,name:{subgroup:i.CW.internal,group:i.m2.byron},isHidden:e=>!1}),d({isRelated:()=>!0,class:n.IJ,validFilters:u,name:{subgroup:i.CW.external,group:i.m2.base},isHidden:e=>!1}),d({isRelated:()=>!0,class:n.Wx,validFilters:u,name:{subgroup:i.CW.internal,group:i.m2.base},isHidden:e=>!1}),d({isRelated:()=>!0,class:n.zq,validFilters:u,name:{subgroup:i.CW.mangled,group:i.m2.base},isHidden:e=>null==e.result||0===e.result.length}),d({isRelated:()=>!0,class:n._4,validFilters:u,name:{subgroup:i.CW.external,group:i.m2.enterprise},isHidden:e=>{var t;return null==e.result||0===s()(t=e.result).call(t,(e=>e.isUsed)).length}}),d({isRelated:()=>!0,class:n.gO,validFilters:u,name:{subgroup:i.CW.internal,group:i.m2.enterprise},isHidden:e=>{var t;return null==e.result||0===s()(t=e.result).call(t,(e=>e.isUsed)).length}}),d({isRelated:()=>!0,class:n.xP,validFilters:[i.DN.None],name:{subgroup:i.CW.all,group:i.m2.reward},isHidden:e=>null==e.result||0===e.result.length}),d({isRelated:()=>!0,class:n.JV,validFilters:[i.DN.None],name:{subgroup:i.CW.all,group:i.m2.addressBook},isHidden:e=>!1})},52065:(e,t,a)=>{a.d(t,{getTokenName:()=>u,assetNameFromIdentifier:()=>p,getTokenIdentifierIfExists:()=>h,createTokenRowSummary:()=>f,genLookupOrFail:()=>w,genLookupOrNull:()=>y});var r=a(59340),s=a.n(r),n=a(44914),o=a.n(n),i=a(23665),l=a(69875),d=a(90649);function u(e){const t=g(e).name;if(null!=t)return t;const a=h(e);return null!=a?a:"-"}function c(e){if(null==e||0===e.length||!(0,l.isHex)(e))return{name:"",cip67Tag:null};const{asciiName:t,hexName:a,cip67Tag:r}=i.AssetNameUtils.resolveProperties(e);return{name:null!=t?t:a,cip67Tag:null==r?void 0:r.toString(10)}}function p(e){const[,t]=e.split(".");return c(t).name}function g(e){if(null!=e.Metadata.ticker)return{name:e.Metadata.ticker,cip67Tag:null};if(null!=e.Metadata.longName)return{name:e.Metadata.longName,cip67Tag:null};if("Cardano"===e.Metadata.type){const t=e.Metadata.assetName,{name:a,cip67Tag:r}=c(t);return{name:a,cip67Tag:r}}return{name:null,cip67Tag:null}}function h(e){if(!e.IsDefault){if("Cardano"===e.Metadata.type){const{policyId:t,assetName:a}=e.Metadata;return new(o())((0,d.hexToBytes)(t),(0,d.hexToBytes)(a)).fingerprint()}return e.Identifier}}function f(e){const{numberOfDecimals:t,ticker:a,logo:r}=e.Metadata,{name:s}=g(e);return{ticker:null!=a?a:void 0,name:null!=s?s:void 0,decimals:null!=t?t:void 0,logo:null!=r?r:void 0}}function w(e){return t=>{var a;const r=null===(a=e.get(t.networkId.toString()))||void 0===a?void 0:a.get(t.identifier);if(null==r)throw new Error(`genLookupOrFail no token info for ${s()(t)}`);return r}}function y(e){return t=>{var a;const r=null===(a=e.get(t.networkId.toString()))||void 0===a?void 0:a.get(t.identifier);return null==r?null:r}}},60978:(e,t,a)=>{a.d(t,{aM:()=>o,XC:()=>i});var r=a(67294),s=a(48521);const n=r.createContext(),o=e=>{const{layout:t}=e,a="REVAMP";return(0,s.jsx)(n.Provider,{value:{selectedLayout:a,currentTheme:t,isRevampLayout:!0,renderLayoutComponent:(e={})=>e[a]},...e})},i=e=>t=>{const a=function(){const e=r.useContext(n);if(!e)throw new Error("useLayout must be used within a LayoutProvider");return e}();return(0,s.jsx)(e,{...t,...a})}},79939:(e,t,a)=>{a.d(t,{XZ:()=>g.X,Af:()=>h.A,NI:()=>f.N,Q6:()=>w.Q,AZ:()=>y.A,ah:()=>d,rU:()=>m.r,v2:()=>x.v,sN:()=>b.s,zu:()=>A.z,Ph:()=>v.P,x4:()=>_.x,mQ:()=>T.m,nv:()=>E.n,u:()=>I.u});var r=a(68666),s=a(45347);const{palette:n}=s.p,{palette:o}=r.q,i=o.ds,l=n.ds,d={styleOverrides:{root:{fontSize:"1rem",borderRadius:8,fontWeight:500,fontFamily:"Rubik",lineHeight:"19px",textTransform:"uppercase",padding:"16px",boxShadow:"none","&.MuiButton-sizeLarge":{height:"56px"},"&.MuiButton-sizeMedium":{padding:"13px 24px"},"&.MuiButton-sizeSmall":{padding:"7px"},"&.MuiButton-sizeFlat":{padding:"13px 24px",height:"unset"},"&:hover":{boxShadow:"none"},"& span.MuiButton-startIcon":{marginLeft:"0px",marginRight:"6px"}}},defaultProps:{disableRipple:!1},variants:[{props:{variant:"primary"},style:u("primary",i)},{props:{variant:"secondary"},style:c("primary",i)},{props:{variant:"tertiary",color:"primary"},style:p("primary",i)},{props:{variant:"tertiary",color:"secondary"},style:p("grayscale",i)},{props:{variant:"destructive"},style:{backgroundColor:i.sys_magenta_500,color:i.white_static,":hover":{backgroundColor:i.sys_magenta_600},":active":{backgroundColor:i.sys_magenta_700},":focus":{backgroundColor:i.sys_magenta_500,outline:"2px solid",outlineColor:i.sys_yellow_500},"&.Mui-disabled":{color:i.white_static,backgroundColor:i.sys_magenta_300,cursor:"not-allowed",pointerEvents:"unset"},"& .MuiLoadingButton-loadingIndicator":{color:i.white_static},"& .MuiButton-startIcon svg":{fill:i.white_static},"& .MuiButton-startIcon svg path":{fill:i.white_static}}},{props:{variant:"segmented"},style:{minWidth:"unset",maxWidth:"unset",width:"40px",height:"40px",padding:"8px",color:"ds.gray_200","&.MuiButton-sizeMedium":{padding:"8px",height:"40px"},":hover":{color:"ds.gray_50"},"&.active":{backgroundColor:i.gray_200,":hover":{backgroundColor:i.gray_50}}}}]};function u(e,t){return{backgroundColor:t[`${e}_500`],color:t.white_static,":hover":{backgroundColor:t[`${e}_600`]},":active":{backgroundColor:t[`${e}_700`]},":focus":{backgroundColor:t[`${e}_500`],outline:"2px solid",outlineColor:t.sys_yellow_500},"&.Mui-disabled":{color:t.gray_min,backgroundColor:t[`${e}_200`],opacity:"0.8",cursor:"not-allowed",pointerEvents:"unset"},"& .MuiLoadingButton-loadingIndicator":{color:t.gray_min},"& .MuiButton-startIcon svg":{fill:t.gray_min},"& .MuiButton-startIcon svg path":{fill:t.gray_min}}}function c(e,t){return{backgroundColor:"transparent",color:t[`${e}_500`],border:"2px solid",borderColor:t[`${e}_500`],":hover":{border:"2px solid",color:t[`${e}_600`],borderColor:t[`${e}_600`]},":active":{borderColor:t[`${e}_700`]},":focus":{borderColor:t[`${e}_500`],outline:"2px solid",outlineColor:t.sys_yellow_500},"&.Mui-disabled":{border:"2px solid",borderColor:t[`${e}_200`],color:t[`${e}_200`],cursor:"not-allowed",pointerEvents:"unset"},"& .MuiLoadingButton-loadingIndicator":{color:t[`${e}_600`]},"& .MuiButton-startIcon svg":{fill:t[`${e}_500`]},"& .MuiButton-startIcon svg path":{fill:t[`${e}_500`]}}}function p(e,t){return{backgroundColor:"transparent",color:t[`${e}_500`],":hover":{backgroundColor:t.gray_50,color:t[`${e}_600`],"& .MuiButton-startIcon svg":{fill:t[`${e}_600`]},"& .MuiButton-startIcon svg path":{fill:t[`${e}_600`]}},":active":{backgroundColor:t.gray_100,color:t[`${e}_700`],"& .MuiButton-startIcon svg":{fill:t[`${e}_700`]},"& .MuiButton-startIcon svg path":{fill:t[`${e}_700`]}},":focus":{outline:"2px solid",outlineColor:t.sys_yellow_500},":disabled":{color:t[`${e}_200`],cursor:"not-allowed",pointerEvents:"unset","& .MuiButton-startIcon svg":{fill:t[`${e}_200`]},"& .MuiButton-startIcon svg path":{fill:t[`${e}_200`]}},"& .MuiLoadingButton-loadingIndicator":{color:t[`${e}_600`]},"& .MuiButton-startIcon svg":{fill:t[`${e}_500`]},"& .MuiButton-startIcon svg path":{fill:t[`${e}_500`]}}}u("primary",l),c("primary",l),p("primary",l),p("grayscale",l),l.sys_magenta_500,l.white_static,l.sys_magenta_600,l.sys_magenta_700,l.sys_magenta_500,l.sys_yellow_500,l.white_static,l.sys_magenta_300,l.white_static,l.white_static,l.white_static;var g=a(7127),h=a(12991),f=a(86860),w=a(73494),y=a(51832),m=a(96855),x=a(82353),b=a(818),A=a(69449),v=a(7088),_=a(33314),T=a(46149),E=a(48468),I=a(13769)},18261:(e,t,a)=>{a.d(t,{lT:()=>n,Du:()=>o});var r=a(29828),s=a.n(r);const n=(e,t)=>{var a;e=s()(e).call(e,"--")?e:"--"+e,null===(a=document.documentElement)||void 0===a||a.style.setProperty(e,t)},o=e=>e+" !important"},16885:(e,t,a)=>{a.d(t,{CW:()=>i,m2:()=>l,DN:()=>u});var r=a(56474),s=a.n(r),n=a(99095),o=a(38043);const i=s()({all:"all",internal:"internal",external:"external",mangled:"mangled"}),l=(s()({all:o.default.allLabel,...(0,n.defineMessages)({external:{id:"wallet.receive.nav.external",defaultMessage:"!!!External"},internal:{id:"wallet.receive.nav.internal",defaultMessage:"!!!Internal"},mangled:{id:"wallet.receive.nav.mangled",defaultMessage:"!!!Mangled"}})}),s()({base:"base",enterprise:"enterprise",reward:"reward",byron:"byron",addressBook:"addressBook",group:"group"})),d=(0,n.defineMessages)({group:{id:"wallet.address.category.group",defaultMessage:"!!!Addresses formed by the combination of a spending key and a staking key"},single:{id:"wallet.address.category.single",defaultMessage:"!!!Addresses containing only a spending key and no staking key"}}),u=(s()({group:d.group,base:d.group,enterprise:d.single,...(0,n.defineMessages)({reward:{id:"wallet.address.category.reward",defaultMessage:"!!!Address for your staking key"},byron:{id:"wallet.address.category.byron",defaultMessage:"!!!Addresses created using the Byron-era address format"},addressBook:{id:"wallet.address.category.addressBook",defaultMessage:"!!!Addresses that do not belong to you, but are relevant to your wallet"}})}),s()({byron:o.default.byronLabel,...(0,n.defineMessages)({base:{id:"wallet.receive.navigation.baseLabel",defaultMessage:"!!!Base"},enterprise:{id:"wallet.receive.navigation.enterpriseLabel",defaultMessage:"!!!Enterprise"},reward:{id:"wallet.receive.navigation.rewardLabel",defaultMessage:"!!!Reward"},group:{id:"wallet.receive.navigation.groupLabel",defaultMessage:"!!!Group"},addressBook:{id:"wallet.receive.navigation.AddressBook",defaultMessage:"!!!Address book"}})}),s()({None:"None",Unused:"Unused",Used:"Used",HasBalance:"HasBalance"}));s()({None:o.default.allLabel,...(0,n.defineMessages)({Used:{id:"wallet.receive.navigation.usedLabel",defaultMessage:"!!!Used"},Unused:{id:"wallet.receive.navigation.unusedLabel",defaultMessage:"!!!Unused"},HasBalance:{id:"wallet.receive.navigation.hasBalanceLabel",defaultMessage:"!!!Has Balance"}})})},52298:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(42898);class s extends r.ZP{bindings(){return{ReactToolbox:{id:"id",name:"name",type:"type",value:"value",label:"label",placeholder:"hint",disabled:"disabled",error:"error",onChange:"onChange",onFocus:"onFocus",onBlur:"onBlur"}}}}},28336:(e,t,a)=>{a.d(t,{splitAmount:()=>n,truncateToken:()=>i,truncateAddressShort:()=>l,formatBigNumberToFloatString:()=>d}),a(39291);var r=a(3649),s=a.n(r);function n(e,t){if(0===t)return[e.toFormat(0),""];const a=e.toFormat(t),r=a.length-t;let n=a.substring(0,r);const o=a.substring(r).replace(/0+$/,"");return o||(n=s()(n).call(n,0,n.length-1)),[n,o]}function o(e,t){return e.length-3<=t?e:e.substring(0,t/2)+"..."+e.substring(e.length-t/2,e.length)}function i(e){return o(e,20)}function l(e,t){return o(e,null!=t?t:20)}function d(e){return e.isInteger()?e.toFixed(1):e.toString()}a(905)},39329:(e,t,a)=>{a.d(t,{ee:()=>r}),a(86902),a(78914),a(41511),a(29828);const r=e=>{e.preventDefault();let t=e.target;for(;!(t instanceof HTMLAnchorElement);){if(!(t instanceof Element))return;t=t.parentNode}t instanceof HTMLAnchorElement&&window.open(t.href,"_blank")}},16544:(e,t,a)=>{a.d(t,{calculateAndFormatValue:()=>o});var r=a(59340),s=a.n(r),n=(a(905),a(13469));function o(e,t){try{return(a=e.multipliedBy(t)).isZero()?"0":a.abs().lt(1)?a.toFormat(6):a.toFixed(2)}catch(a){return n.Yd.error(`Error when calling calculateAndFormatValue(${s()(e)}, ${t}): ${a.message}`),"-"}var a}},43577:(e,t,a)=>{a.d(t,{tQ:()=>U,XN:()=>V,nH:()=>Z,O8:()=>z,xC:()=>Y,Mk:()=>q});var r=a(86902),s=a.n(r),n=(a(51938),a(94198)),o=a.n(n),i=a(51942),l=a.n(i),d=a(32366),u=a.n(d),c=a(36384),p=a.n(c),g=(a(47302),a(20116)),h=a.n(g),f=(a(78580),a(25843),a(80426)),w=a.n(f),y=a(94473),m=a.n(y),x=a(2991),b=a.n(x),A=a(93476),v=a.n(A),_=a(3649),T=a.n(_),E=(a(63371),a(86335)),I=(a(38441),a(3577)),k=(a(27189),a(905)),C=(a(21131),a(38079)),D=a(37495),M=(a(45918),a(79562)),S=a(27649),R=a(84184),W=a(84174),B=(a(51965),a(60274)),P=a(90649),N=a(55343),F=(a(39845),a(57421),a(34704),a(27423),a(94346),a(71265),a(66905)),O=a(75723),L=(a(32533),a(95667)),H=a(48764).Buffer;function U(e){var t;const[a,r]=(0,B.jK)(e,F.OC.GOVERNANCE_DREP_KEYS,F.x_),s=u()(t=(0,W.getCardanoHaskellBaseConfig)((0,W.getNetworkById)(e.networkId))).call(t,((e,t)=>l()(e,t)),{}),n=o()(s.ChainNetworkId,10);return[(0,O.pubKeyHashToRewardAddress)(a.hash().to_hex(),n),r]}function V(e,t){var a,r;const s=null==e?void 0:e.native_scripts();return b()(a=w()(r=(0,P.iterateLenGet)(s)).call(r,(e=>(0,P.iterateLenGet)(e.get_required_signers())))).call(a,(e=>e.to_hex())).toSet()}function G(e){var t;return b()(t=(0,P.iterateLenGet)(e.required_signers())).call(t,(e=>e.to_hex())).toSet()}new k.Z("5000000"),new k.Z("2000000");const j=[[e=>e.as_stake_deregistration(),e=>e.stake_credential().to_keyhash()],[e=>e.as_stake_delegation(),e=>e.stake_credential().to_keyhash()],[e=>e.as_vote_delegation(),e=>e.stake_credential().to_keyhash()],[e=>e.as_stake_and_vote_delegation(),e=>e.stake_credential().to_keyhash()],[e=>e.as_stake_registration_and_delegation(),e=>e.stake_credential().to_keyhash()],[e=>e.as_stake_vote_registration_and_delegation(),e=>e.stake_credential().to_keyhash()],[e=>e.as_drep_registration(),e=>e.voting_credential().to_keyhash()],[e=>e.as_drep_deregistration(),e=>e.voting_credential().to_keyhash()],[e=>e.as_drep_update(),e=>e.voting_credential().to_keyhash()],[e=>e.as_pool_registration(),e=>(0,P.iterateLenGet)(e.pool_params().pool_owners()).toArray()]];function K(e){var t,a,r,s;const n=w()(t=(0,P.iterateLenGet)(e.certs()).nonNull()).call(t,(e=>{for(const[t,a]of j){const r=(0,P.maybe)(t(e),a);if(null!=r)return(0,P.ensureArray)(r)}return[]})),o=b()(a=(0,P.iterateLenGet)(null===(r=e.voting_procedures())||void 0===r?void 0:r.get_voters()).nonNull()).call(a,(e=>{var t;return null===(t=e.to_drep_credential())||void 0===t?void 0:t.to_keyhash()})).nonNull();return b()(s=n.join(o)).call(s,(e=>e.to_hex())).toSet()}async function Z(e,t,a){return E.RustModule.WasmScope((r=>async function(e,t,a,r){var s;const{txBody:n,witnessSet:o,auxiliaryData:i,rawTxBody:l}=z(a,r),d=(0,I.se)(e);if(null==d)throw new Error("missing utxo functionality");const u=(0,I.sX)(d);if(null==u)throw new Error("missing chains functionality");const c=new(p())([...G(n),...V(o),...K(n)]),g=c.size>0,[f,w,y]=await v().all([u.getAllUtxos(),g?(0,D.XN)({publicDeriver:e,type:C.dq.CARDANO_BASE}):v().resolve([]),g?(0,D.XN)({publicDeriver:e,type:C.dq.CARDANO_REWARD}):v().resolve([])]),m=new(p()),x=[];if(g){var A;if(0===w.length)throw new Error("Cannot sign transaction script - no base addresses are available in the wallet!");const t=r.WalletV4.Address.from_bytes((0,P.hexToBytes)(w[0].address)),a=t.network_id(),s=null===(A=r.WalletV4.BaseAddress.from_address(t))||void 0===A?void 0:A.stake_cred();if(null==s)throw new Error("Cannot sign transaction script - failed to parse the base address staking cred!");for(const e of c){const t=r.WalletV4.Ed25519KeyHash.from_bytes((0,P.hexToBytes)(e)),n=r.WalletV4.Credential.from_keyhash(t),o=r.WalletV4.BaseAddress.new(a,n,s).to_address();m.add((0,P.bytesToHex)(o.to_bytes()))}for(const e of w){const{address:t,addressing:a}=e;if(m.delete(t)&&x.push({address:t,addressing:a}),0===m.size)break}for(const e of y){const{address:t,addressing:a}=e;c.has(T()(t).call(t,2))&&x.push({address:t,addressing:a})}const[n,o]=await(0,B.ZE)(e),i=n.hash().to_hex();if(c.has(i)){const e=r.WalletV4.RewardAddress.new(0,r.WalletV4.Credential.from_keyhash(n.hash())).to_address().to_hex();x.push({address:e,...o})}}const _=await(0,M.loadSubmittedTransactions)()||[],E=new B.ZP,k=await E.addressedUtxosWithSubmittedTxs((0,S.ue)(f),e,_),W=(0,I.JM)(e);if(!W)throw new Error("can't get level");const N=(0,I.y9)(e);if(!N)throw new Error("expect to be able to get signing key");const F=await N.getSigningKey(),O=await N.normalizeKey({...F,password:t}),L=b()(s=(0,P.iterateLenGet)(n.inputs()).join((0,P.iterateLenGet)(n.collateral()))).call(s,(e=>`${e.transaction_id().to_hex()}${String(e.index())}`)).toSet(),H=h()(k).call(k,(e=>L.has(e.utxo_id)));return(0,R.OJ)(H,l,W.getParent().getPublicDeriverLevel(),r.WalletV4.Bip32PrivateKey.from_hex(O.prvKeyHex),new(p()),i,x).witness_set().to_hex()}(e,t,a,r)))}function z(e,t){const{tx:a}=e;let r,s,n,o;const i=(0,P.hexToBytes)(a);try{const e=t.WalletV4.FixedTransaction.from_bytes(i);r=e.body(),s=e.witness_set(),n=e.auxiliary_data(),o=H.from(e.raw_body())}catch(e){try{r=t.WalletV4.TransactionBody.from_bytes(i),o=i}catch(t){throw e}}return{txBody:r,witnessSet:s,auxiliaryData:n,rawTxBody:o}}async function Y(e,t,a){var r,s;const n=(0,I.se)(e);if(!n)throw new Error("expect to be able to get all UTXOs");const o=new(p())(w()(r=await n.getAllUtxoAddresses()).call(r,(e=>{var t;return b()(t=e.addrs).call(t,(e=>e.Hash))})));let i;i=a||(0,S.ue)(await n.getAllUtxos());const l=await(0,M.loadSubmittedTransactions)()||[],d=new B.ZP;i=await d.addressedUtxosWithSubmittedTxs(i,e,l);const u=(0,O.transactionHexToHash)(t.to_hex()),c=e.getParent().defaultToken,g={defaultNetworkId:c.NetworkId,defaultIdentifier:c.Identifier},h=new N.a([],g),f=new N.a([],g),y={from:[],to:[]};let x=!0;const A=t.body(),v=[];for(const e of(0,P.iterateLenGet)(A.inputs())){const t=e.transaction_id().to_hex(),a=e.index(),r=m()(i).call(i,(e=>e.tx_hash===t&&e.tx_index===a));if(!r)throw new Error("missing UTXO");v.push({txHash:t,index:a});const s=new N.a([],g);s.add({amount:new k.Z(r.amount),identifier:c.Identifier,networkId:c.NetworkId});for(const e of r.assets)s.add({amount:new k.Z(e.amount),identifier:e.assetId,networkId:c.NetworkId});y.from.push({address:r.receiver,value:s}),o.has(r.receiver)&&h.joinSubtractMutable(s),f.joinAddMutable(s)}for(const e of(0,P.iterateLenGet)(A.outputs())){const t=(0,S.$Z)(e.amount(),g),a=e.address().to_hex();y.to.push({address:a,value:t,isForeign:!1}),o.has(a)?h.joinAddMutable(t):x=!1,f.joinSubtractMutable(t)}const _=b()(s=(0,P.iterateLenGetMap)(A.withdrawals()).nonNullValue()).call(s,(([e,t])=>({address:e.to_address().to_hex(),value:new N.a([{amount:new k.Z(t.to_str()),identifier:c.Identifier,networkId:c.NetworkId}],g)}))).toArray();let T=!1;for(const e of(0,P.iterateLenGet)(A.certs()))if((0,L.isCertificateKindDrepDelegation)(e.kind())){T=!0;break}const E=t.auxiliary_data(),D={txid:u,type:x?"self":"expend",amount:h,fee:f,date:new Date,addresses:y,state:C.YM.SUBMITTED,errorMsg:null,block:null,certificates:[],ttl:new k.Z(String(A.ttl())),metadata:null==E?void 0:E.to_hex(),withdrawals:_,isValid:!0};l.push({publicDeriverId:e.publicDeriverId,transaction:D,networkId:e.getParent().getNetworkInfo().NetworkId,usedUtxos:v,isDrepDelegation:T}),await(0,M.persistSubmittedTransactions)(l)}async function q(e,t){const a=e;await E.RustModule.load();const r=E.RustModule.WalletV4;return t?b()(a).call(a,(e=>{const t=r.TransactionInput.new(r.TransactionHash.from_hex(e.tx_hash),e.tx_index),a=r.Value.new(r.BigNum.from_str(e.amount));(e.assets||[]).length>0&&a.set_multiasset(function(e){const t=u()(e).call(e,((e,t)=>((e[t.policyId]=e[t.policyId]||[]).push(t),e)),{}),a=E.RustModule.WalletV4,r=a.MultiAsset.new();for(const e of s()(t)){const s=t[e],n=a.ScriptHash.from_hex(e),o=E.RustModule.WalletV4.Assets.new();for(const e of s)o.insert(a.AssetName.new((0,P.hexToBytes)(e.name)),a.BigNum.from_str(e.amount));r.insert(n,o)}return r}(e.assets));const n=r.TransactionOutput.new(r.Address.from_hex(e.receiver),a);return r.TransactionUnspentOutput.new(t,n).to_hex()})):b()(a).call(a,(e=>({...e,receiver:r.Address.from_hex(e.receiver).to_bech32()})))}},92369:(e,t,a)=>{var r=a(73935),s=a(22188),n=a(72986),o=a(59731),i=a(72359),l=a(86902),d=a.n(l),u=a(2991),c=a.n(u),p=a(78914),g=a.n(p),h=a(56474),f=a.n(h),w=a(49262);class y extends w.ZP{setup(){super.setup()}teardown(){super.teardown()}}var m=a(7107),x=a(18680),b=a(19109);class A extends b.Z{setup(){super.setup()}}var v,_,T=a(32366),E=a.n(T),I=a(5838),k=a.n(I),C=a(87672),D=a.n(C),M=a(89749),S=a.n(M),R=(a(18293),a(39392)),W=a.n(R),B=a(94473),P=a.n(B),N=a(32880),F=a(84174),O=a(85540),L=a(52065);let H=(v=class extends N.Z{constructor(...e){super(...e),k()(this,"tokenInfo",_,this),D()(this,"fetchMissingTokenInfo",(async(e,t)=>{const a=await(0,O.getCardanoAssets)({networkId:e,tokenIds:t});(0,s.runInAction)((()=>{this._updateTokenInfo(a)}))})),D()(this,"refreshTokenInfo",(async()=>{const e=await(0,O.getCardanoAssets)();(0,s.runInAction)((()=>{this._updateTokenInfo(e)}))})),D()(this,"getDefaultTokenInfo",(e=>function(e,t){var a;const r=P()(F.defaultAssets).call(F.defaultAssets,(t=>t.NetworkId===e));if(null==r)throw new Error("TokenInfoStore no default token found for network");const s=null===(a=t.get(e.toString()))||void 0===a?void 0:a.get(r.Identifier);if(null==s)throw new Error("TokenInfoStore no row found for default token");return s}(e,this.tokenInfo))),D()(this,"getDefaultTokenInfoSummary",(e=>(0,L.createTokenRowSummary)(this.getDefaultTokenInfo(e)))),D()(this,"_updateTokenInfo",(e=>{for(const t of e){const e=this.tokenInfo.get(t.NetworkId.toString());if(null==e){const e=c()(s.observable).call(s.observable);e.set(t.Identifier,t),this.tokenInfo.set(t.NetworkId.toString(),e)}else e.set(t.Identifier,t)}}))}setup(){super.setup(),this.tokenInfo=new(W())}async fetchRemoteMetadata(e,t){const a=t.replace(".","");return(await this.stores.substores.ada.stateFetchStore.fetcher.getTokenInfo({network:e,tokenIds:[a]}))[a]}async getLocalOrRemoteMetadata(e,t){var a;const r=null===(a=this.tokenInfo.get(String(e.NetworkId)))||void 0===a?void 0:a.get(t);if(null!=r)return(0,L.createTokenRowSummary)(r);const s=await this.fetchRemoteMetadata(e,t);return null!=s?s:{name:void 0,ticker:void 0,decimals:void 0,logo:void 0}}fetchMissingAndGetLocalOrRemoteMetadata(e,t){const a=this.fetchMissingTokenInfo(e.NetworkId,t);return E()(t).call(t,((t,r)=>(t[r]=a.then((()=>this.getLocalOrRemoteMetadata(e,r))),t)),{})}},_=S()(v.prototype,"tokenInfo",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v);var U=a(34074),V=a.n(U),G=a(51942),j=a.n(G),K=a(20116),Z=a.n(K),z=a(80426),Y=a.n(z),q=a(36384),$=a.n(q),J=a(55343);const X=f()({IDLE:0,PENDING:1,SUCCESS:2,REJECTED:3});var Q=a(33913),ee=a(905),te=a(70797),ae=a(86335),re=a(27649),se=a(43577),ne=a(79562),oe=a(28082),ie=a(70184),le=a(62021),de=a(17462),ue=a.n(de),ce=a(9838),pe=a(53003),ge=a(63139),he=a(99095);const fe=(0,he.defineMessages)({transactionHashMismatchError:{id:"wallet.hw.tx.hash.error",defaultMessage:"!!!The transaction hash computed by Yoroi extension and that by the device mismatch."},unsupportedTransactionError:{id:"wallet.hw.tx.unsupported.error",defaultMessage:"!!!Signing this transaction with hardware wallet is not supported."},trezorSignDataUnsupportedError:{id:"wallet.hw.trezor.data.sign.unsupported.error",defaultMessage:"!!!Trezor does not support data signing at this memoment"},unknownAddressError:{id:"wallet.hw.data.sign.unkown.address",defaultMessage:"!!!The requested signing address is not found in this wallet"}}),we=new ge.default(fe.transactionHashMismatchError),ye=new ge.default(fe.unsupportedTransactionError),me=new ge.default(fe.trezorSignDataUnsupportedError),xe=new ge.default(fe.unknownAddressError);var be=a(52974),Ae=a(85412),ve=a(74057),_e=a.n(ve);async function Te(e,t,a){const r=function(){const{manifest:e}=be.Z.wallets.hardwareWallet.trezorT;return{email:e.EMAIL,appUrl:Ae.Z.isFirefox()?e.appURL.FIREFOX:e.appURL.CHROME}}();await _e().init({manifest:r}),t&&_e().on(ve.DEVICE_EVENT,t),a&&_e().on(ve.UI_EVENT,a);const s=await e(_e());return t&&_e().off(ve.DEVICE_EVENT,t),a&&_e().off(ve.UI_EVENT,a),await _e().dispose(),s}var Ee,Ie,ke,Ce,De,Me,Se,Re,We,Be,Pe,Ne,Fe,Oe,Le,He,Ue,Ve,Ge,je,Ke=a(6951),Ze=a(90649),ze=a(75723),Ye=a(60274),qe=a(68469);let $e=!1,Je=!1,Xe=(Ee=class extends N.Z{constructor(...e){super(...e),k()(this,"unrecoverableError",Ie,this),k()(this,"connectingMessage",ke,this),k()(this,"whiteList",Ce,this),k()(this,"loadingWallets",De,this),k()(this,"errorWallets",Me,this),k()(this,"wallets",Se,this),k()(this,"getConnectorWhitelist",Re,this),k()(this,"setConnectorWhitelist",We,this),k()(this,"getConnectedSites",Be,this),k()(this,"signingMessage",Pe,this),k()(this,"adaTransaction",Ne,this),D()(this,"rawTx",null),D()(this,"addressedUtxos",null),D()(this,"reorgTxSignRequest",null),D()(this,"collateralOutputAddressSet",null),k()(this,"submissionError",Fe,this),k()(this,"hwWalletError",Oe,this),k()(this,"isHwWalletErrorRecoverable",Le,this),k()(this,"_getConnectingMsg",He,this),k()(this,"_getSigningMsg",Ue,this),k()(this,"_confirmSignInTx",Ve,this),k()(this,"_cancelSignInTx",Ge,this),k()(this,"_getWallets",je,this),D()(this,"createAdaTransaction",(async()=>{var e;const{signingMessage:t,connectedWallet:a}=this;if(null==a||null==t)return;if(!t.sign.tx)return;const{tx:r}=t.sign.tx,n=(0,F.getNetworkById)(a.networkId);if(!(0,F.isCardanoHaskell)(n))throw new Error("ConnectorStore::createAdaTransaction unexpected wallet type");const o=await(0,ne.loadSubmittedTransactions)()||[],i=await this.api.ada._addressedUtxosWithSubmittedTxs((0,re.ue)(a.utxos),a.publicDeriverId,a.allUtxoAddresses,o);this.addressedUtxos=i;const l=this.stores.tokenInfoStore.getDefaultTokenInfo(n.NetworkId);let d;try{const e=ae.RustModule.WalletV4.FixedTransaction.from_hex(r);this.rawTx=r,d=e.body()}catch{try{d=ae.RustModule.WalletV4.TransactionBody.from_hex(r),this.rawTx=(0,ze.transactionBodyHexToTransaction)(r)}catch{return void(0,s.runInAction)((()=>{this.unrecoverableError="Unable to parse input transaction."}))}}const u=[],p=[],g=new($())(Y()(o).call(o,(({usedUtxos:e})=>{var t;return c()(t=e||[]).call(t,(({txHash:e,index:t})=>`${e}${t}`))})));for(const e of(0,Ze.iterateLenGet)(d.inputs())){const a=e.transaction_id().to_hex(),r=e.index();if(g.has(`${a}${r}`))return(0,O.signFail)({errorType:"spent_utxo",data:`${a}${r}`,uid:t.sign.uid,tabId:t.tabId}),void this._closeWindow();const s=P()(i).call(i,(({tx_hash:e,tx_index:t})=>e===a&&t===r));s?u.push({address:s.receiver,value:(0,re.Bi)(s,l.NetworkId)}):p.push({txHash:a,txIndex:r})}const h=new($())(c()(e=[...a.allAddresses.utxoAddresses,...a.allAddresses.accountingAddresses]).call(e,(e=>e.address.Hash))),f=[];for(const e of(0,Ze.iterateLenGet)(d.outputs())){const t=e.address().to_hex();f.push({address:t,isForeign:!h.has(t),value:(0,re.$Z)(e.amount(),{defaultNetworkId:a.networkId,defaultIdentifier:a.defaultTokenId})})}const w={tokenId:l.Identifier,networkId:l.NetworkId,amount:d.fee().to_str()},{amount:y,total:m}=await this._calculateAmountAndTotal(a,u,f,w,a.utxos,h),x=[];if(p.length){const e=await this.stores.substores.ada.stateFetchStore.fetcher.getUtxoData({network:n,utxos:p});for(let a=0;a<e.length;a++){const r=e[a];if(null==r||"object"!=typeof r)return(0,O.signFail)({errorType:"missing_utxo",data:`${p[a].txHash}${p[a].txIndex}`,uid:t.sign.uid,tabId:t.tabId}),void this._closeWindow();if(null!=r.spendingTxHash)return(0,O.signFail)({errorType:"spent_utxo",data:`${p[a].txHash}${p[a].txIndex}`,uid:t.sign.uid,tabId:t.tabId}),void this._closeWindow();const s=(0,re.Bi)(r.output,l.NetworkId);x.push({address:(0,ze.addressBech32ToHex)(r.output.address),value:s})}}const b=[],A=d.certs();if(A)for(const e of(0,Ze.iterateLenGet)(A)){if(!e)throw new Error("unexpectedly missing certificate");const t=e.as_stake_registration();if(t){var v,_;const e=null!==(v=null===(_=t.coin())||void 0===_?void 0:_.toString())&&void 0!==v?v:null;b.push({type:"StakeRegistrationCert",coin:e});continue}const a=e.as_stake_deregistration();if(a){var T,E;const e=null!==(T=null===(E=a.coin())||void 0===E?void 0:E.toString())&&void 0!==T?T:null;b.push({type:"StakeDeregistrationCert",coin:e});continue}const r=e.as_stake_delegation();if(r){const e=r.stake_credential().to_keyhash();e&&b.push({type:"StakeDelegationCert",poolKeyHash:e.to_hex()});continue}const s=e.as_vote_delegation();if(s){s.stake_credential().to_keyhash()&&b.push({type:"VoteDelegCert",drep:s.drep().to_hex()});continue}const n=e.as_stake_and_vote_delegation();if(n){n.stake_credential().to_keyhash()&&b.push({type:"StakeVoteDelegCert",drep:n.drep().to_hex(),poolKeyHash:n.pool_keyhash().to_hex()});continue}const o=e.as_stake_registration_and_delegation();if(o){o.stake_credential().to_keyhash()&&b.push({type:"StakeRegDelegCert",poolKeyHash:o.pool_keyhash().to_hex(),coin:o.coin().to_str()});continue}const i=e.as_vote_registration_and_delegation();if(i){i.stake_credential().to_keyhash()&&b.push({type:"VoteRegDelegCert",drep:i.drep().to_hex(),coin:i.coin().to_str()});continue}const l=e.as_stake_vote_registration_and_delegation();if(l){l.stake_credential().to_keyhash()&&b.push({type:"StakeVoteRegDelegCert",poolKeyHash:l.pool_keyhash().to_hex(),drep:l.drep().to_hex(),coin:l.coin().to_str()});continue}const d=e.as_drep_registration();if(d){d.voting_credential().to_keyhash()&&b.push({type:"RegDrepCert",coin:d.coin().to_str(),anchor:Qe(d.anchor())});continue}const u=e.as_drep_deregistration();if(u){u.voting_credential().to_keyhash()&&b.push({type:"UnregDrepCert",coin:u.coin().to_str()});continue}const c=e.as_drep_update();c&&c.voting_credential().to_keyhash()&&b.push({type:"UpdateDrepCert",anchor:Qe(c.anchor())})}const I=d.voting_procedures();if(I)for(const e of(0,Ze.iterateLenGet)(I.get_voters())){if(!e)throw new Error("unexpectedly missing voter");const t=I.get_governance_action_ids_by_voter(e);for(const a of(0,Ze.iterateLenGet)(t)){var k,C,D,M,S,R,W,B,N;if(!a)throw new Error("unexpectedly missing governance action id");const t=I.get(e,a);if(!t)throw new Error("unexpectedly missing voting procedure");b.push({type:"VotingProcedure",voterType:e.kind(),voterHash:(null===(k=e.to_constitutional_committee_hot_credential())||void 0===k||null===(C=k.to_scripthash())||void 0===C?void 0:C.to_hex())||(null===(D=e.to_constitutional_committee_hot_credential())||void 0===D||null===(M=D.to_keyhash())||void 0===M?void 0:M.to_hex())||(null===(S=e.to_drep_credential())||void 0===S||null===(R=S.to_scripthash())||void 0===R?void 0:R.to_hex())||(null===(W=e.to_drep_credential())||void 0===W||null===(B=W.to_keyhash())||void 0===B?void 0:B.to_hex())||(null===(N=e.to_stake_pool_key_hash())||void 0===N?void 0:N.to_hex())||(()=>{throw new Error("unexpected voter")})(),govActionTxId:a.transaction_id().to_hex(),govActionIndex:a.index(),vote:t.vote_kind(),anchor:Qe(t.anchor())})}}const L=d.voting_proposals();if(L)for(const e of(0,Ze.iterateLenGet)(L));const H=d.current_treasury_value();H&&b.push({type:"TreasuryValue",coin:H.to_str()});const U=d.donation();U&&b.push({type:"TreasuryDonation",positiveCoin:U.to_str()}),(0,s.runInAction)((()=>{this.adaTransaction={inputs:u,foreignInputs:x,outputs:f,fee:w,total:m,amount:y,cip95Info:b}}))})),D()(this,"generateReorgTransaction",(async()=>{const{signingMessage:e,connectedWallet:t}=this;if(null==t||null==e)return;if("tx-reorg/cardano"!==e.sign.type)throw new Error("unexpected signing data type");const{usedUtxoIds:a,reorgTargetAmount:r,utxos:n}=e.sign.tx,o=(0,re.ue)((0,s.toJS)(n));this.addressedUtxos=o;const i=new Ye.ZP,l=(await i._getAllUsedAddresses(t))[0];if(!l)throw new Error("wallet has no used address");const d=await(0,O.getProtocolParameters)(t),{unsignedTx:u,collateralOutputAddressSet:c}=await i._createReorgTx((0,F.getNetworkById)(t.networkId),{defaultNetworkId:t.networkId,defaultIdentifier:t.defaultTokenId},t.publicDeriverId,t.allUtxoAddresses,t.receiveAddress,a,r,o,t.submittedTransactions,l,d);this.reorgTxSignRequest=u,this.collateralOutputAddressSet=c;const p={tokenId:u.fee().getDefaultEntry().identifier,networkId:u.fee().getDefaultEntry().networkId,amount:u.fee().getDefaultEntry().amount.toString()},{amount:g,total:h}=await this._calculateAmountAndTotal(t,u.inputs(),u.outputs(),p,n);(0,s.runInAction)((()=>{this.adaTransaction={foreignInputs:[],inputs:u.inputs(),outputs:u.outputs(),fee:p,amount:g,total:h,cip95Info:[]}}))})),D()(this,"signAndSendReorgTx",(async(e,t,a)=>{const r=this.reorgTxSignRequest;if(!r)throw new Error("unexpected nullish sign request");const s=r.unsignedTx.build_tx().to_hex();if("mnemonic"===e.type)await(0,O.signAndBroadcastTransaction)({signRequest:r,password:t,publicDeriverId:e.publicDeriverId});else{const t=await this.hwSignTxHex(e,s);await(0,O.broadcastTransaction)({signedTxHex:t,publicDeriverId:e.publicDeriverId,addressedUtxos:a})}return(0,ze.transactionHexToHash)(s)})),D()(this,"getUtxosAfterReorg",(e=>{var t;const a=null===(t=this.adaTransaction)||void 0===t?void 0:t.outputs;if(!a)throw new Error("unexpected nullish transaction");if(!this.collateralOutputAddressSet)throw new Error("unexpected nullish collateral address set");const r=[];for(let t=0;t<a.length;t++)this.collateralOutputAddressSet.has(a[t].address)&&r.push({utxo_id:e+String(t),tx_hash:e,tx_index:t,receiver:a[t].address,amount:a[t].value.getDefault().toString(),assets:[]});return r})),D()(this,"_getConnectorWhitelist",(async()=>{await this.getConnectorWhitelist.execute()})),D()(this,"_updateConnectorWhitelist",(async({whitelist:e})=>{await this.setConnectorWhitelist.execute({whitelist:e}),await this.getConnectorWhitelist.execute()})),D()(this,"_removeWalletFromWhitelist",(async e=>{var t;const a=Z()(t=this.currentConnectorWhitelist).call(t,(t=>t.url!==e.url));await this.setConnectorWhitelist.execute({whitelist:a}),await this.getConnectorWhitelist.execute(),await(0,O.removeWalletFromWhiteList)({url:e.url})})),D()(this,"_refreshActiveSites",(async()=>{await this.getConnectedSites.execute()}))}setup(){super.setup(),this.actions.connector.updateConnectorWhitelist.listen(this._updateConnectorWhitelist),this.actions.connector.removeWalletFromWhitelist.listen(this._removeWalletFromWhitelist),this.actions.connector.confirmSignInTx.listen((async e=>{await this._confirmSignInTx(e)})),this.actions.connector.cancelSignInTx.listen(this._cancelSignInTx),this.actions.connector.refreshActiveSites.listen(this._refreshActiveSites),this.actions.connector.refreshWallets.listen(this._getWallets),this.actions.connector.closeWindow.listen(this._closeWindow),this._getConnectorWhitelist(),this._getConnectingMsg(),this._getSigningMsg(),(0,Ze.noop)(this.currentConnectorWhitelist)}teardown(){super.teardown()}_closeWindow(){window.close()}async _calculateAmountAndTotal(e,t,a,r,s,n){var o;n||(n=new($())(c()(o=e.allAddresses.utxoAddresses).call(o,(e=>e.address.Hash)))).add(e.receiveAddress.addr.Hash);const i={defaultNetworkId:e.networkId,defaultIdentifier:e.defaultTokenId},l=new J.a([{amount:new ee.Z("0"),identifier:i.defaultIdentifier,networkId:i.defaultNetworkId}],i);for(const e of t)n.has(e.address)&&l.joinSubtractMutable(e.value);for(const e of a)n.has(e.address)&&l.joinAddMutable(e.value);const d=l.joinAddCopy(new J.a([{identifier:r.tokenId,networkId:r.networkId,amount:new ee.Z(r.amount)}],i));return{total:l,amount:d}}get signingRequest(){if(null==this.signingMessage)return;const{signingMessage:e}=this;null!=this.connectedWallet&&e.sign.tx}get currentConnectorWhitelist(){var e;let{result:t}=this.getConnectorWhitelist;return null==t&&(t=this.getConnectorWhitelist.execute().result),null!==(e=t)&&void 0!==e?e:[]}get activeSites(){var e;let{result:t}=this.getConnectedSites;return null==t&&(t=this.getConnectedSites.execute().result),null!==(e=t)&&void 0!==e?e:{sites:[]}}get connectedWallet(){var e;const{signingMessage:t}=this;return null==t?null:P()(e=this.wallets).call(e,(e=>e.publicDeriverId===t.publicDeriverId))}async hwSignTxHex(e,t,a=[]){const r={};for(const{address:t,path:a}of e.allAddresses.utxoAddresses)r[t.Hash]=a;for(const{address:t,path:a}of e.allAddresses.accountingAddresses)r[t.Hash]=a;if("ledger"===e.type)return this.ledgerSignTx(e,t,r,a);if("trezor"===e.type)return this.trezorSignTx(e,t,r);throw new Error("unexpected wallet type")}async trezorSignTx(e,t,a){var r;const n=(0,F.getNetworkById)(e.networkId),o=E()(r=(0,F.getCardanoHaskellBaseConfig)(n)).call(r,((e,t)=>j()(e,t)),{}),{addressedUtxos:i}=this;if(!i)throw new Error("unexpected nullish addressed UTXOs");const l=(0,ze.transactionHexToBodyHex)(t);let d,u;try{d=(0,le.fu)(l,Number(o.ChainNetworkId),o.ByronNetworkId,(e=>a[e]),i)}catch{throw(0,s.runInAction)((()=>{this.hwWalletError=ye,this.isHwWalletErrorRecoverable=!1})),new Error("unsupported transaction")}try{const e=await Te((e=>e.cardanoSignTransaction({...(0,Ze.purify)(d),allowSeedlessDevice:!0})));if(!e.success)throw new Error(`Trezor signing error: ${e.payload.error} (code=${String(e.payload.code)})`);u=e.payload}catch(e){throw(0,s.runInAction)((()=>{this.hwWalletError=new pe.Z(e),this.isHwWalletErrorRecoverable=!0})),e}if(u.hash!==ue()(32).update((0,Ze.hexToBytes)(l)).digest("hex"))throw(0,s.runInAction)((()=>{this.hwWalletError=we,this.isHwWalletErrorRecoverable=!1})),new Error("hash mismatch");return(0,le.Qo)(t,u.witnesses)}async ledgerSignTx(e,t,a,r=[]){var n;const o=(0,F.getNetworkById)(e.networkId),i=E()(n=(0,F.getCardanoHaskellBaseConfig)(o)).call(n,((e,t)=>j()(e,t)),{}),{addressedUtxos:l}=this;if(!l)throw new Error("unexpected nullish addressed UTXOs");const[d,u]=(0,se.tQ)(e);a[d]=u.addressing.path;const c=(0,ze.transactionHexToBodyHex)(t);let p;try{p=(0,ie.od)(c,Number(i.ChainNetworkId),i.ByronNetworkId,(e=>a[e]),l,r)}catch(e){throw console.error("toLedgerSignRequest failed: ",e),(0,s.runInAction)((()=>{this.hwWalletError=ye,this.isHwWalletErrorRecoverable=!1})),new Error("unsupported transaction")}const g=e.hardwareWalletDeviceId||"",h=new oe.L({locale:this.stores.profile.currentLocale});let f;try{f=await h.signTransaction({serial:g,params:p})}catch(e){throw et(),(0,s.runInAction)((()=>{this.hwWalletError=new ce.Z(e),this.isHwWalletErrorRecoverable=!0})),e}if(f.txHashHex!==ue()(32).update((0,Ze.hexToBytes)(c)).digest("hex"))throw(0,s.runInAction)((()=>{this.hwWalletError=we,this.isHwWalletErrorRecoverable=!1})),new Error("hash mismatch");const w={key:ae.RustModule.WalletV4.Bip32PublicKey.from_hex(e.publicKey),addressing:{startLevel:1,path:e.pathToPublic}};return(0,ie.Qo)(t,f.witnesses,w)}checkHwWalletSignData(){const{connectedWallet:e}=this;null!=e&&"trezor"===e.type&&(0,s.runInAction)((()=>{this.hwWalletError=me,this.isHwWalletErrorRecoverable=!1}))}get filteredWallets(){return this.wallets}},Ie=S()(Ee.prototype,"unrecoverableError",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=S()(Ee.prototype,"connectingMessage",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=S()(Ee.prototype,"whiteList",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),De=S()(Ee.prototype,"loadingWallets",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.IDLE}}),Me=S()(Ee.prototype,"errorWallets",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Se=S()(Ee.prototype,"wallets",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Re=S()(Ee.prototype,"getConnectorWhitelist",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new te.Z(this.api.localStorage.getWhitelist)}}),We=S()(Ee.prototype,"setConnectorWhitelist",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new te.Z((({whitelist:e})=>this.api.localStorage.setWhitelist(e)))}}),Be=S()(Ee.prototype,"getConnectedSites",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new te.Z(O.getConnectedSites)}}),Pe=S()(Ee.prototype,"signingMessage",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=S()(Ee.prototype,"adaTransaction",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=S()(Ee.prototype,"submissionError",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=S()(Ee.prototype,"hwWalletError",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=S()(Ee.prototype,"isHwWalletErrorRecoverable",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S()(Ee.prototype,"_closeWindow",[s.action],V()(Ee.prototype,"_closeWindow"),Ee.prototype),He=S()(Ee.prototype,"_getConnectingMsg",[s.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{await async function(){if(!$e){const e=await(0,O.connectWindowRetrieveData)();return $e=!0,e}}().then((e=>{(0,s.runInAction)((()=>{this.connectingMessage=e}))})).catch((e=>console.error(e)))}}}),Ue=S()(Ee.prototype,"_getSigningMsg",[s.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{await async function(){if(!Je){const e=await(0,O.signWindowRetrieveData)();return Je=!0,e}}().then((e=>{(0,s.runInAction)((()=>{this.signingMessage=e})),e&&("tx/cardano"===e.sign.type&&(this.createAdaTransaction(),Ke.iN.dappPopupSignTransactionPageViewed()),"tx-reorg/cardano"===e.sign.type&&(this.generateReorgTransaction(),Ke.iN.dappPopupAddCollateralPageViewed()),"data"===e.sign.type&&this.checkHwWalletSignData())})).catch((e=>console.error(e)))}}}),Ve=S()(Ee.prototype,"_confirmSignInTx",[s.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{(0,s.runInAction)((()=>{this.submissionError=null}));const{signingMessage:t,connectedWallet:a}=this;if(null==t)throw new Error("_confirmSignInTx confirming a tx but no signing message set");if(!a)throw new Error("unexpected nullish wallet");if("tx-reorg/cardano"===t.sign.type){let r;try{r=await this.signAndSendReorgTx(a,e,(0,re.ue)(t.sign.tx.utxos))}catch(e){return e instanceof Q.UZ?void(0,s.runInAction)((()=>{this.submissionError="WRONG_PASSWORD"})):void(0,s.runInAction)((()=>{this.submissionError="SEND_TX_ERROR"}))}const n=this.getUtxosAfterReorg(r);(0,O.userSignConfirm)({tx:n,uid:t.sign.uid,tabId:t.tabId,password:e})}else if("tx"===t.sign.type||"tx_input"===t.sign.type||"tx/cardano"===t.sign.type){const r=(0,s.toJS)(t.sign.tx);if("mnemonic"!==a.type){const{rawTx:e}=this;if(!e)throw new Error("unexpected nullish transaction");const s=ae.RustModule.WasmScope((e=>{const{witnessSet:t}=(0,se.O8)(r,e);return null==t?[]:[...(0,se.XN)(t,e)]})),n=(0,ze.transactionHexToWitnessSet)(await this.hwSignTxHex(a,e,s));(0,O.userSignConfirm)({tx:r,uid:t.sign.uid,tabId:t.tabId,witnessSetHex:n,password:""})}else(0,O.userSignConfirm)({tx:r,uid:t.sign.uid,tabId:t.tabId,password:e})}else{if("data"!==t.sign.type)throw new Error(`unkown sign data type ${t.sign.type}`);{const{payload:r}=t.sign;if("mnemonic"===a.type)(0,O.userSignConfirm)({tx:null,uid:t.sign.uid,tabId:t.tabId,password:e});else{if("ledger"!==a.type)throw new Error("Not expected to reach here. Unexpectedly wallet type");{const e=(0,Ye.Cj)(a,t.sign.address);if(null==e)return void(0,s.runInAction)((()=>{this.hwWalletError=xe,this.isHwWalletErrorRecoverable=!1}));const n=a.hardwareWalletDeviceId||"",o=new oe.L({locale:this.stores.profile.currentLocale});let i;try{i=await o.signMessage({serial:n,params:{messageHex:r,signingPath:e,hashPayload:!1,preferHexDisplay:!1,addressFieldType:qe.MessageAddressFieldType.KEY_HASH}}),(0,O.userSignConfirm)({tx:null,uid:t.sign.uid,tabId:t.tabId,password:"",signedMessageData:i})}catch(e){return et(),void(0,s.runInAction)((()=>{this.hwWalletError=new ce.Z(e),this.isHwWalletErrorRecoverable=!0}))}}}}}this.actions.connector.cancelSignInTx.remove(this._cancelSignInTx),await Ke.iN.dappPopupSignTransactionSubmitted()}}}),Ge=S()(Ee.prototype,"_cancelSignInTx",[s.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{if(null==this.signingMessage)throw new Error("_confirmSignInTx confirming a tx but no signing message set");const{signingMessage:e}=this;(0,O.userSignReject)({uid:e.sign.uid,tabId:e.tabId})}}}),je=S()(Ee.prototype,"_getWallets",[s.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{(0,s.runInAction)((()=>{this.loadingWallets=X.PENDING,this.errorWallets=""}));try{var e,t,a;const r=await(0,O.getWallets)();(0,s.runInAction)((()=>{this.loadingWallets=X.SUCCESS,this.wallets.replace(r)})),"tx/cardano"===(null===(e=this.signingMessage)||void 0===e?void 0:e.sign.type)&&this.createAdaTransaction(),"tx-reorg/cardano"===(null===(t=this.signingMessage)||void 0===t?void 0:t.sign.type)&&this.generateReorgTransaction(),"data"===(null===(a=this.signingMessage)||void 0===a?void 0:a.sign.type)&&this.checkHwWalletSignData()}catch(e){(0,s.runInAction)((()=>{this.loadingWallets=X.REJECTED,this.errorWallets=e.message}))}}}}),S()(Ee.prototype,"signingRequest",[s.computed],V()(Ee.prototype,"signingRequest"),Ee.prototype),S()(Ee.prototype,"currentConnectorWhitelist",[s.computed],V()(Ee.prototype,"currentConnectorWhitelist"),Ee.prototype),S()(Ee.prototype,"activeSites",[s.computed],V()(Ee.prototype,"activeSites"),Ee.prototype),S()(Ee.prototype,"connectedWallet",[s.computed],V()(Ee.prototype,"connectedWallet"),Ee.prototype),Ee);function Qe(e){return e?{url:e.url().url(),dataHash:e.anchor_data_hash().to_hex()}:null}function et(){chrome.windows.update(-2,{focused:!0})}var tt=a(24913),at=a(61346);class rt extends tt.Z{async preLoadingScreenEnd(){await super.preLoadingScreenEnd(),await this.stores.tokenInfoStore.refreshTokenInfo(),await this.stores.coinPriceStore.loadFromStorage()}postLoadingScreenEnd(){super.postLoadingScreenEnd()}getTabIdKey(){return at.sz.YoroiConnector}}var st=a(37065);const nt=f()({stateFetchStore:st.Z}),ot=(0,s.observable)({stateFetchStore:null}),it=(0,s.action)(((e,t,a)=>{const r=d()(nt);return g()(r).call(r,(e=>{ot[e]&&ot[e].teardown()})),g()(r).call(r,(r=>{ot[r]=new nt[r](e,t,a)})),ot}));var lt=a(72527),dt=a(25234);class ut extends dt.Z{}const ct=f()({stateFetchStore:lt.Z,profile:y,uiDialogs:x.Z,uiNotifications:m.Z,coinPriceStore:A,loading:rt,connector:Xe,tokenInfoStore:H,explorers:ut}),pt=(0,s.observable)({stateFetchStore:null,profile:null,explorers:null,uiDialogs:null,uiNotifications:null,coinPriceStore:null,loading:null,connector:null,tokenInfoStore:null,substores:null}),gt=(0,s.action)(((e,t)=>{const a=d()(ct);g()(a).call(a,(e=>{pt[e]&&pt[e].teardown()})),g()(a).call(a,(a=>{pt[a]=new ct[a](pt,e,t)})),g()(a).call(a,(e=>{pt[e]&&pt[e].initialize()})),pt.substores={ada:it(pt,e,t)};const r=pt;var s,n,o;return s=r.substores.ada,g()(n=c()(o=d()(s)).call(o,(e=>s[e]))).call(n,(e=>e.initialize())),r.loading.load().then((()=>console.debug("connector / loading store loaded"))).catch((e=>console.error("connector / loading store load failed",e))),r}));var ht=a(70210),ft=a(11341),wt=a(96608),yt=a(43242),mt=a(92858),xt=a(18752);const bt=f()({profile:new ft.Z,connector:new mt.Z,dialogs:new wt.Z,explorers:new xt.Z,notifications:new yt.Z});var At=a(95118),vt=a(67294),_t=a(70798),Tt=a(16550),Et=a(6467),It=a.n(Et),kt=a(4187),Ct=a.n(kt),Dt=a(63151),Mt=a.n(Dt),St=a(13655),Rt=a.n(St),Wt=a(51949),Bt=a.n(Wt),Pt=a(51738),Nt=a.n(Pt),Ft=a(54206),Ot=a.n(Ft),Lt=a(95383),Ht=a.n(Lt),Ut=a(68333),Vt=a.n(Ut),Gt=a(75686),jt=a.n(Gt),Kt=a(32820),Zt=a.n(Kt),zt=a(78398),Yt=a.n(zt),qt=a(88495),$t=a.n(qt),Jt=a(7637),Xt=a.n(Jt),Qt=a(72198),ea=a.n(Qt);var ta=a(33032),aa=a.n(ta),ra=a(54103),sa=a.n(ra),na=a(89400),oa=a.n(na),ia=a(94184),la=a.n(ia),da=a(93379),ua=a.n(da),ca=a(4159);ua()(ca.Z,{insert:"head",singleton:!1});const pa=ca.Z.locals||{};var ga=a(26447),ha=a(69397),fa=a(23972),wa=a(90948),ya=a(99226),ma=a(99987);ua()(ma.Z,{insert:"head",singleton:!1});const xa=ma.Z.locals||{};var ba=a(70526),Aa=a(48521);class va extends vt.Component{render(){var e;const{publicDeriver:t,walletBalance:a}=this.props,[r,s]=t.plate?(n=t.plate,o=xa.icon,[n.TextPart,(0,Aa.jsx)("div",{className:o,children:(0,Aa.jsx)(ba.Z,{iconSeed:n.ImagePart,saturationFactor:0,scalePx:6})})]):[];var n,o;const i=null===(e=this.props.publicDeriver.plate)||void 0===e?void 0:e.TextPart;return(0,Aa.jsx)(ya.Z,{className:xa.card,children:(0,Aa.jsxs)("div",{className:xa.wrapper,children:[(0,Aa.jsx)("div",{className:xa.avatar,children:s}),(0,Aa.jsxs)("div",{className:xa.nameWrapper,children:[(0,Aa.jsx)(fa.Z,{component:"div",color:"#242838",fontWeight:"500",variant:"b1",fontSize:16,id:"connectedWalletName",children:this.props.publicDeriver.name}),(0,Aa.jsx)("div",{className:xa.checksum,id:"connectedWalletPlate",children:i})]}),null!=a&&(0,Aa.jsx)(ya.Z,{sx:{ml:"auto"},children:a})]})})}}D()(va,"defaultProps",{walletBalance:void 0});var _a=a(38043),Ta=a(69051),Ea=a(85342);ua()(Ea.Z,{insert:"head",singleton:!1});const Ia=Ea.Z.locals||{};var ka=a(88441);const Ca=e=>{var t,a;const r=null!==(t=e.step)&&void 0!==t?t:1,s=null!==(a=e.max)&&void 0!==a?a:3;return(0,Aa.jsx)("div",{className:Ia.component,children:(0,Aa.jsx)(ka.Z,{color:"secondary",sx:{height:"8px"},value:100*r/s,variant:"determinate"})})},Da=Ca;Ca.defaultProps={step:1,max:3};var Ma,Sa,Ra,Wa=a(19896),Ba=a(94535),Pa=a(52298),Na=a(11634),Fa=a.n(Na);function Oa(){return Oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Oa.apply(this,arguments)}function La(e){return vt.createElement("svg",Oa({width:261,height:215,viewBox:"0 0 261 215",xmlns:"http://www.w3.org/2000/svg"},e),Ma||(Ma=vt.createElement("defs",null,vt.createElement("linearGradient",{x1:"0%",y1:"49.974%",x2:"100.018%",y2:"49.974%",id:"no-websites-connected_inline_svg__a"},vt.createElement("stop",{stopColor:"#17D1AA",offset:"0%"}),vt.createElement("stop",{stopColor:"#1ACBAF",offset:"15%"}),vt.createElement("stop",{stopColor:"#21B8BC",offset:"37%"}),vt.createElement("stop",{stopColor:"#2E9BD3",offset:"62%"}),vt.createElement("stop",{stopColor:"#3F71F1",offset:"89%"}),vt.createElement("stop",{stopColor:"#475FFF",offset:"100%"})),vt.createElement("linearGradient",{x1:"0%",y1:"50.001%",x2:"100%",y2:"50.001%",id:"no-websites-connected_inline_svg__b"},vt.createElement("stop",{stopColor:"#17D1AA",offset:"0%"}),vt.createElement("stop",{stopColor:"#1ACBAF",offset:"15%"}),vt.createElement("stop",{stopColor:"#21B8BC",offset:"37%"}),vt.createElement("stop",{stopColor:"#2E9BD3",offset:"62%"}),vt.createElement("stop",{stopColor:"#3F71F1",offset:"89%"}),vt.createElement("stop",{stopColor:"#475FFF",offset:"100%"})),vt.createElement("linearGradient",{x1:"0%",y1:"98.252%",x2:"53.86%",y2:"70.976%",id:"no-websites-connected_inline_svg__c"},vt.createElement("stop",{stopColor:"#1A44B7",offset:"0%"}),vt.createElement("stop",{stopColor:"#4760FF",offset:"100%"})))),Sa||(Sa=vt.createElement("g",{fill:"none",fillRule:"evenodd"},vt.createElement("g",{opacity:.2,stroke:"#1D45BA",strokeWidth:.5},vt.createElement("path",{d:"M88.512 206.008l172.395-98.865M23.001 156.749l160.818-92.225M78.51 52.704l181.606 104.014M-.195 120.451l152.232 87.192"})),vt.createElement("g",{fillRule:"nonzero"},vt.createElement("path",{d:"M43.44 106.652c2.5-16.313 0-20.069 0-20.069l-16.398 21.79s4.387 6.972 3.296 10.894a24.265 24.265 0 01-2.015 5.27 1.485 1.485 0 00.428 1.943c.11.084.23.154.357.207l5.824 3.44 7.042-12.202 1.547-6.88-1.622 1.272a26.273 26.273 0 001.541-5.665z",fill:"url(#no-websites-connected_inline_svg__a)",transform:"translate(72.24 8)"}),vt.createElement("path",{d:"M91.822 4.662l-5.594-3.177a14.715 14.715 0 00-2.47-.94c-1.507-.482-3.319-.224-5.264.906l-68.86 39.8C4.439 44.248.26 52.26.283 59.14l.19 55.39c0 4.128 1.547 6.88 3.88 7.815l6.4 3.326 5.028-7.506L78.765 81.76c5.195-2.999 9.374-11.01 9.35-17.89l-.184-53.4 3.89-5.81z",fill:"url(#no-websites-connected_inline_svg__b)",transform:"translate(72.24 8)"}),vt.createElement("path",{d:"M167.149 20.081c0-6.88-4.248-10.034-9.431-7.035L88.858 52.85c-5.196 3-9.375 11.01-9.352 17.89l.19 55.385c0 6.88 4.25 10.034 9.432 7.035l21.27-12.293a18.807 18.807 0 01-1.189 10.292 63.448 63.448 0 01-2.516 4.983 1.524 1.524 0 00.302 1.846c.511.475 1.28.548 1.874.178 4.964-3.21 11.879-9.41 13.443-19.604.277-1.807.49-3.44.652-4.96l35.025-20.247c5.195-2.999 9.374-11.01 9.35-17.89l-.19-55.385z",fill:"#E1F2FF"})),vt.createElement("g",{transform:"matrix(-1 0 0 1 152.99 48.376)",fill:"url(#no-websites-connected_inline_svg__c)"},vt.createElement("path",{d:"M10.504 9.881c0 2.798-2.262 3.668-5.053 1.945C2.661 10.102.398 6.436.398 3.639.398.842 2.66-.029 5.451 1.695c2.79 1.724 5.053 5.39 5.053 8.186M51.654 35.299c0 2.797-2.262 3.668-5.052 1.944-2.791-1.724-5.053-5.389-5.053-8.186 0-2.798 2.262-3.668 5.053-1.944 2.79 1.723 5.052 5.389 5.052 8.186M34.799 47.854L14.359 35.23c-1.249-.77-2.27-2.427-2.27-3.679 0-1.252 1.021-1.646 2.27-.874l20.44 12.625c1.249.772 2.27 2.428 2.27 3.68 0 1.252-1.021 1.645-2.27.873"})))))}function Ha(){return Ha=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ha.apply(this,arguments)}function Ua(e){return vt.createElement("svg",Ha({width:32,height:32,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},e),Ra||(Ra=vt.createElement("g",{fill:"none",fillRule:"evenodd"},vt.createElement("rect",{fill:"#F0F3F5",width:32,height:32,rx:16}),vt.createElement("g",{transform:"translate(6 8)"},vt.createElement("rect",{stroke:"#C4CAD7",strokeWidth:1.3,width:20,height:16,rx:2}),vt.createElement("path",{stroke:"#C4CAD7",strokeWidth:1.3,d:"M0 4h20"}),vt.createElement("g",{fill:"#C4CAD7",fillRule:"nonzero"},vt.createElement("path",{d:"M3.942 11.5a.106.106 0 01-.077-.033.106.106 0 01-.033-.077c0-.02.005-.038.015-.055l1.05-1.625-.945-1.545a.124.124 0 01-.014-.055c0-.03.01-.056.032-.077A.106.106 0 014.047 8h1.086c.093 0 .163.042.21.125l.35.61.38-.61A.226.226 0 016.283 8h1.034c.03 0 .056.01.078.033a.106.106 0 01.033.077c0 .02-.005.038-.015.055l-.965 1.53 1.065 1.64c.01.017.015.035.015.055 0 .03-.011.056-.033.077a.106.106 0 01-.077.033H6.293a.226.226 0 01-.205-.115l-.435-.67-.415.67a.226.226 0 01-.205.115h-1.09zM8.387 11.5a.106.106 0 01-.077-.033.106.106 0 01-.033-.077c0-.02.006-.038.016-.055l1.05-1.625-.945-1.545a.124.124 0 01-.015-.055c0-.03.01-.056.032-.077A.106.106 0 018.493 8h1.084c.094 0 .164.042.21.125l.35.61.38-.61a.226.226 0 01.21-.125h1.036c.03 0 .055.01.077.033a.106.106 0 01.033.077c0 .02-.005.038-.015.055l-.965 1.53 1.065 1.64c.01.017.015.035.015.055 0 .03-.011.056-.033.077a.106.106 0 01-.077.033h-1.125a.226.226 0 01-.205-.115l-.435-.67-.415.67a.226.226 0 01-.205.115h-1.09zM12.832 11.5a.106.106 0 01-.077-.033.106.106 0 01-.033-.077c0-.02.005-.038.015-.055l1.05-1.625-.945-1.545a.124.124 0 01-.015-.055c0-.03.011-.056.033-.077A.106.106 0 0112.938 8h1.084c.094 0 .164.042.21.125l.35.61.38-.61a.226.226 0 01.21-.125h1.035c.03 0 .056.01.078.033a.106.106 0 01.032.077c0 .02-.005.038-.014.055l-.965 1.53 1.065 1.64c.01.017.015.035.015.055 0 .03-.011.056-.033.077a.106.106 0 01-.077.033h-1.125a.226.226 0 01-.205-.115l-.435-.67-.415.67a.226.226 0 01-.205.115h-1.09z"}))))))}a.p,a.p;var Va,Ga,ja=a(22045),Ka=a(90490),Za=a(60978),za=a(22417);const Ya=(0,he.defineMessages)({subtitle:{id:"connector.label.connect",defaultMessage:"!!!Connect to"},connectWallet:{id:"connector.label.connectWallet",defaultMessage:"!!!Connect Wallet"},connectWalletAuthRequest:{id:"connector.label.connectWalletAuthRequest",defaultMessage:"!!!The dApp requests to use your wallet identity for authentication. Enter your password to confirm."},yourWallets:{id:"connector.label.yourWallets",defaultMessage:"!!!Your Wallets"},selectAllWallets:{id:"connector.label.selectAllWallets",defaultMessage:"!!!Select all wallets"},connectInfo:{id:"connector.connect.info",defaultMessage:"!!!Your connection preferences will be saved to your Yoroi dApp list."},noWalletsFound:{id:"connector.connect.noWalletsFound",defaultMessage:"!!!Ooops, no {network} wallets found"},incorrectWalletPasswordError:{id:"api.errors.IncorrectPasswordError",defaultMessage:"!!!Incorrect wallet password."},createWallet:{id:"connector.connect.createWallet",defaultMessage:"!!!create wallet"},harwareWalletConnectWithAuthNotSupported:{id:"connector.connect.hardwareWalletsConnectWithAuthNotSupported",defaultMessage:"!!!Connecting to hardware wallet with authentication is not supported"}});let qa=(0,_t.Pi)((Ga=class extends vt.Component{constructor(...e){super(...e),D()(this,"form",new Pa.Z({fields:{walletPassword:{type:"password",label:this.context.intl.formatMessage(_a.default.walletPasswordLabel),placeholder:this.context.intl.formatMessage(_a.default.walletPasswordFieldPlaceholder),value:"",validators:[({field:e})=>""===e.value?[!1,this.context.intl.formatMessage(_a.default.fieldIsRequired)]:[!0]]}}},{options:{validateOnChange:!0,validateOnBlur:!1,validationDebounceWait:be.Z.forms.FORM_VALIDATION_DEBOUNCE_WAIT},plugins:{vjf:Fa()()}})),D()(this,"hidePasswordForm",(()=>{this.form.$("walletPassword").clear(),this.props.hidePasswordForm()})),D()(this,"submit",(()=>{this.form.submit({onSuccess:e=>{const{walletPassword:t}=oa()(e).call(e),{deriver:a,checksum:r}=this.props.selectedWallet;a&&r&&this.props.onConnect(a,r,t).catch((e=>{if(!(e instanceof Q.UZ))throw e;this.form.$("walletPassword").invalidate(this.context.intl.formatMessage(Ya.incorrectWalletPasswordError))}))},onError:()=>{}})})),D()(this,"onCancel",(()=>{this.props.onCancel()})),D()(this,"onCreateWallet",(()=>{window.chrome.tabs.create({url:`${window.location.origin}/main_window.html#/wallets/add`}),this.props.onCancel()}))}render(){var e,t;const{intl:a}=this.context,{loading:r,error:s,publicDerivers:n,message:o,onSelectWallet:i,network:l,shouldHideBalance:d,isAppAuth:u,onUpdateHideBalance:p,isRevampLayout:g,selectedWallet:h}=this.props,f=Ae.N.isNightly(),w=la()([pa.component,f&&pa.isNightly]),y=r===X.IDLE||r===X.PENDING,m=r===X.SUCCESS,x=r===X.REJECTED,b="mnemonic"!==(null===(e=h.deriver)||void 0===e?void 0:e.type),A=null!==(t=null==o?void 0:o.url)&&void 0!==t?t:"",v=null==o?void 0:o.imgBase64Url;if(m&&!n.length)return(0,Aa.jsxs)("div",{className:pa.noWallets,children:[(0,Aa.jsx)("div",{className:pa.noWalletsImage,children:(0,Aa.jsx)(La,{})}),(0,Aa.jsxs)("div",{children:[(0,Aa.jsx)("div",{className:pa.noWalletsText,children:a.formatMessage(Ya.noWalletsFound,{network:l})}),(0,Aa.jsx)("button",{className:pa.createWallet,onClick:this.onCreateWallet,type:"button",children:a.formatMessage(Ya.createWallet)})]})]});const _=this.form.$("walletPassword"),T=m&&Boolean(n.length),E=(0,Aa.jsxs)(Wa.Z,{p:"26px",children:[(0,Aa.jsx)("div",{children:b?a.formatMessage(Ya.harwareWalletConnectWithAuthNotSupported):(0,Aa.jsx)(Ba.Z,{type:"password",...sa()(_).call(_),error:_.error,id:"walletPassword"})}),(0,Aa.jsxs)(ga.Z,{direction:"row",spacing:4,mt:"15px",children:[(0,Aa.jsx)(ha.Z,{fullWidth:!0,variant:g?"outlined":"secondary",onClick:this.hidePasswordForm,sx:{minWidth:"auto"},id:"backButton",children:a.formatMessage(_a.default.backButtonLabel)}),!b&&(0,Aa.jsx)(ha.Z,{variant:g?"contained":"primary",sx:{minWidth:"auto"},fullWidth:!0,disabled:!_.isValid,onClick:this.submit,id:"confirmButton",children:a.formatMessage(_a.default.confirm)})]})]});return(0,Aa.jsxs)("div",{className:w,children:[T?(0,Aa.jsxs)(Aa.Fragment,{children:[(0,Aa.jsx)(Da,{step:u?2:1,max:2}),(0,Aa.jsx)(fa.Z,{component:"div",variant:"h4",color:"gray.900",marginTop:"32px",paddingX:"32px",fontWeight:"500",textAlign:"center",fontSize:"20px",className:pa.pageTitle,children:a.formatMessage(Ya.connectWallet)}),(0,Aa.jsxs)("div",{className:pa.connectWrapper,children:[(0,Aa.jsx)("div",{className:pa.image,children:null!=v&&""!==v?(0,Aa.jsx)("img",{src:v,alt:`${A} favicon`}):(0,Aa.jsx)(Ua,{})}),(0,Aa.jsx)(Wa.Z,{marginTop:"16px",children:(0,Aa.jsxs)(fa.Z,{component:"div",variant:"body-1",fontWeight:"400",color:"gray.900",children:[a.formatMessage(Ya.subtitle)," ",(0,Aa.jsx)(fa.Z,{as:"span",variant:"body-1",fontWeight:"500",children:A})]})})]})]}):null,(0,Aa.jsx)(Wa.Z,{flex:1,children:u?E:(0,Aa.jsxs)(Aa.Fragment,{children:[x?(0,Aa.jsx)("div",{className:pa.errorMessage,children:s}):null,y?(0,Aa.jsx)("div",{className:pa.loading,children:(0,Aa.jsx)(Ta.default,{})}):T?(0,Aa.jsxs)("div",{className:pa.walletsContainer,children:[(0,Aa.jsxs)("div",{className:pa.titleWallet,children:[(0,Aa.jsx)(fa.Z,{component:"div",variant:"body-1",lineHeight:"24px",color:"gray.900",children:a.formatMessage(Ya.yourWallets)}),(0,Aa.jsx)("button",{type:"button",className:pa.toggleButton,onClick:p,children:d?(0,Aa.jsx)(Ka.r,{}):(0,Aa.jsx)(ja.r,{})})]}),(0,Aa.jsx)("ul",{className:pa.list,children:c()(n).call(n,((e,t)=>(0,Aa.jsx)("li",{className:pa.listItem,children:(0,Aa.jsx)(Ja,{onClick:()=>i(e,e.plate),children:(0,Aa.jsx)(va,{publicDeriver:e,walletBalance:(0,Aa.jsx)(Wa.Z,{sx:{ml:"auto",textAlign:"right"},children:(0,Aa.jsx)(za.Z,{shouldHideBalance:this.props.shouldHideBalance,amount:e.balance,getTokenInfo:this.props.getTokenInfo,unitOfAccountSetting:this.props.unitOfAccount,getCurrentPrice:this.props.getCurrentPrice,showFiat:!0,showAmount:!0,id:"dAppConnector:connect:walletList:walletCard_"+t})})})})},e.publicDeriverId)))})]}):null]})}),T&&!u?(0,Aa.jsxs)("div",{className:pa.bottom,children:[(0,Aa.jsx)("div",{className:pa.infoText,children:a.formatMessage(Ya.connectInfo)}),(0,Aa.jsx)("div",{className:pa.infoText,children:a.formatMessage(_a.connectorMessages.messageReadOnly)})]}):null]})}},D()(Ga,"contextTypes",{intl:he.intlShape.isRequired}),Va=Ga))||Va;const $a=(0,Za.XC)(qa),Ja=(0,wa.ZP)("button")({cursor:"pointer",width:"100%",fontSize:"1rem",padding:"16px"});var Xa;let Qa=(0,_t.Pi)(Xa=class extends vt.Component{constructor(...e){super(...e),D()(this,"state",{isAppAuth:!1,selectedWallet:{index:-1,deriver:null,checksum:null}}),D()(this,"onUnload",(()=>{const e=this.props.stores.connector.connectingMessage;(0,O.userConnectResponse)({accepted:!1,tabId:null==e?void 0:e.tabId})})),D()(this,"onConnect",(async(e,t,a)=>{var r;const s=this.props.stores.connector.connectingMessage;if(null==s)throw new Error("chromeMessage connecting to a wallet but no connect message found");const n=this.props.actions.connector,o=s.url,i=s.appAuthID;let l;l=null!=a?await(0,O.connectorCreateAuthEntry)({appAuthID:i,publicDeriverId:e.publicDeriverId,password:a}):null;const{publicDeriverId:d}=e,u=this.props.stores.connector.currentConnectorWhitelist,c=Z()(r=u.length?[...u]:[]).call(r,(e=>e.url!==o));c.push({url:o,publicDeriverId:d,appAuthID:i,auth:l,image:s.imgBase64Url}),await n.updateConnectorWhitelist.trigger({whitelist:c}),await Ke.iN.dappPopupConnectWalletPasswordPageViewed(),(0,O.userConnectResponse)({accepted:!0,publicDeriverId:d,auth:l,tabId:s.tabId}),aa()((()=>{n.closeWindow.trigger()}),100)})),D()(this,"onSelectWallet",((e,t)=>{if(this.props.stores.connector.wallets){const r=e.publicDeriverId;var a;this.setState((a=>({...a,selectedWallet:{index:r,deriver:e,checksum:t}}))),r>=0&&e&&(null!=(null===(a=this.props.stores.connector.connectingMessage)||void 0===a?void 0:a.appAuthID)?this.setState({isAppAuth:!0}):this.onConnect(e,t))}})),D()(this,"onCancel",(()=>{const e=this.props.stores.connector.connectingMessage;(0,O.userConnectResponse)({accepted:!1,tabId:null==e?void 0:e.tabId}),this.props.actions.connector.closeWindow.trigger()})),D()(this,"hidePasswordForm",(()=>{this.setState({isAppAuth:!1})})),D()(this,"updateHideBalance",(async()=>{await this.props.actions.profile.updateHideBalance.trigger()}))}componentDidMount(){(0,s.autorun)((()=>{this.props.stores.connector.loadingWallets===X.SUCCESS&&Ke.iN.dappPopupConnectWalletPageViewed({wallet_count:this.props.stores.connector.wallets.length})}))}UNSAFE_componentWillMount(){this.props.actions.connector.refreshWallets.trigger(),window.addEventListener("beforeunload",this.onUnload),window.addEventListener("unload",this.onUnload)}render(){const e=this.props.stores.connector.connectingMessage,t=this.props.stores.connector.wallets,a=this.props.stores.connector.errorWallets,r=this.props.stores.connector.loadingWallets;return(0,Aa.jsx)($a,{selectedWallet:this.state.selectedWallet,onConnect:this.onConnect,onCancel:this.onCancel,isAppAuth:this.state.isAppAuth,hidePasswordForm:this.hidePasswordForm,loading:r,error:a,message:e,publicDerivers:t,onSelectWallet:this.onSelectWallet,network:"Cardano",getTokenInfo:(0,L.genLookupOrFail)(this.props.stores.tokenInfoStore.tokenInfo),shouldHideBalance:this.props.stores.profile.shouldHideBalance,unitOfAccount:this.props.stores.profile.unitOfAccount,getCurrentPrice:this.props.stores.coinPriceStore.getCurrentPrice,onUpdateHideBalance:this.updateHideBalance})}})||Xa;var er,tr;function ar(){return ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ar.apply(this,arguments)}function rr(e){return vt.createElement("svg",ar({width:20,height:18,viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),er||(er=vt.createElement("g",{clipPath:"url(#yoroi-logo_inline_svg__clip0)"},vt.createElement("path",{d:"M15.451 13.856l-1.584 1.121L2.195 6.76c0-.017 0-.033-.005-.049V4.52l13.262 9.338v-.001zM12.194 3.25c-.704.493-1.415.975-2.12 1.467a.188.188 0 01-.257 0C8.947 4.1 8.071 3.487 7.2 2.874c-.917-.649-1.834-1.3-2.75-1.952L3.149 0H0c.167.12.305.22.443.317L2.91 2.06 5.35 3.789c.765.541 1.528 1.086 2.294 1.628.727.513 1.456 1.021 2.183 1.536a.158.158 0 00.215 0c.586-.41 1.18-.812 1.764-1.223a2251.31 2251.31 0 004.357-3.048l3.171-2.21C19.553.32 19.771.167 20 0h-3.157c-1.55 1.083-3.1 2.166-4.648 3.25zM2.208 9.986a.243.243 0 00-.017.042v2.152a.13.13 0 00.011.047l7.79 5.487h.007l1.586-1.12-9.378-6.609h.001zm15.563-5.461L11.973 8.61a.515.515 0 00.061.07c.49.354.981.706 1.472 1.057a.089.089 0 00.053.01l4.198-2.962a.167.167 0 00.014-.04V4.524zm.005 5.546c-.658.463-1.294.91-1.936 1.364l1.506 1.088.43-.304V10.07z",fill:"#fff"}))),tr||(tr=vt.createElement("defs",null,vt.createElement("clipPath",{id:"yoroi-logo_inline_svg__clip0"},vt.createElement("path",{fill:"#fff",d:"M0 0h20v17.714H0z"})))))}a.p;var sr=a(96903);ua()(sr.Z,{insert:"head",singleton:!1});const nr=sr.Z.locals||{};var or,ir,lr=a(85057),dr=a(62999);const ur=(0,he.defineMessages)({yoroiDappConnector:{id:"global.connector.yoroiDappConnector",defaultMessage:"!!!Yoroi Dapp Connector"}});let cr=(0,_t.Pi)((ir=class extends vt.Component{render(){const{intl:e}=this.context;return(0,Aa.jsxs)("div",{className:nr.layout,children:[(0,Aa.jsx)(lr.Z,{isTestnet:Ae.Z.isTest()}),(0,Aa.jsx)("div",{className:nr.header,children:(0,Aa.jsxs)("div",{className:nr.menu,children:[(0,Aa.jsx)(rr,{}),(0,Aa.jsx)("div",{className:nr.logo,children:(0,Aa.jsx)("h3",{children:e.formatMessage(ur.yoroiDappConnector)})}),(0,Aa.jsx)("div",{className:nr.connectorLogoContainer,children:(0,Aa.jsx)(dr.r,{className:nr.connectorLogo})})]})}),(0,Aa.jsx)("div",{className:nr.content,children:this.props.children})]})}},D()(ir,"contextTypes",{intl:he.intlShape.isRequired}),or=ir))||or;var pr,gr,hr=a(28336),fr=a(65990),wr=(a(36572),a(16544)),yr=a(29828),mr=a.n(yr),xr=a(74855),br=a.n(xr),Ar=a(20787),vr=a(52758),_r=a(72375),Tr=a(21023);const Er=(0,he.defineMessages)({copyTooltipMessage:{id:"widgets.copyableaddress.addressCopyTooltipMessage",defaultMessage:"!!!Copy to clipboard"},copied:{id:"widgets.copyableaddress.copied",defaultMessage:"!!!Copied"}}),Ir=(0,wa.ZP)(ya.Z)((({theme:e})=>({"& svg":{"& path":{fill:e.palette.ds.el_gray_medium}}})));let kr=(0,_t.Pi)((gr=class extends vt.Component{render(){const{hash:e,elementId:t,sx:a,onCopyAddress:r,notification:s,darkVariant:n,id:o}=this.props,{intl:i}=this.context,l=s&&s.id===t?vr.r:Ar.r,d=(0,Aa.jsx)(Tr.Z,{title:(0,Aa.jsx)(fa.Z,{component:"div",variant:"body3",children:s&&s.id===t?i.formatMessage(s.message):i.formatMessage(Er.copyTooltipMessage)}),placement:this.props.placementTooltip,children:(0,Aa.jsx)("span",{className:_r.Z.copyIconBig,id:o+"-copyAddress-button",children:(0,Aa.jsx)(Ir,{children:(0,Aa.jsx)(l,{})})})});return(0,Aa.jsxs)(ya.Z,{sx:a,className:la()([_r.Z.component,!0===n&&_r.Z.componentDark]),id:o+"-copyableAddress-box",children:[(0,Aa.jsx)("span",{id:o+"-address-text",children:this.props.children}),(0,Aa.jsx)(br(),{text:e,onCopy:null==r?void 0:(e,t)=>r(),children:d})]})}},D()(gr,"contextTypes",{intl:he.intlShape.isRequired}),D()(gr,"defaultProps",{onCopyAddress:void 0,placementTooltip:"bottom",elementId:void 0,sx:{},darkVariant:!1}),pr=gr))||pr;var Cr,Dr,Mr,Sr;function Rr(){return Rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Rr.apply(this,arguments)}function Wr(e){return vt.createElement("svg",Rr({width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Cr||(Cr=vt.createElement("path",{d:"M7 1a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 11-2 0v-.586L6.707 6.707a1 1 0 01-1.414-1.414L8.586 2H8a1 1 0 01-1-1z",fill:"#3154CB"})),Dr||(Dr=vt.createElement("path",{d:"M2.2 3a.2.2 0 00-.2.2v6.6a.2.2 0 00.2.2h6.6a.2.2 0 00.2-.2V7.625a1 1 0 112 0V9.8A2.2 2.2 0 018.8 12H2.2A2.2 2.2 0 010 9.8V3.2A2.2 2.2 0 012.2 1h2.175a1 1 0 010 2H2.2z",fill:"#3154CB"})))}a.p;let Br=(0,_t.Pi)((Sr=class extends vt.Component{constructor(...e){super(...e),D()(this,"getTicker",(e=>{const t=this.getFingerprint(e);return void 0!==t?(0,Aa.jsxs)(fr.Z,{selectedExplorer:this.props.selectedExplorer,hash:t,light:!0,linkType:"token",children:[(0,Aa.jsx)("span",{children:(0,hr.truncateToken)((0,L.getTokenName)(e))})," ",(0,Aa.jsx)(Wr,{})]}):(0,hr.truncateToken)((0,L.getTokenName)(e))})),D()(this,"getFingerprint",(e=>{if("Cardano"===e.Metadata.type)return(0,L.getTokenIdentifierIfExists)(e)})),D()(this,"_resolveTokenInfo",(e=>this.props.getTokenInfo(e))),D()(this,"renderAmountDisplay",(e=>{const t=(0,L.assetNameFromIdentifier)(e.entry.identifier),a=this._resolveTokenInfo(e.entry),r=a?a.Metadata.numberOfDecimals:0,s=e.entry.amount.shiftedBy(-r),n=a?this.getTicker(a):t,[o,i]=(0,hr.splitAmount)(s,r),l=mr()(o).call(o,"-")?o:"+"+o;return(0,Aa.jsxs)("div",{children:[(0,Aa.jsx)("span",{children:l}),(0,Aa.jsx)("span",{children:i})," ",n]})})),D()(this,"renderRow",(e=>{var t;if(!Boolean(e.address))return null;const a=e.address.value;if(null==a)return null;const r=`${e.kind}-address-${e.addressIndex}-copyNotification`,s=t=>`${e.kind}-${e.address.address}-${e.addressIndex}-${t}`,n=t=>(0,Aa.jsx)("div",{id:"addressRow-amount",children:this.renderAmountDisplay({entry:{...t,amount:e.transform?e.transform(t.amount):t.amount}})}),o=e.address.address?this.props.addressToDisplayString(e.address.address):"";return(0,Aa.jsxs)(Wa.Z,{display:"flex",alignItems:"flex-start",justifyContent:"space-between",py:"16px",borderRadius:"8px",id:"addressRow",children:[(0,Aa.jsx)(kr,{id:"utxoDetails_"+e.addressIndex,hash:o,elementId:r,onCopyAddress:()=>this.props.onCopyAddressTooltip(e.address.address,r),notification:this.props.notification,children:(0,Aa.jsx)(fr.Z,{selectedExplorer:this.props.selectedExplorer,hash:o,light:!0,linkType:"address",children:(0,Aa.jsx)(fa.Z,{as:"span",color:"#242838",children:(0,hr.truncateAddressShort)(o,10)})})}),(0,Aa.jsxs)(Wa.Z,{textAlign:"right",color:"var(--yoroi-palette-gray-600)",sx:{"& > *":{paddingTop:"6px",":first-child":{color:"var(--yoroi-palette-gray-900)"}}},children:[n(a.getDefaultEntry()),c()(t=a.nonDefaultEntries()).call(t,(e=>(0,Aa.jsxs)(vt.Fragment,{children:[(0,Aa.jsx)("div",{}),(0,Aa.jsx)("div",{}),n(e)]},s(e.identifier))))]})]},s(a.getDefaultEntry().identifier))}))}render(){var e,t,a,r,s;const{intl:n}=this.context,{txData:o}=this.props,i=Z()(e=o.outputs).call(e,(e=>e.isForeign));return(0,Aa.jsxs)(Wa.Z,{children:[(0,Aa.jsxs)(Wa.Z,{children:[(0,Aa.jsx)(Wa.Z,{pb:"10px",children:(0,Aa.jsx)(fa.Z,{component:"div",variant:"body1",fontWeight:"500",color:"#000",children:n.formatMessage(_a.connectorMessages.fromAddresses,{qty:o.inputs.length})})}),(0,Aa.jsxs)(Pr,{children:[(0,Aa.jsxs)(Wa.Z,{children:[(0,Aa.jsx)(fa.Z,{component:"div",variant:"body1",fontWeight:"500",color:"#4A5065",children:n.formatMessage(_a.connectorMessages.yourAddresses)}),(0,Aa.jsx)(Wa.Z,{id:"fromAddressesBox-yourInputs",children:c()(t=o.inputs).call(t,((e,t)=>this.renderRow({kind:"in",address:e,addressIndex:t,transform:e=>e.abs().negated()})))})]}),o.foreignInputs.length>0&&(0,Aa.jsxs)(Aa.Fragment,{children:[(0,Aa.jsx)(Nr,{}),(0,Aa.jsxs)(Wa.Z,{children:[(0,Aa.jsx)(fa.Z,{component:"div",variant:"body1",fontWeight:"500",color:"#4A5065",children:n.formatMessage(_a.connectorMessages.foreignAddresses)}),(0,Aa.jsx)(Wa.Z,{id:"fromAddressesBox-foreignInputs",children:c()(a=o.foreignInputs).call(a,((e,t)=>this.renderRow({kind:"in-foreign",address:e,addressIndex:t,transform:e=>e.abs().negated()})))})]})]})]})]}),(0,Aa.jsxs)(Wa.Z,{children:[(0,Aa.jsx)(Wa.Z,{pb:"10px",children:(0,Aa.jsx)(fa.Z,{component:"div",variant:"body1",fontWeight:"500",color:"#000",children:n.formatMessage(_a.connectorMessages.toAddresses,{qty:o.outputs.length})})}),(0,Aa.jsxs)(Pr,{withMargin:!1,children:[(0,Aa.jsxs)(Wa.Z,{children:[(0,Aa.jsx)(fa.Z,{component:"div",variant:"body1",fontWeight:"500",color:"#4A5065",children:n.formatMessage(_a.connectorMessages.yourAddresses)}),(0,Aa.jsx)(Wa.Z,{id:"toAddressesBox-yourOutputs",children:c()(r=Z()(s=o.outputs).call(s,(e=>!e.isForeign))).call(r,((e,t)=>this.renderRow({kind:"out",address:e,addressIndex:t,transform:e=>e.abs()})))})]}),i.length>0&&(0,Aa.jsxs)(Aa.Fragment,{children:[(0,Aa.jsx)(Nr,{}),(0,Aa.jsxs)(Wa.Z,{id:"toAddressesBox-foreignOutputs",children:[(0,Aa.jsx)(fa.Z,{component:"div",variant:"body1",fontWeight:"500",color:"#4A5065",children:n.formatMessage(_a.connectorMessages.foreignAddresses)}),(0,Aa.jsx)(Wa.Z,{children:c()(i).call(i,((e,t)=>this.renderRow({kind:"out-foreign",address:e,addressIndex:t,transform:e=>e.abs()})))})]})]})]})]})]})}},D()(Sr,"contextTypes",{intl:he.intlShape.isRequired}),Mr=Sr))||Mr;const Pr=({children:e,withMargin:t=!0})=>(0,Aa.jsx)(Wa.Z,{sx:{border:"1px solid #DCE0E9",borderRadius:"8px",padding:"16px",marginBottom:t?"40px":0},children:e}),Nr=()=>(0,Aa.jsx)(Wa.Z,{sx:{height:"1px",width:"100%",backgroundColor:"#DCE0E9",mt:"16px",mb:"16px"}}),Fr=Br;var Or=a(35450),Lr=a(45670),Hr=a(66568),Ur=a(69422),Vr=a(75316),Gr=a(61730);const jr=(0,he.defineMessages)({details:{id:"connector.signIn.tabs.details",defaultMessage:"!!!Details"},utxos:{id:"connector.signIn.tabs.utxos",defaultMessage:"!!!UTxOs"},connection:{id:"connector.signIn.tabs.connection",defaultMessage:"!!!Connection"}}),Kr=(0,he.injectIntl)((0,_t.Pi)((function({connectionContent:e,utxosContent:t,detailsContent:a,isDataSignin:r,intl:s}){const[n,o]=(0,vt.useState)(0),i=(0,Gr.Z)("(min-width:1441px)"),l=[{id:0,label:s.formatMessage(jr.details),component:a},{id:1,label:s.formatMessage(jr.utxos),component:t},{id:2,label:s.formatMessage(jr.connection),component:e}],d=Ae.Z.isNightly()||Ae.Z.isTest();return(0,Aa.jsxs)(Zr,{children:[(0,Aa.jsx)(fa.Z,{component:"div",color:"#242838",variant:"h4",align:"center",my:"32px",children:s.formatMessage(_a.connectorMessages[r?"signData":"signTransaction"])}),(0,Aa.jsxs)(Lr.ZP,{value:n,children:[(0,Aa.jsxs)(Wa.Z,{sx:{backgroundColor:"var(--yoroi-palette-common-white)",marginLeft:"32px",marginRight:"32px"},children:[(0,Aa.jsx)(Hr.Z,{sx:{width:i?"640px":"480px",boxShadow:"none","&.MuiTabs-indicator":{height:"2px"}},textColor:"primary",indicatorColor:"primary",onChange:(e,t)=>o(t),"aria-label":"Staking tabs",children:c()(l).call(l,(({label:e,component:t,id:a})=>null!==t&&(0,Aa.jsx)(zr,{disableRipple:!0,label:(0,Aa.jsx)(fa.Z,{component:"div",variant:"body1",fontWeight:500,children:e}),value:a},a)))}),(0,Aa.jsx)("div",{style:{backgroundColor:"#DCE0E9",height:"1px",width:"100%"}})]}),c()(l).call(l,(({component:e,id:t})=>null!==e&&(0,Aa.jsx)(Ur.Z,{sx:{height:d?"calc(100vh - 306px - 46px)":"calc(100vh - 306px)",overflowY:"scroll",margin:"auto",boxShadow:"none",backgroundColor:"var(--yoroi-palette-common-white)",p:"32px",pr:"12px",width:i?"640px":"480px"},value:t,children:e},t)))]})]})}))),Zr=(0,Or.Z)(Wa.Z)({backgroundColor:"var(--yoroi-palette-common-white)"}),zr=(0,Or.Z)(Vr.Z)({"&.MuiTab-root":{paddingLeft:0,paddingRight:0,paddingTop:"11px",paddingBottom:"11px",marginRight:"24px",minWidth:0},"&.MuiTab-root:hover":{color:"#3154CB"}}),Yr=(0,he.defineMessages)({summary:{id:"connector.signin.summary",defaultMessage:"!!!Summary"}}),qr=({txAssetsData:e,renderExplorerHashLink:t,intl:a})=>{const{sent:r,received:s}=e,[n=null]=r,[o=null]=s,{assetsSent:i,assetSent:l,assetsReceived:d,assetReceived:u}=_a.connectorMessages;return(0,Aa.jsxs)(Aa.Fragment,{children:[r.length>1&&(0,Aa.jsx)(ya.Z,{lineHeight:"24px",children:a.formatMessage(i,{quantity:r.length})}),1===r.length&&(0,Aa.jsxs)(ya.Z,{lineHeight:"24px",sx:{"& .ExplorableHash_url":{color:"#fff"},"& .ExplorableHash_url svg":{marginRight:"3px"},"& .ExplorableHash_url svg path":{fill:"#fff"}},children:[t(null==n?void 0:n.tokenInfo),a.formatMessage(l,{assetName:""})]}),s.length>1&&(0,Aa.jsx)(ya.Z,{lineHeight:"24px",children:a.formatMessage(d,{quantity:s.length})}),1===s.length&&(0,Aa.jsxs)(ya.Z,{lineHeight:"24px",sx:{"& .ExplorableHash_url":{color:"#fff"},"& .ExplorableHash_url svg":{marginRight:"3px"},"& .ExplorableHash_url svg path":{fill:"#fff"}},children:[t(null==o?void 0:o.tokenInfo)," ",a.formatMessage(u,{assetName:""})]})]})},$r=(0,he.injectIntl)((function({txAssetsData:e,renderExplorerHashLink:t,intl:a}){const{total:r,isOnlyTxFee:s,sent:n,received:o}=e,i=s&&0===n.length&&0===o.length;return(0,Aa.jsxs)(ya.Z,{p:"16px",borderRadius:"8px",color:"var(--yoroi-palette-common-white)",sx:{background:"linear-gradient(30.09deg, #244ABF 0%, #4760FF 176.73%)"},children:[(0,Aa.jsxs)(ya.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",id:"signTxMessagesSummaryBox",children:[(0,Aa.jsx)(fa.Z,{component:"div",variant:"b1",fontWeight:500,children:a.formatMessage(Yr.summary)}),(0,Aa.jsxs)(fa.Z,{component:"div",variant:"h3",fontSize:"24px",textAlign:"right",id:"signTxMessagesSummaryBox-total",children:[i?r.fee:r.total," ",r.ticker]})]}),(n.length>0||o.length>0)&&(0,Aa.jsxs)(Aa.Fragment,{children:[(0,Aa.jsx)(Jr,{}),(0,Aa.jsx)(ya.Z,{textAlign:"right",children:qr({txAssetsData:e,renderExplorerHashLink:t,intl:a})})]})]})})),Jr=()=>(0,Aa.jsx)(ya.Z,{sx:{height:"1px",width:"100%",background:"rgba(255, 255, 255, 0.48)",mt:"16px",mb:"16px"}});var Xr;function Qr(){return Qr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Qr.apply(this,arguments)}function es(e){return vt.createElement("svg",Qr({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Xr||(Xr=vt.createElement("path",{d:"M2.4 5.933a1.042 1.042 0 000 1.475l7.008 7.008a.83.83 0 001.175 0l7.008-7.008a1.041 1.041 0 000-1.475 1.041 1.041 0 00-1.475 0L10 12.05 3.875 5.925c-.409-.4-1.067-.4-1.475.008z",fill:"#4A5065"})))}a.p;var ts=a(90992);const as=(0,he.defineMessages)({transactionFee:{id:"connector.signin.transactionFee",defaultMessage:"!!!Transaction Fee"}}),rs=({amount:e,tokenInfo:t,renderExplorerHashLink:a})=>(0,Aa.jsxs)(Aa.Fragment,{children:[1===e.toNumber()&&t.IsNFT?null:(0,Aa.jsx)("span",{children:e.toNumber()+" "}),a(t)]}),ss=(0,he.injectIntl)((function({intl:e,txAssetsData:t,renderExplorerHashLink:a,passwordFormField:r,hwWalletError:s,walletType:n,cip95Info:o}){const{total:i,isOnlyTxFee:l,sent:d,received:u}=t,c=Number(i.amount)<0,p=Number(i.amount)>0;return(0,Aa.jsxs)(Wa.Z,{children:[(0,Aa.jsxs)(Wa.Z,{children:[(0,Aa.jsx)(ls,{cip95Info:o}),(0,Aa.jsx)("br",{})]}),(0,Aa.jsx)($r,{renderExplorerHashLink:a,txAssetsData:t}),(0,Aa.jsx)(is,{id:"signTxAdditionalInfoPanel",children:(0,Aa.jsxs)(Wa.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",id:"signTxAdditionalInfoPanelBox",children:[(0,Aa.jsx)(fa.Z,{component:"div",color:"#4A5065",fontWeight:500,children:e.formatMessage(as.transactionFee)}),(0,Aa.jsxs)(fa.Z,{component:"div",textAlign:"right",color:"#242838",id:"signTxAdditionalInfoPanelBox-fee",children:[i.fee," ",i.ticker]})]})}),(!l||d.length>0||u.length>0)&&(0,Aa.jsxs)(Aa.Fragment,{children:[(0,Aa.jsx)(ns,{intl:e,total:i,hasNativeToken:c,assets:d,action:"sent",panelTitle:e.formatMessage(_a.connectorMessages.send),renderExplorerHashLink:a}),(0,Aa.jsx)(ns,{intl:e,total:i,hasNativeToken:p,assets:u,action:"received",panelTitle:e.formatMessage(_a.connectorMessages.receive),renderExplorerHashLink:a})]}),"mnemonic"===n&&(0,Aa.jsx)(Wa.Z,{mt:"32px",children:r}),(0,Aa.jsx)(ts.Z,{error:s})]})})),ns=({intl:e,assets:t=[],total:a,panelTitle:r,action:s,hasNativeToken:n,renderExplorerHashLink:o})=>{var i,l;const[d,u]=(0,vt.useState)(!1),p=t.length>1,{assetsSent:g,assetsReceived:h,noAssetsSent:f,noAssetsReceived:w}=_a.connectorMessages,y="sent"===s?g:h,m="sent"===s?f:w;return(0,Aa.jsxs)(is,{children:[(0,Aa.jsxs)(Wa.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",sx:{cursor:"pointer"},onClick:()=>u((e=>!e)),children:[(0,Aa.jsx)(fa.Z,{component:"div",color:"#4A5065",fontWeight:500,children:r}),p&&(0,Aa.jsx)(Wa.Z,{sx:{rotate:d?"180deg":"none"},children:(0,Aa.jsx)(es,{})})]}),(mr()(i=a.amount).call(i,"-")&&"sent"===s||!mr()(l=a.amount).call(l,"-")&&"received"===s)&&(0,Aa.jsxs)(os,{children:[a.amount," ",a.ticker]}),!p&&1===t.length&&(0,Aa.jsx)(os,{children:rs({...t[0],renderExplorerHashLink:o})}),p&&d&&(0,Aa.jsx)(Aa.Fragment,{children:c()(t).call(t,((e,t)=>(0,Aa.jsx)(os,{children:rs({...e,renderExplorerHashLink:o})},t)))}),p&&!d&&(0,Aa.jsx)(os,{children:e.formatMessage(y,{quantity:t.length})}),!n&&0===t.length&&(0,Aa.jsx)(os,{children:e.formatMessage(m)})]})},os=({children:e})=>(0,Aa.jsx)(Wa.Z,{mt:"16px",id:"asseetValueDisplayBox",children:(0,Aa.jsx)(fa.Z,{component:"div",textAlign:"right",color:"#242838",children:e})}),is=({children:e})=>(0,Aa.jsx)(Wa.Z,{mt:"32px",width:"100%",p:"16px",border:"1px solid var(--yoroi-palette-gray-100)",borderRadius:"8px",children:e}),ls=({cip95Info:e})=>{var t,a,r,s,n,o,i,l,d,u,p,g,h,f;function w(e){try{return new ee.Z(e).div(1e6).toString()}catch(t){return console.error(t),String(e)}}return[...c()(t=Z()(e).call(e,(e=>"StakeRegistrationCert"===e.type))).call(t,((e,t)=>{if("StakeRegistrationCert"!==e.type)throw new Error("unexpected type");return(0,Aa.jsxs)("div",{children:[(0,Aa.jsx)("span",{children:"Register stake credential"}),e.coin&&(0,Aa.jsxs)("span",{children:["with ",w(e.coin)," ADA deposit"]})]},`StakeRegistrationCert${t}`)})),...c()(a=Z()(e).call(e,(e=>"StakeDeregistrationCert"===e.type))).call(a,((e,t)=>{if("StakeDeregistrationCert"!==e.type)throw new Error("unexpected type");return(0,Aa.jsxs)("div",{children:[(0,Aa.jsx)("span",{children:"Deregister stake credential"}),e.coin&&(0,Aa.jsxs)("span",{children:["and return ",w(e.coin)," ADA deposit"]})]},`StakeDeregistrationCert${t}`)})),...c()(r=Z()(e).call(e,(e=>"StakeDelegationCert"===e.type))).call(r,((e,t)=>{if("StakeDelegationCert"!==e.type)throw new Error("unexpected type");return(0,Aa.jsxs)("div",{children:["Stake delegation to the pool: ",e.poolKeyHash]},`StakeDelegationCert${t}`)})),...c()(s=Z()(e).call(e,(e=>"VoteDelegCert"===e.type))).call(s,((e,t)=>{if("VoteDelegCert"!==e.type)throw new Error("unexpected type");return(0,Aa.jsxs)("div",{children:["Vote delegation to DRep: ",e.drep]},`VoteDelegCert${t}`)})),...c()(n=Z()(e).call(e,(e=>"StakeVoteDelegCert"===e.type))).call(n,((e,t)=>{if("StakeVoteDelegCert"!==e.type)throw new Error("unexpected type");return(0,Aa.jsxs)("div",{children:[(0,Aa.jsxs)("div",{children:["Delegate to the stake pool $",e.poolKeyHash]}),(0,Aa.jsxs)("div",{children:["and DRep $",e.drep]})]},`StakeVoteDelegCert${t}`)})),...c()(o=Z()(e).call(e,(e=>"StakeRegDelegCert"===e.type))).call(o,((e,t)=>{if("StakeRegDelegCert"!==e.type)throw new Error("unexpected type");return(0,Aa.jsxs)("div",{children:[(0,Aa.jsxs)("div",{children:["Register your stake credential with deposit of ",w(e.coin)," ADA and delegate to stake pool"]}),(0,Aa.jsxs)("div",{children:["$",e.poolKeyHash]})]},`StakeRegDelegCert${t}`)})),...c()(i=Z()(e).call(e,(e=>"VoteRegDelegCert"===e.type))).call(i,((e,t)=>{if("VoteRegDelegCert"!==e.type)throw new Error("unexpected type");return(0,Aa.jsxs)("div",{children:[(0,Aa.jsxs)("div",{children:["Register your stake credential with deposit of ",w(e.coin)," ADA and delegate to the DRep"]}),(0,Aa.jsxs)("div",{children:["$",e.drep]})]},`VoteRegDelegCert${t}`)})),...c()(l=Z()(e).call(e,(e=>"StakeVoteRegDelegCert"===e.type))).call(l,((e,t)=>{if("StakeVoteRegDelegCert"!==e.type)throw new Error("unexpected type");return(0,Aa.jsxs)("div",{children:[(0,Aa.jsxs)("div",{children:["Register your stake credential with deposit of ",w(e.coin)," ADA and delegate to the DRep"]}),(0,Aa.jsxs)("div",{children:["$",e.drep," and the stake pool"]}),(0,Aa.jsxs)("div",{children:["$",e.poolKeyHash]})]},`StakeVoteRegDelegCert${t}`)})),...c()(d=Z()(e).call(e,(e=>"RegDrepCert"===e.type))).call(d,((e,t)=>{if("RegDrepCert"!==e.type)throw new Error("unexpected type");return(0,Aa.jsxs)("div",{children:[(0,Aa.jsxs)("div",{children:["Register DRep credential with deposit ",w(e.coin)," ADA"]}),e.anchor&&(0,Aa.jsxs)(Aa.Fragment,{children:[(0,Aa.jsxs)("div",{children:["URL: ",e.anchor.url]}),(0,Aa.jsxs)("div",{children:["Hash: ",e.anchor.dataHash]})]})]},`RegDrepCert${t}`)})),...c()(u=Z()(e).call(e,(e=>"UnregDrepCert"===e.type))).call(u,((e,t)=>{if("UnregDrepCert"!==e.type)throw new Error("unexpected type");return(0,Aa.jsxs)("div",{children:["Unregister DRep credential and return ",w(e.coin)," ADA deposit"]},`UnregDrepCert${t}`)})),...c()(p=Z()(e).call(e,(e=>"UpdateDrepCert"===e.type))).call(p,((e,t)=>{if("UpdateDrepCert"!==e.type)throw new Error("unexpected type");return(0,Aa.jsxs)("div",{children:[(0,Aa.jsx)("div",{children:"Update DRep credential"}),e.anchor&&(0,Aa.jsxs)(Aa.Fragment,{children:[(0,Aa.jsxs)("div",{children:["URL: ",e.anchor.url]}),(0,Aa.jsxs)("div",{children:["Hash: ",e.anchor.dataHash]})]})]},`UpdateDrepCert${t}`)})),...c()(g=Z()(e).call(e,(e=>"TreasuryValue"===e.type))).call(g,((e,t)=>{if("TreasuryValue"!==e.type)throw new Error("unexpected type");return(0,Aa.jsxs)("div",{children:["Treasury value: ",w(e.coin)," ADA"]},`TreasuryValue${t}`)})),...c()(h=Z()(e).call(e,(e=>"TreasuryDonation"===e.type))).call(h,((e,t)=>{if("TreasuryDonation"!==e.type)throw new Error("unexpected type");return(0,Aa.jsxs)("div",{children:["Treasury donation: ",w(e.positiveCoin)," ADA"]},`TreasuryDonation${t}`)})),...c()(f=Z()(e).call(e,(e=>"VotingProcedure"===e.type))).call(f,((e,t)=>{if("VotingProcedure"!==e.type)throw new Error("unexpected type");return(0,Aa.jsxs)("div",{children:[(0,Aa.jsxs)("div",{children:["Voter: ",e.voterHash]}),(0,Aa.jsxs)("div",{children:["Governance action transaction: ",e.govActionTxId]}),(0,Aa.jsxs)("div",{children:["Governance action index: ",e.govActionIndex]}),(0,Aa.jsxs)("div",{children:["Vote: ",["no","yes","abstain"][e.vote]]}),e.anchor&&(0,Aa.jsxs)("div",{children:[(0,Aa.jsxs)("div",{children:["URL: ",e.anchor.url]}),(0,Aa.jsxs)("div",{children:["Hash: ",e.anchor.dataHash]})]})]},`VotingProcedure${t}`)}))]},ds=(0,he.defineMessages)({connectedTo:{id:"connector.signin.connectedTo",defaultMessage:"!!!Connected To"}}),us=(0,he.injectIntl)((function({intl:e,connectedWebsite:t,connectedWallet:a}){var r,s;const n=null!==(r=null==t?void 0:t.url)&&void 0!==r?r:"",o=null!==(s=null==t?void 0:t.image)&&void 0!==s?s:"";return(0,Aa.jsxs)(ya.Z,{children:[(0,Aa.jsx)(fa.Z,{component:"div",color:"#4A5065",variant:"body1",fontWeight:500,mb:"16px",children:e.formatMessage(ds.connectedTo)}),(0,Aa.jsxs)(ya.Z,{display:"flex",alignItems:"center",children:[(0,Aa.jsx)(ya.Z,{sx:{marginRight:"8px",display:"flex",justifyContent:"center",alignItems:"center",width:"40px",height:"40px",border:"1px solid #A7AFC0",borderRadius:"50%",img:{width:"30px"}},children:null!=o&&""!==o?(0,Aa.jsx)("img",{src:o,alt:`${n} favicon`}):(0,Aa.jsx)(Ua,{})}),(0,Aa.jsx)(fa.Z,{component:"div",variant:"body1",fontWeight:"400",color:"#242838",id:"connectedToUrl",children:n})]}),(0,Aa.jsxs)(ya.Z,{mt:"32px",children:[(0,Aa.jsx)(fa.Z,{component:"div",color:"#4A5065",variant:"body1",fontWeight:500,mb:"16px",children:e.formatMessage(_a.connectorMessages.fromWallet)}),(0,Aa.jsx)(va,{publicDeriver:a})]})]})}));var cs,ps;const gs=(0,he.defineMessages)({incorrectWalletPasswordError:{id:"api.errors.IncorrectPasswordError",defaultMessage:"!!!Incorrect wallet password."},sendError:{id:"connector.signin.error.sendError",defaultMessage:"!!!An error occured when sending the transaction."},signMessage:{id:"connector.signin.signMessage",defaultMessage:"!!!Sign Message"}}),hs=(0,_t.Pi)((ps=class extends vt.Component{constructor(...e){super(...e),D()(this,"state",{isSubmitting:!1}),D()(this,"form",new Pa.Z({fields:{walletPassword:{type:"password",label:this.context.intl.formatMessage(_a.default.passwordLabel),placeholder:this.context.intl.formatMessage(_a.default.passwordLabel),value:"",validators:[({field:e})=>""===e.value?[!1,this.context.intl.formatMessage(_a.default.fieldIsRequired)]:[!0]]}}},{options:{validateOnChange:!0,validateOnBlur:!1,validationDebounceWait:be.Z.forms.FORM_VALIDATION_DEBOUNCE_WAIT},plugins:{vjf:Fa()()}})),D()(this,"getTicker",(e=>{const t=this.getFingerprint(e);return void 0!==t?(0,Aa.jsx)(fr.Z,{selectedExplorer:this.props.selectedExplorer,hash:t,light:!0,linkType:"token",children:(0,Aa.jsx)("span",{children:(0,hr.truncateToken)((0,L.getTokenName)(e))})}):(0,hr.truncateToken)((0,L.getTokenName)(e))})),D()(this,"renderAddressExplorerUrl",(e=>{const t=this.getFingerprint(e);return void 0!==t?(0,Aa.jsxs)(fr.Z,{selectedExplorer:this.props.selectedExplorer,hash:t,light:!0,linkType:"token",children:[(0,Aa.jsx)("span",{children:(0,hr.truncateAddressShort)((0,L.getTokenName)(e),10)})," ",(0,Aa.jsx)(Wr,{})]}):(0,hr.truncateAddressShort)((0,L.getTokenName)(e),10)})),D()(this,"getFingerprint",(e=>{if("Cardano"===e.Metadata.type)return(0,L.getTokenIdentifierIfExists)(e)})),D()(this,"getDisplayAmount",(e=>{const t=this.props.getTokenInfo(e);if(!t)throw new Error("missing token info");const a=t?t.Metadata.numberOfDecimals:0,r=e.amount.shiftedBy(-a),s=e.fee.shiftedBy(-a),n=0===e.amount.toNumber()||e.amount.toNumber()<0,o=e.amount.plus(n?e.fee.negated():e.fee).shiftedBy(-a),i=t?this.getTicker(t):(0,L.assetNameFromIdentifier)(e.identifier);let l=null,d=null;if(!0===this.props.unitOfAccountSetting.enabled){const{currency:e}=this.props.unitOfAccountSetting,a=this.props.getCurrentPrice((0,L.getTokenName)(t),e);if(null!=a){const t=(0,wr.calculateAndFormatValue)(r,a),[s,n]=t.split(".");l=s+(n?"."+n:".00"),d=e}}const[u,c]=(0,hr.splitAmount)(r,a),[p,g]=(0,hr.splitAmount)(s,a),[h,f]=(0,hr.splitAmount)(o,a);return{fiatAmount:l,currency:d,amount:u+(c||""),fee:p+(g||""),total:h+(f||""),ticker:i}})),D()(this,"getAssetsExplorerLink",(()=>null)),D()(this,"getSummaryAssetsData",(()=>{const{txData:e}=this.props,t={total:{},isOnlyTxFee:!1,sent:[],received:[]};if(e){var a;const s=e.amount.defaults.defaultIdentifier,n=null!==(a=e.amount.get(s))&&void 0!==a?a:new ee.Z("0"),o=new ee.Z(e.fee.amount),i=e.amount.nonDefaultEntries();for(const e of i){var r;const a={amount:e.amount,tokenInfo:null!==(r=this.props.getTokenInfo(e))&&void 0!==r?r:{Identifier:e.identifier,IsDefault:!1,Metadata:{type:"Cardano",policyId:e.identifier.split(".")[0],assetName:e.identifier.split(".")[1],numberOfDecimals:0,ticker:null,longName:null}}};e.amount.isPositive()?t.received.push(a):t.sent.push(a)}t.total=this.getDisplayAmount({identifier:e.fee.tokenId,networkId:e.fee.networkId,amount:n,fee:o}),t.isOnlyTxFee=0===n.toNumber()}return t}))}submit(){"mnemonic"===this.props.walletType?this.form.submit({onSuccess:e=>{const{walletPassword:t}=oa()(e).call(e);this.setState({isSubmitting:!0}),this.props.onConfirm(t).finally((()=>{this.setState({isSubmitting:!1})})).catch((e=>{if(!(e instanceof Q.UZ))throw e;this.form.$("walletPassword").invalidate(this.context.intl.formatMessage(gs.incorrectWalletPasswordError))}))},onError:()=>{}}):(this.setState({isSubmitting:!0}),this.props.onConfirm("").finally((()=>{this.setState({isSubmitting:!1})})).catch((e=>{throw e})))}renderPayload(e){const t=(0,Ze.hexToUtf)(e);return t.match(/^[\t\n\r -~\xA0-\xAC\xAE-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0606-\u061B\u061D-\u06DC\u06DE-\u070D\u0710-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0898-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B50-\u1B7E\u1B80-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C88\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u2000-\u200A\u2010-\u2029\u202F-\u205F\u2070\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2426\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E3\u31EF-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EFD}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110BC}\u{110BE}-\u{110C2}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1342F}\u{13440}-\u{13455}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BC9F}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D172}\u{1D17B}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}\u{1F8B1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA88}\u{1FA90}-\u{1FABD}\u{1FABF}-\u{1FAC5}\u{1FACE}-\u{1FADB}\u{1FAE0}-\u{1FAE8}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBCA}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0100}-\u{E01EF}]+$/u)?t:e}render(){var e;const{form:t}=this,a=t.$("walletPassword"),{intl:r}=this.context,{txData:s,onCancel:n,connectedWebsite:o,signData:i}=this.props,{isSubmitting:l}=this.state,{walletType:d,hwWalletError:u,isHwWalletErrorRecoverable:c}=this.props;if(u&&!1===c)return(0,Aa.jsxs)(Aa.Fragment,{children:[(0,Aa.jsx)(ts.Z,{error:u}),Boolean(this.props.tx)&&(0,Aa.jsxs)(Wa.Z,{children:[(0,Aa.jsx)(fa.Z,{component:"div",children:"Transaction:"}),(0,Aa.jsx)("textarea",{rows:"10",style:{width:"100%"},disabled:!0,value:this.props.tx})]})]});let p,g,h;if(s){const e=this.getSummaryAssetsData();p=(0,Aa.jsx)(Wa.Z,{children:(0,Aa.jsx)(ss,{txAssetsData:e,renderExplorerHashLink:this.renderAddressExplorerUrl,walletType:d,hwWalletError:u,passwordFormField:(0,Aa.jsx)(Ba.Z,{type:"password",...sa()(a).call(a),error:a.error,id:"walletPassword"}),cip95Info:s.cip95Info})}),g=(0,Aa.jsxs)(Wa.Z,{children:[(0,Aa.jsx)(Wa.Z,{mb:"32px",children:(0,Aa.jsx)($r,{txAssetsData:e,renderExplorerHashLink:this.renderAddressExplorerUrl})}),(0,Aa.jsx)(Fr,{txData:s,onCopyAddressTooltip:this.props.onCopyAddressTooltip,addressToDisplayString:this.props.addressToDisplayString,getCurrentPrice:this.props.getCurrentPrice,getTokenInfo:this.props.getTokenInfo,notification:this.props.notification,selectedExplorer:this.props.selectedExplorer,unitOfAccountSetting:this.props.unitOfAccountSetting})]})}else{if(!i)return null;p=(0,Aa.jsxs)(Wa.Z,{children:[(0,Aa.jsx)(fa.Z,{component:"div",color:"#4A5065",variant:"body1",fontWeight:500,mb:"16px",id:"signMessageTitle",children:r.formatMessage(gs.signMessage)}),(0,Aa.jsx)(Wa.Z,{width:"100%",p:"16px",border:"1px solid var(--yoroi-palette-gray-100)",borderRadius:"6px",id:"signMessageBox-payload",sx:{overflow:"auto"},children:(0,Aa.jsx)("pre",{children:this.renderPayload(i.payload)})}),(0,Aa.jsx)(ts.Z,{error:u}),"mnemonic"===d&&(0,Aa.jsx)(Wa.Z,{mt:"16px",children:(0,Aa.jsx)(Ba.Z,{type:"password",...sa()(a).call(a),error:a.error,id:"walletPassword"})})]}),g=null}return h="ledger"===d?_a.default.confirmOnLedger:"trezor"===d?_a.default.confirmOnTrezor:_a.default.confirm,(0,Aa.jsxs)(Wa.Z,{height:"100%",display:"flex",flexDirection:"column",children:[(0,Aa.jsx)(Kr,{isDataSignin:!s&&Boolean(i),detailsContent:(0,Aa.jsx)(Wa.Z,{overflowWrap:"break-word",children:p}),connectionContent:(0,Aa.jsx)(us,{connectedWallet:this.props.selectedWallet,connectedWebsite:o}),utxosContent:g}),(0,Aa.jsx)(Wa.Z,{sx:{padding:"32px",borderTop:"1px solid #DCE0E9",maxWidth:"100%",backgroundColor:"#fff"},children:(0,Aa.jsxs)(Wa.Z,{sx:{display:"flex",gap:"15px"},children:[(0,Aa.jsx)(ha.Z,{sx:{minWidth:0},fullWidth:!0,variant:"outlined",color:"primary",onClick:n,disabled:l,id:"cancelButton",children:r.formatMessage(_a.default.cancel)}),(0,Aa.jsx)(ha.Z,{variant:"contained",color:"primary",fullWidth:!0,disabled:"mnemonic"===d&&!a.isValid||l,onClick:sa()(e=this.submit).call(e,this),sx:{minWidth:0},id:"confirmButton",children:r.formatMessage(h)})]})})]})}},D()(ps,"contextTypes",{intl:he.intlShape.isRequired}),cs=ps))||cs;var fs,ws,ys,ms=a(82164),xs=a(96386),bs=a(95667),As=a(5935);let vs=(0,_t.Pi)((ws=class extends vt.Component{constructor(...e){super(...e),k()(this,"notificationElementId",ys,this),D()(this,"onUnload",(e=>{e.preventDefault(),this.props.actions.connector.cancelSignInTx.trigger()})),D()(this,"onConfirm",(e=>async t=>{var a;const{signingMessage:r}=this.props.stores.connector;if(null==r)throw new Error("missing the signing message");const s=P()(a=this.props.stores.connector.filteredWallets).call(a,(e=>e.publicDeriverId===r.publicDeriverId));if(null==s)throw new Error("missing connected wallet");"mnemonic"===s.type&&await(0,O.getPrivateStakingKey)({publicDeriverId:e.publicDeriverId,password:t}),await this.props.actions.connector.confirmSignInTx.trigger(t),window.removeEventListener("beforeunload",this.onUnload),window.removeEventListener("unload",this.onUnload),window.close()})),D()(this,"onCancel",(()=>{window.removeEventListener("beforeunload",this.onUnload),window.removeEventListener("unload",this.onUnload),this.props.actions.connector.cancelSignInTx.trigger(),aa()((()=>{window.close()}),100)}))}componentDidMount(){this.props.actions.connector.refreshWallets.trigger(),window.addEventListener("beforeunload",this.onUnload),window.addEventListener("unload",this.onUnload)}renderLoading(){return(0,Aa.jsx)(xs.Z,{bottomPadding:0,children:(0,Aa.jsx)(ms.Z,{children:(0,Aa.jsx)(Ta.default,{})})})}renderError(e){return(0,Aa.jsx)(xs.Z,{bottomPadding:0,children:e})}render(){var e,t;const a=this.props.actions,{uiNotifications:r}=this.props.stores,{signingMessage:n,unrecoverableError:o}=this.props.stores.connector;if(null!=o)return this.renderError(o);if(null==n)return this.renderLoading();const i=P()(e=this.props.stores.connector.filteredWallets).call(e,(e=>e.publicDeriverId===n.publicDeriverId));if(null==i)return this.renderLoading();const l=this.props.stores.connector.currentConnectorWhitelist,d=P()(l).call(l,(e=>i.publicDeriverId===e.publicDeriverId&&e.url===n.requesterUrl)),u={duration:be.Z.wallets.ADDRESS_COPY_TOOLTIP_NOTIFICATION_DURATION,message:_a.default.copyTooltipMessage},c=(e,t)=>{r.isOpen(t)||((0,s.runInAction)((()=>{this.notificationElementId=t})),a.notifications.open.trigger({id:t,duration:u.duration,message:u.message}))},p=e=>(0,bs.addressToDisplayString)(e,(0,F.getNetworkById)(i.networkId)),g=e=>this.onConfirm(i)(e),h=null==this.notificationElementId?null:r.getTooltipActiveNotification(this.notificationElementId),f="data"===n.sign.type?{address:n.sign.address,payload:n.sign.payload}:null,w=null!==(t=this.props.stores.explorers.selectedExplorer.get(i.networkId))&&void 0!==t?t:(()=>{throw new Error("No explorer for wallet network")})();let y=null;switch(n.sign.type){case"tx-reorg/cardano":{const e=this.props.stores.connector.adaTransaction;if(null==e&&null==f)return this.renderLoading();y=(0,Aa.jsx)(As.Z,{txData:e,getTokenInfo:(0,L.genLookupOrNull)(this.props.stores.tokenInfoStore.tokenInfo),onConfirm:g,onCancel:this.onCancel,selectedExplorer:w,submissionError:this.props.stores.connector.submissionError,walletType:i.type,hwWalletError:this.props.stores.connector.hwWalletError});break}case"data":case"tx/cardano":{const e=this.props.stores.connector.adaTransaction;if(null==e&&null==f)return this.renderLoading();let t;t="tx/cardano"===n.sign.type?n.sign.tx.tx:"",y=(0,Aa.jsx)(hs,{shouldHideBalance:this.props.stores.profile.shouldHideBalance,connectedWebsite:d,selectedWallet:i,onCopyAddressTooltip:c,notification:h,txData:e,getTokenInfo:(0,L.genLookupOrNull)(this.props.stores.tokenInfoStore.tokenInfo),defaultToken:{defaultNetworkId:i.networkId,defaultIdentifier:i.defaultTokenId},network:(0,F.getNetworkById)(i.networkId),onConfirm:g,onCancel:this.onCancel,addressToDisplayString:p,getCurrentPrice:this.props.stores.coinPriceStore.getCurrentPrice,selectedExplorer:w,unitOfAccountSetting:this.props.stores.profile.unitOfAccount,submissionError:this.props.stores.connector.submissionError,signData:f,walletType:i.type,hwWalletError:this.props.stores.connector.hwWalletError,isHwWalletErrorRecoverable:this.props.stores.connector.isHwWalletErrorRecoverable,tx:t});break}default:y=null}return(0,Aa.jsx)(ya.Z,{sx:{height:"calc(100vh - 52px)",bgcolor:"white"},children:y})}},ys=S()(ws.prototype,"notificationElementId",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),fs=ws))||fs;var _s=a(59828);const Ts=(e,t)=>{return e.loading.isLoading?(0,Aa.jsx)(_s.Z,{stores:e,actions:t}):(a=Es(e,t),(0,Aa.jsx)(cr,{children:a}));var a},Es=(e,t)=>(0,Aa.jsxs)(Tt.Switch,{children:[(0,Aa.jsx)(Tt.Route,{exact:!0,path:"/",component:a=>(0,Aa.jsx)(Qa,{...a,stores:e,actions:t})}),(0,Aa.jsx)(Tt.Route,{exact:!0,path:"/signin-transaction",component:a=>(0,Aa.jsx)(vs,{...a,stores:e,actions:t})})]});var Is=a(35265),ks=a(95666),Cs=a(13469),Ds=a(22233),Ms=(a(3649),a(26295),a(92963));function Ss(e){return{"--yoroi-palette-common-white":e.palette.ds.white_static,"--yoroi-palette-common-black":e.palette.ds.black_static,"--yoroi-palette-primary-50":e.palette.ds.primary_100,"--yoroi-palette-primary-100":e.palette.ds.primary_100,"--yoroi-palette-primary-200":e.palette.ds.primary_200,"--yoroi-palette-primary-300":e.palette.ds.primary_300,"--yoroi-palette-primary-contrastText":e.palette.ds.text_gray_medium,"--yoroi-palette-secondary-50":e.palette.ds.primary_100,"--yoroi-palette-secondary-100":e.palette.ds.primary_100,"--yoroi-palette-secondary-200":e.palette.ds.primary_200,"--yoroi-palette-secondary-300":e.palette.ds.primary_300,"--yoroi-palette-secondary-contrastText":e.palette.ds.text_gray_medium,"--yoroi-palette-error-50":e.palette.ds.text_error,"--yoroi-palette-error-100":e.palette.ds.text_error,"--yoroi-palette-error-200":e.palette.ds.text_error,"--yoroi-palette-cyan-50":e.palette.ds.sys_cyan_100,"--yoroi-palette-cyan-100":e.palette.ds.sys_cyan_500,"--yoroi-palette-gray-50":e.palette.ds.gray_50,"--yoroi-palette-gray-100":e.palette.ds.gray_100,"--yoroi-palette-gray-200":e.palette.ds.gray_200,"--yoroi-palette-gray-300":e.palette.ds.gray_300,"--yoroi-palette-gray-400":e.palette.ds.gray_400,"--yoroi-palette-gray-500":e.palette.ds.gray_500,"--yoroi-palette-gray-600":e.palette.ds.gray_600,"--yoroi-palette-gray-700":e.palette.ds.gray_700,"--yoroi-palette-gray-800":e.palette.ds.gray_800,"--yoroi-palette-gray-900":e.palette.ds.gray_900,"--yoroi-palette-gray-max":e.palette.ds.black_static,"--yoroi-palette-gray-min":e.palette.ds.white_static,"--yoroi-palette-background-overlay":e.palette.ds.bg_gradient_1,"--yoroi-palette-tx-status-pending-background":e.palette.ds.web_overlay,"--yoroi-palette-tx-status-pending-text":e.palette.ds.text_gray_medium,"--yoroi-palette-tx-status-pending-stripes":e.palette.ds.gray_200,"--yoroi-palette-tx-status-high-background":e.palette.ds.el_gray_max,"--yoroi-palette-tx-status-high-text":e.palette.ds.text_gray_medium,"--yoroi-palette-tx-status-failed-background":e.palette.ds.sys_magenta_300,"--yoroi-palette-tx-status-failed-text":e.palette.ds.text_error,"--yoroi-palette-tx-status-medium-background":e.palette.ds.gray_300,"--yoroi-palette-tx-status-medium-text":e.palette.ds.text_gray_medium,"--yoroi-palette-tx-status-low-background":e.palette.ds.sys_magenta_100,"--yoroi-palette-tx-status-low-text":e.palette.ds.text_gray_low,"--yoroi-palette-background-banner-warning":e.palette.ds.sys_orange_500,"--yoroi-palette-background-walletAdd-title":e.palette.ds.text_gray_medium,"--yoroi-palette-background-walletAdd-subtitle":e.palette.ds.text_gray_low,"--yoroi-comp-button-primary-background":"var(--yoroi-palette-secondary-300)","--yoroi-comp-button-primary-background-hover":"var(--yoroi-palette-secondary-200)","--yoroi-comp-button-primary-background-active":"var(--yoroi-palette-secondary-300)","--yoroi-comp-button-primary-text":"var(--yoroi-palette-secondary-contrastText)","--yoroi-comp-button-secondary-background":"transparent","--yoroi-comp-button-secondary-background-hover":"var(--yoroi-palette-secondary-50)","--yoroi-comp-button-secondary-background-active":"transparent","--yoroi-comp-button-secondary-border":"var(--yoroi-palette-secondary-300)","--yoroi-comp-button-secondary-border-hover":"var(--yoroi-palette-secondary-200)","--yoroi-comp-button-secondary-text":"var(--yoroi-palette-secondary-300)","--yoroi-comp-button-secondary-text-active":"var(--yoroi-palette-secondary-300)","--yoroi-comp-button-danger-background":"var(--yoroi-palette-error-200)","--yoroi-comp-button-danger-background-hover":"var(--yoroi-palette-error-100)","--yoroi-comp-button-danger-background-active":"var(--yoroi-palette-error-200)","--yoroi-comp-button-danger-text":"var(--yoroi-palette-common-white)","--yoroi-comp-button-flat-background":"#fbf5f4","--yoroi-comp-button-flat-background-hover":"#F1EDEE","--yoroi-comp-button-flat-background-active":"#EBE9EA","--yoroi-comp-button-flat-background-disabled":"#F1F3F5","--yoroi-comp-button-flat-text-disabled":"#121326","--yoroi-comp-button-flat-text":"#121326","--yoroi-comp-checkbox-border":"var(--yoroi-palette-gray-900)","--yoroi-comp-checkbox-border-disabled":"var(--yoroi-palette-gray-200)","--yoroi-comp-checkbox-background-active":"var(--yoroi-palette-secondary-300)","--yoroi-comp-checkbox-text":"var(--yoroi-palette-gray-900)","--yoroi-comp-input-error":"var(--yoroi-palette-error-100)","--yoroi-comp-input-background":"transparent","--yoroi-comp-input-background-disabled":"transparent","--yoroi-comp-input-border":"var(--yoroi-palette-gray-400)","--yoroi-comp-input-border-disabled":"var(--yoroi-palette-gray-200)","--yoroi-comp-input-border-focus":"var(--yoroi-palette-gray-900)","--yoroi-comp-input-placeholder":"var(--yoroi-palette-gray-400)","--yoroi-comp-input-placeholder-disabled":"var(--yoroi-palette-gray-200)","--yoroi-comp-input-text":"var(--yoroi-palette-gray-900)","--yoroi-comp-input-text-focus":"var(--yoroi-palette-gray-900)","--yoroi-comp-input-text-disabled":"var(--yoroi-palette-gray-200)","--yoroi-comp-input-helper-text":"var(--yoroi-palette-gray-600)","--yoroi-comp-input-helper-text-disabled":"var(--yoroi-palette-gray-200)","--yoroi-comp-menu-icon":"var(--yoroi-palette-gray-600)","--yoroi-comp-menu-item-background":"var(--yoroi-palette-common-white)","--yoroi-comp-menu-item-background-highlighted":"var(--yoroi-palette-gray-50)","--yoroi-comp-menu-item-checkmark":"var(--yoroi-palette-secondary-300)","--yoroi-comp-menu-item-text":"var(--yoroi-palette-gray-900)","--yoroi-comp-tabs-background":"var(--yoroi-palette-common-white)","--yoroi-comp-tabs-text":"var(--yoroi-palette-gray-600)","--yoroi-comp-tabs-text-active":"var(--yoroi-palette-secondary-300)","--yoroi-comp-tabs-text-disabled":"var(--yoroi-palette-gray-400)","--yoroi-comp-tooltip-background":"var(--yoroi-palette-gray-700)","--yoroi-comp-tooltip-text":"var(--yoroi-palette-common-white)","--yoroi-comp-dialog-background":"var(--yoroi-palette-common-white)","--yoroi-comp-dialog-text":"var(--yoroi-palette-gray-900)","--yoroi-comp-dialog-overlay-background-color":"var(--yoroi-palette-background-overlay)","--yoroi-comp-dialog-min-width-md":"540px","--yoroi-comp-dialog-min-width-lg":"600px","--yoroi-sidebar-text":e.palette.ds.text_gray_medium,"--yoroi-sidebar-background":`linear-gradient(22.58deg, ${e.palette.ds.el_primary_medium} 0%, ${e.palette.ds.el_primary_min} 100%)`,"--yoroi-sidebar-end":e.palette.ds.el_primary_min,"--yoroi-notification-message-background":"rgba(21, 209, 170, 0.8)","--yoroi-qr-code-background":"transparent","--yoroi-qr-code-foreground":"var(--yoroi-palette-gray-800)","--yoroi-wallet-add-option-dialog-item-title-color":"var(--yoroi-palette-gray-900)","--yoroi-wallet-add-option-dialog-item-learn-more-button-bg-color":"var(--yoroi-palette-gray-50)","--yoroi-transactions-icon-type-expend-background-color":"#15d1aa","--yoroi-transactions-icon-type-income-background-color":"#9ab2d9","--yoroi-transactions-icon-type-exchange-background-color":"#10aca4","--yoroi-transactions-icon-type-failed-background-color":"#eb6d7a","--yoroi-scrollbar-thumb-background":"#c8ccce","--yoroi-warning-box-bg-shadow":"0 2px 40px 0 rgba(242, 242, 242, 0.5)","--yoroi-topbar-height":"64px","--yoroi-navigation-tab-height":"classic"===e.name?"45px":"64px","--yoroi-widgets-hash-dark":"classic"===e.name?"#000000":"#464749","--yoroi-widgets-hash-light":"classic"===e.name?"#929293":"#adaeb6","--yoroi-send-confirmation-dialog-send-values-color":"classic"===e.name?"#ea4c5b":"#15d1aa","--yoroi-hw-connect-dialog-middle-block-common-background-color":"classic"===e.name?"#f3f3f5":"#ffffff","--yoroi-hw-connect-dialog-middle-block-common-error-background-color":"classic"===e.name?"#fdf1f0":"#ffffff","--yoroi-terms-of-use-text-color":"classic"===e.name?"#121327":"revamp-light"===e.name?"#242838":"#38293d","--yoroi-loading-background-color":"#fafbfc","--yoroi-support-settings-text":"classic"===e.name?"#121327":"#2b2c32","--yoroi-instructions-text-color":"classic"===e.name?"#121327":"#adaeb6","--yoroi-mnemonic-background-color-hover":"classic"===e.name?"rgba(242, 183, 172, 0.12)":"#f0f3f5","--yoroi-mnemonic-background-color":"classic"===e.name?"rgba(218, 164, 154, 0.12)":"#f0f3f5","--yoroi-backup-mnemonic-background-color":"var(--yoroi-palette-gray-50)",..."modern"===e.name?{"--yoroi-dashboard-label-underline-color":"rgba(135, 145, 173, 0.8)","--yoroi-dashboard-card-shadow-color":"rgba(24, 26, 30, 0.08)","--yoroi-dashboard-card-border-color":"rgba(77, 32, 192, 0.08)","--yoroi-dashboard-card-vertical-separator-color":"#E6E6E6","--yoroi-dashboard-card-nodelegation-background-color":"#F9FBFF","--yoroi-dashboard-tooltip-background-color":"rgba(56, 57, 61, 0.75)","--yoroi-dashboard-stakepool-head-background-color":"#F4F6FC","--yoroi-dashboard-epoch-time-background":"#F0F3F5","--yoroi-dashboard-percentage-epoch-base":"#B7C3ED","--yoroi-dashboard-percentage-epoch-circle":"#3154CB","--yoroi-dashboard-percentage-stake-base":"#FFEDF2","--yoroi-dashboard-percentage-stake-circle":"#FF1755","--yoroi-dashboard-graph-tab-color":"#ADAEB6","--yoroi-dashboard-graph-active-tab-color":"#3D60CD","--yoroi-dashboard-graph-radio-color":"#93979C","--yoroi-dashboard-graph-axis-tick-color":"#ADAEB6","--yoroi-dashboard-graph-axis-text-color":"#38393D","--yoroi-dashboard-graph-bar-hover-background-color":"#D9DDE0","--yoroi-dashboard-graph-bar-primary-color":"#6D80FF","--yoroi-dashboard-graph-bar-secondary-color":"#1A44B7","--yoroi-dashboard-graph-bar-width":16,"--yoroi-dashboard-graph-tooltip-text-color":"#FFFFFF","--yoroi-dashboard-graph-tooltip-background":"rgba(56, 57, 61, 0.7)"}:null}}var Rs,Ws,Bs,Ps=a(66720),Ns=a(27283);(0,he.addLocaleData)([...It(),...Ct(),...Mt(),...Rt(),...Bt(),...Nt(),...Ot(),...Ht(),...Vt(),...jt(),...Zt(),...Yt(),...$t(),...Xt(),...ea()]);let Fs=(0,_t.Pi)((Ws=class extends vt.Component{constructor(...e){super(...e),k()(this,"mergedMessages",Bs,this),D()(this,"componentDidMount",(()=>{(0,s.autorun)((async()=>{const e={...await ht.Iz["en-US"],...await ht.Iz[this.props.stores.profile.currentLocale]};(0,s.runInAction)((()=>{this.mergedMessages=e}))}))})),D()(this,"state",{crashed:!1}),D()(this,"getContent",(()=>{const{stores:e,actions:t,history:a}=this.props;return!0===this.state.crashed?(0,Aa.jsx)(ks.Z,{}):(0,Aa.jsx)(Tt.Router,{history:a,children:Ts(e,t)})}))}static getDerivedStateFromError(e){return{crashed:!0}}componentDidCatch(e,t){Cs.Yd.error(t.componentStack)}componentWillUnmount(){window.removeEventListener("unload",(()=>{}))}render(){const e=this.mergedMessages;if(null===e)return null;const{stores:t}=this.props,a=t.profile.currentLocale,r=t.profile.currentTheme,s=Ns.K6[r];return(0,Ns.LO)(r),(0,Aa.jsx)("div",{style:{height:"100%",backgroundColor:"var(--yoroi-palette-gray-50)"},children:(0,Aa.jsx)(Za.aM,{layout:r,children:(0,Aa.jsxs)(Ds.Z,{theme:s,children:[(0,Aa.jsx)(Ps.ZP,{}),(n=s,(0,Aa.jsx)(Ms.Z,{styles:{":root":Ss(n),"#root":{height:"100%"},"#root > [data-reactroot]":{width:"100%",height:"100%"},"html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video":{margin:0,padding:0,border:0,fontSize:"100%",font:"inherit",verticalAlign:"baseline"},"article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section":{display:"block"},"ol,ul":{listStyle:"none"},table:{borderCollapse:"collapse",borderSpacing:0},button:{background:"none",border:"none",padding:0,fontFamily:"inherit","&:focus":{outline:0}},"*":{boxSizing:"border-box","&::-webkit-scrollbar":{width:"20px"},"&::-webkit-scrollbar-track":{backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:"var(--yoroi-scrollbar-thumb-background)",border:"7px solid transparent",borderRadius:"12px",backgroundClip:"content-box"}},"html,body,#root,#root > [data-reactroot]":{width:"100%",height:"100%",WebkitFontSmoothing:"antialiased",":global(.YoroiClassic)":{letterSpacing:"1px"}},html:{overflow:"hidden"},body:{"input:-webkit-autofill,input:-webkit-autofill:hover,input:-webkit-autofill:focus,input:-webkit-autofill:active":{WebkitBoxShadow:`0 0 0 30px ${n.palette.ds.bg_color_max} inset !important`},lineHeight:1,fontFamily:n.typography.fontFamily},"@keyframes loading-spin":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}},strong:{fontWeight:500}}})),(0,Aa.jsx)(Is.Z,{}),(0,Aa.jsx)(he.IntlProvider,{locale:a,key:a,messages:e,children:this.getContent()})]})})});var n}},Bs=S()(Ws.prototype,"mergedMessages",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rs=Ws))||Rs;const Os=Fs;(0,s.configure)({enforceActions:"always"}),ee.Z.DEBUG=!0,(0,at.HG)(at.sz.YoroiConnector),window.addEventListener("load",(async()=>{const e=await(0,i.s)(),t=new n.RouterStore,a=(0,o.q_)(),l=(0,n.syncHistoryWithStore)(a,t),d=gt(e,bt);window.yoroi={api:e,actions:bt,translations:ht.Iz,stores:d,reset:(0,s.action)((()=>{At.a.resetAllActions(),gt(e,bt)}))};const u=document.querySelector("#root-yoroi-connector");if(null==u)throw new Error("Root element not found.");const c=(new ne.default).loadIsAnalyticsAllowed();await Ke.iN.load({environment:Ae.Z.isProduction()?"production":"development",client:{configuration:{optOut:!c,flushIntervalMillis:5e3,trackingOptions:{ipAddress:!1},defaultTracking:!1}}}).promise,(0,r.render)((0,Aa.jsx)(Os,{stores:d,actions:bt,history:l}),u)}))},85342:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(23645),s=a.n(r)()((function(e){return e[1]}));s.push([e.id,".ProgressBar_component{overflow:hidden;position:absolute;left:0;right:0;top:0}.ProgressBar_component progress{margin-right:8px}.ProgressBar_component progress[value]{width:100%;-webkit-appearance:none;appearance:none}.ProgressBar_component progress[value]::-webkit-progress-bar{height:4px;background-color:var(--yoroi-palette-gray-200)}.ProgressBar_component progress[value]::-webkit-progress-value{height:4px;background-color:var(--yoroi-palette-secondary-300)}\n",""]),s.locals={component:"ProgressBar_component"};const n=s},4159:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(23645),s=a.n(r)()((function(e){return e[1]}));s.push([e.id,".ConnectPage_component{display:flex;flex-direction:column;height:calc(100vh - 52px);overflow:auto;background-color:#fff}.ConnectPage_component.ConnectPage_isNightly{height:calc(100vh - 138px)}.ConnectPage_connectWrapper{padding-top:32px;padding-bottom:32px;display:flex;flex-direction:column;align-items:center}.ConnectPage_connectWrapper .ConnectPage_image{width:64px;height:64px;border:1px solid #a7afc0;border-radius:50%;display:flex;justify-content:center;align-items:center;background-color:#fff}.ConnectPage_connectWrapper .ConnectPage_image img{width:44px}.ConnectPage_connectWrapper .ConnectPage_title{text-align:center;margin-top:8px;font-size:18px;font-weight:500}.ConnectPage_toggleButton{cursor:pointer}.ConnectPage_noWallets{display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;margin-top:60px;letter-spacing:0}.ConnectPage_noWallets .ConnectPage_noWalletsImage{margin-bottom:33px}.ConnectPage_noWallets .ConnectPage_noWalletsText{color:#242838;font-size:24px;letter-spacing:0;line-height:32px;margin-bottom:16px}.ConnectPage_noWallets .ConnectPage_createWallet{color:#17d1aa;font-size:16px;line-height:24px;cursor:pointer}.ConnectPage_noWallets .ConnectPage_createWallet::first-letter{text-transform:uppercase}.ConnectPage_walletsContainer{padding-left:16px;padding-right:16px}.ConnectPage_titleWallet{display:flex;align-items:center;margin-left:16px;margin-bottom:8px;font-weight:500}.ConnectPage_titleWallet *+*{padding-left:10px}.ConnectPage_list{overflow:auto}.ConnectPage_list .ConnectPage_listItem{border:1px solid #fff;border-radius:8px}.ConnectPage_list .ConnectPage_listItem>div{width:100%}.ConnectPage_list .ConnectPage_listItem label{width:100%;color:var(--yoroi-palette-gray-900)}.ConnectPage_list .ConnectPage_listItem:hover{border-color:#c4cad7}.ConnectPage_bottom{border-top:1px solid #dce0e9;padding:15px 32px}.ConnectPage_bottom .ConnectPage_infoText{color:var(--yoroi-palette-gray-600);font-size:12px;line-height:20px}.ConnectPage_errorMessage{color:var(--yoroi-comp-input-error);padding:10px 0}.ConnectPage_errorMessage p{margin-top:10px;overflow-wrap:break-word}@media (min-width: 678px){.ConnectPage_component{max-width:600px;margin:auto;padding-top:40px}.ConnectPage_component .ConnectPage_pageTitle{text-align:center;padding-left:0px}}\n",""]),s.locals={component:"ConnectPage_component",isNightly:"ConnectPage_isNightly",connectWrapper:"ConnectPage_connectWrapper",image:"ConnectPage_image",title:"ConnectPage_title",toggleButton:"ConnectPage_toggleButton",noWallets:"ConnectPage_noWallets",noWalletsImage:"ConnectPage_noWalletsImage",noWalletsText:"ConnectPage_noWalletsText",createWallet:"ConnectPage_createWallet",walletsContainer:"ConnectPage_walletsContainer",titleWallet:"ConnectPage_titleWallet",list:"ConnectPage_list",listItem:"ConnectPage_listItem",bottom:"ConnectPage_bottom",infoText:"ConnectPage_infoText",errorMessage:"ConnectPage_errorMessage",pageTitle:"ConnectPage_pageTitle"};const n=s},99987:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(23645),s=a.n(r)()((function(e){return e[1]}));s.push([e.id,".ConnectedWallet_card{display:flex;align-items:center;justify-content:flex-start;width:100%}.ConnectedWallet_card .ConnectedWallet_avatar{margin-right:8px;border-radius:4px;overflow:hidden;object-fit:cover;height:40px;width:40px}.ConnectedWallet_card .ConnectedWallet_icon{width:40px;height:40px;display:flex;align-items:center;justify-content:center}.ConnectedWallet_card .ConnectedWallet_wrapper{display:flex;align-items:center;width:100%}.ConnectedWallet_card .ConnectedWallet_nameWrapper{display:flex;flex-flow:column;align-items:flex-start;justify-content:space-between;height:100%}.ConnectedWallet_card .ConnectedWallet_name{flex:1;text-align:left}.ConnectedWallet_card .ConnectedWallet_balance{font-weight:400}.ConnectedWallet_card .ConnectedWallet_checksum{color:#6b7384;margin-top:8px;font-size:14px}\n",""]),s.locals={card:"ConnectedWallet_card",avatar:"ConnectedWallet_avatar",icon:"ConnectedWallet_icon",wrapper:"ConnectedWallet_wrapper",nameWrapper:"ConnectedWallet_nameWrapper",name:"ConnectedWallet_name",balance:"ConnectedWallet_balance",checksum:"ConnectedWallet_checksum"};const n=s},96903:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(23645),s=a.n(r)()((function(e){return e[1]}));s.push([e.id,".Layout_layout{width:480px;min-height:100vh;border-radius:2px;background-color:var(--yoroi-palette-gray-50);box-shadow:0 2px 5px 3px rgba(0,0,0,0.06);font-weight:400;margin:0 auto}@media screen and (min-width: 1441px){.Layout_layout{width:640px}}.Layout_header{height:56px;background:linear-gradient(30.09deg, #244abf 0%, #4760ff 176.73%);display:flex;align-items:center;padding:16px 32px}.Layout_header .Layout_menuIcon{cursor:pointer}.Layout_header .Layout_menu{margin:0 auto;padding-right:24px;color:#fff;display:flex}.Layout_header .Layout_menu svg{width:24px;height:24px}.Layout_header .Layout_menu .Layout_connectorLogoContainer{display:flex;align-items:center}.Layout_header .Layout_menu .Layout_connectorLogo{width:20px;height:20px;margin-left:10px}.Layout_header .Layout_menu .Layout_logo{display:flex;align-items:center;margin-left:12px}.Layout_header .Layout_menu .Layout_logo h3{font-size:16px;font-weight:500;letter-spacing:0;line-height:19px;text-transform:capitalize}.Layout_header .Layout_menu .Layout_poweredBy{font-size:8px;letter-spacing:0;line-height:9px}.Layout_header .Layout_setting{margin-left:65px}.Layout_content{position:relative}\n",""]),s.locals={layout:"Layout_layout",header:"Layout_header",menuIcon:"Layout_menuIcon",menu:"Layout_menu",connectorLogoContainer:"Layout_connectorLogoContainer",connectorLogo:"Layout_connectorLogo",logo:"Layout_logo",poweredBy:"Layout_poweredBy",setting:"Layout_setting",content:"Layout_content"};const n=s}},fe={};function we(e){if(fe[e])return fe[e].exports;var t=fe[e]={id:e,loaded:!1,exports:{}};return he[e].call(t.exports,t,t.exports,we),t.loaded=!0,t.exports}we.m=he,we.c=fe,we.x=e=>{},we.amdO={},we.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return we.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,we.t=function(a,r){if(1&r&&(a=this(a)),8&r)return a;if("object"==typeof a&&a){if(4&r&&a.__esModule)return a;if(16&r&&"function"==typeof a.then)return a}var s=Object.create(null);we.r(s);var n={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&a;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>n[e]=()=>a[e]));return n.default=()=>a,we.d(s,n),s},we.d=(e,t)=>{for(var a in t)we.o(t,a)&&!we.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},we.f={},we.e=e=>Promise.all(Object.keys(we.f).reduce(((t,a)=>(we.f[a](e,t),t)),[])),we.u=e=>e+"."+{748:"6e91eedf9574bc98aac1",1159:"0d57bfd3ccc26c96ef69",2461:"42d8c20c528cad2c2237",2530:"d7ba8504222342399546",2635:"3cb78431449075fd2b32",3162:"3fe0fb9e0b75feaf5e91",4135:"d2adc6aeffbe65dd0a98",4292:"618ce8fa43b237070247",4351:"4cde4b094f0555e60f81",4388:"082c4f390ac3a281d6a2",5262:"789ac67e6611ea702234",5560:"c9030f7f77c59725ef23",5573:"af53fbfc3976850f9d8b",6170:"09b4a3fad5a2ab39419c",6256:"227673e48458921c5361",6336:"9d3cc53125f3898af793",6452:"74dc62deab655ffdc94b",6553:"26f5cf5b01beee63b073",6996:"70855e37f2a50eb4dd6f",7008:"ea8398e89978649c5d02",7196:"03f2aeb3faec915009dd",7202:"1a29af2a5992db22a51c",7516:"d0ee6974377a20c5e5cc",7981:"b1e117dd2cd4b3d38da5",8066:"0ee1dc9e6da9f2d23c31",8533:"8602300c105f005e033e",8876:"3a7cbb0fa414046975b1",9410:"3c4e7b5ab3704fa2f971"}[e]+".chunk.js",we.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),we.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),we.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},r="yoroi:",we.l=(e,t,s,n)=>{if(a[e])a[e].push(t);else{var o,i;if(void 0!==s)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==r+s){o=u;break}}o||(i=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,we.nc&&o.setAttribute("nonce",we.nc),o.setAttribute("data-webpack",r+s),o.src=e),a[e]=[t];var c=(t,r)=>{o.onerror=o.onload=null,clearTimeout(p);var s=a[e];if(delete a[e],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((e=>e(r))),t)return t(r)},p=setTimeout(c.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=c.bind(null,o.onerror),o.onload=c.bind(null,o.onload),i&&document.head.appendChild(o)}},we.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},we.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),we.p="/js/",(()=>{var e={6875:0},t=[[96768,5069,6427,5194,661,2138,5158,5935],[92369,5069,6427,5194,661,2138,5158,5935]];we.f.j=(t,a)=>{var r=we.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var s=new Promise(((a,s)=>{r=e[t]=[a,s]}));a.push(r[2]=s);var n=we.p+we.u(t),o=new Error;we.l(n,(a=>{if(we.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+n+")",o.name="ChunkLoadError",o.type=s,o.request=n,r[1](o)}}),"chunk-"+t,t)}};var a=e=>{},r=(r,s)=>{for(var n,o,[i,l,d,u]=s,c=0,p=[];c<i.length;c++)o=i[c],we.o(e,o)&&e[o]&&p.push(e[o][0]),e[o]=0;for(n in l)we.o(l,n)&&(we.m[n]=l[n]);for(d&&d(we),r&&r(s);p.length;)p.shift()();return u&&t.push.apply(t,u),a()},s=self.webpackChunkyoroi=self.webpackChunkyoroi||[];function n(){for(var a,r=0;r<t.length;r++){for(var s=t[r],n=!0,o=1;o<s.length;o++){var i=s[o];0!==e[i]&&(n=!1)}n&&(t.splice(r--,1),a=we(we.s=s[0]))}return 0===t.length&&(we.x(),we.x=e=>{}),a}s.forEach(r.bind(null,0)),s.push=r.bind(null,s.push.bind(s));var o=we.x;we.x=()=>(we.x=o||(e=>{}),(a=n)())})(),ce={},pe={1416:function(){return{"./cardano_wallet_browser.js":{__wbindgen_string_new:function(e,t){return void 0===s&&(s=we.c[82123].exports),s.__wbindgen_string_new(e,t)},__wbindgen_object_drop_ref:function(e){return void 0===n&&(n=we.c[82123].exports),n.__wbindgen_object_drop_ref(e)},__wbindgen_json_parse:function(e,t){return void 0===o&&(o=we.c[82123].exports),o.__wbindgen_json_parse(e,t)},__wbindgen_json_serialize:function(e,t){return void 0===i&&(i=we.c[82123].exports),i.__wbindgen_json_serialize(e,t)},__wbindgen_throw:function(e,t){return void 0===l&&(l=we.c[82123].exports),l.__wbindgen_throw(e,t)},__wbindgen_rethrow:function(e){return void 0===d&&(d=we.c[82123].exports),d.__wbindgen_rethrow(e)}}}},84747:function(){return{"./cardano_serialization_lib_bg.js":{__wbindgen_object_drop_ref:function(e){return void 0===u&&(u=we.c[87019].exports),u.ug$(e)},__wbindgen_string_new:function(e,t){return void 0===c&&(c=we.c[87019].exports),c.h4u(e,t)},__wbindgen_number_new:function(e){return void 0===p&&(p=we.c[87019].exports),p.pT7(e)},__wbindgen_error_new:function(e,t){return void 0===g&&(g=we.c[87019].exports),g.hdV(e,t)},__wbindgen_string_get:function(e,t){return void 0===h&&(h=we.c[87019].exports),h.qtq(e,t)},__wbindgen_object_clone_ref:function(e){return void 0===f&&(f=we.c[87019].exports),f.m_1(e)},__wbindgen_is_object:function(e){return void 0===w&&(w=we.c[87019].exports),w.WlW(e)},__wbg_String_91fba7ded13ba54c:function(e,t){return void 0===y&&(y=we.c[87019].exports),y.RVh(e,t)},__wbg_set_20cbc34131e76824:function(e,t,a){return void 0===m&&(m=we.c[87019].exports),m.Wl7(e,t,a)},__wbg_crypto_1d1f22824a6a080c:function(e){return void 0===x&&(x=we.c[87019].exports),x.q4o(e)},__wbg_process_4a72847cc503995b:function(e){return void 0===b&&(b=we.c[87019].exports),b.eoR(e)},__wbg_versions_f686565e586dd935:function(e){return void 0===A&&(A=we.c[87019].exports),A.uYV(e)},__wbg_node_104a2ff8d6ea03a2:function(e){return void 0===v&&(v=we.c[87019].exports),v.qxi(e)},__wbindgen_is_string:function(e){return void 0===_&&(_=we.c[87019].exports),_.eYF(e)},__wbg_require_cca90b1a94a0255b:function(){return void 0===T&&(T=we.c[87019].exports),T.OQ_()},__wbg_msCrypto_eb05e62b530a1508:function(e){return void 0===E&&(E=we.c[87019].exports),E.hcz(e)},__wbg_randomFillSync_5c9c955aa56b6049:function(e,t){return void 0===I&&(I=we.c[87019].exports),I.oH7(e,t)},__wbg_getRandomValues_3aa56aa6edec874c:function(e,t){return void 0===k&&(k=we.c[87019].exports),k.Iui(e,t)},__wbg_new_16b304a2cfa7ff4a:function(){return void 0===C&&(C=we.c[87019].exports),C.G26()},__wbindgen_is_function:function(e){return void 0===D&&(D=we.c[87019].exports),D.o$X(e)},__wbg_newnoargs_e258087cd0daa0ea:function(e,t){return void 0===M&&(M=we.c[87019].exports),M.eh8(e,t)},__wbg_new_d9bc3a0147634640:function(){return void 0===S&&(S=we.c[87019].exports),S.oS$()},__wbg_call_27c0f87801dedf93:function(e,t){return void 0===R&&(R=we.c[87019].exports),R.SpE(e,t)},__wbg_new_72fb9a18b5ae2624:function(){return void 0===W&&(W=we.c[87019].exports),W.Rx9()},__wbg_self_ce0dbfc45cf2f5be:function(){return void 0===B&&(B=we.c[87019].exports),B.m75()},__wbg_window_c6fb939a7f436783:function(){return void 0===P&&(P=we.c[87019].exports),P.YYI()},__wbg_globalThis_d1e6af4856ba331b:function(){return void 0===N&&(N=we.c[87019].exports),N.Bgs()},__wbg_global_207b558942527489:function(){return void 0===F&&(F=we.c[87019].exports),F.nDs()},__wbindgen_is_undefined:function(e){return void 0===O&&(O=we.c[87019].exports),O.XP4(e)},__wbg_set_d4638f722068f043:function(e,t,a){return void 0===L&&(L=we.c[87019].exports),L.CFs(e,t,a)},__wbg_call_b3ca7c6051f9bec1:function(e,t,a){return void 0===H&&(H=we.c[87019].exports),H.EIi(e,t,a)},__wbg_set_8417257aaedc936b:function(e,t,a){return void 0===U&&(U=we.c[87019].exports),U.MZW(e,t,a)},__wbg_buffer_12d079cc21e14bdb:function(e){return void 0===V&&(V=we.c[87019].exports),V._D(e)},__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb:function(e,t,a){return void 0===G&&(G=we.c[87019].exports),G.a6l(e,t,a)},__wbg_new_63b92bc8671ed464:function(e){return void 0===j&&(j=we.c[87019].exports),j.KX$(e)},__wbg_set_a47bac70306a19a7:function(e,t,a){return void 0===K&&(K=we.c[87019].exports),K.fH$(e,t,a)},__wbg_newwithlength_e9b4878cebadb3d3:function(e){return void 0===Z&&(Z=we.c[87019].exports),Z.qlr(e)},__wbg_subarray_a1f73cd4b5b42fe1:function(e,t,a){return void 0===z&&(z=we.c[87019].exports),z.kW0(e,t,a)},__wbg_new_d87f272aec784ec0:function(e,t){return void 0===Y&&(Y=we.c[87019].exports),Y.neC(e,t)},__wbg_call_eae29933372a39be:function(e,t){return void 0===q&&(q=we.c[87019].exports),q.UZK(e,t)},__wbindgen_jsval_eq:function(e,t){return void 0===$&&($=we.c[87019].exports),$.YqC(e,t)},__wbg_self_e0b3266d2d9eba1a:function(e){return void 0===J&&(J=we.c[87019].exports),J.NRn(e)},__wbg_require_0993fe224bf8e202:function(e,t){return void 0===X&&(X=we.c[87019].exports),X.dVC(e,t)},__wbg_crypto_e95a6e54c5c2e37f:function(e){return void 0===Q&&(Q=we.c[87019].exports),Q.yfN(e)},__wbg_getRandomValues_dc67302a7bd1aec5:function(e){return void 0===ee&&(ee=we.c[87019].exports),ee.j8U(e)},__wbg_randomFillSync_dd2297de5917c74e:function(e,t,a){return void 0===te&&(te=we.c[87019].exports),te.SaM(e,t,a)},__wbg_getRandomValues_02639197c8166a96:function(e,t,a){return void 0===ae&&(ae=we.c[87019].exports),ae.ZU4(e,t,a)},__wbindgen_debug_string:function(e,t){return void 0===re&&(re=we.c[87019].exports),re.fYP(e,t)},__wbindgen_throw:function(e,t){return void 0===se&&(se=we.c[87019].exports),se.Or8(e,t)},__wbindgen_memory:function(){return void 0===ne&&(ne=we.c[87019].exports),ne.oHO()}}}},24040:function(){return{"./cardano_message_signing_bg.js":{__wbindgen_object_drop_ref:function(e){return void 0===oe&&(oe=we.c[78263].exports),oe.ug(e)},__wbindgen_string_new:function(e,t){return void 0===ie&&(ie=we.c[78263].exports),ie.h4(e,t)},__wbindgen_debug_string:function(e,t){return void 0===le&&(le=we.c[78263].exports),le.fY(e,t)},__wbindgen_throw:function(e,t){return void 0===de&&(de=we.c[78263].exports),de.Or(e,t)},__wbindgen_rethrow:function(e){return void 0===ue&&(ue=we.c[78263].exports),ue.nD(e)}}}}},ge={4351:[84747],4388:[1416],5573:[24040]},we.w={},we.f.wasm=function(e,t){(ge[e]||[]).forEach((function(a,r){var s=ce[a];if(s)t.push(s);else{var n,o=pe[a](),i=fetch(we.p+""+{4351:{84747:"62757158600eefe9523a"},4388:{1416:"775accd33a430df30a9c"},5573:{24040:"09324a3d5ee138c181b8"}}[e][a]+".module.wasm");n=o instanceof Promise&&"function"==typeof WebAssembly.compileStreaming?Promise.all([WebAssembly.compileStreaming(i),o]).then((function(e){return WebAssembly.instantiate(e[0],e[1])})):"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(i,o):i.then((function(e){return e.arrayBuffer()})).then((function(e){return WebAssembly.instantiate(e,o)})),t.push(ce[a]=n.then((function(e){return we.w[a]=(e.instance||e).exports})))}}))},we.x()})();